<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>models.LinCCAL</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library models.LinCCAL</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.FSets.FMapPositive.html#"><span class="id" title="library">FMapPositive</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Operators.html#"><span class="id" title="library">Relation_Operators</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Operators_Properties.html#"><span class="id" title="library">Operators_Properties</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Program.Program.html#"><span class="id" title="library">Program</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Logic.Classical.html#"><span class="id" title="library">Classical</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">coqrel.LogicalRelations</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="interfaces.Category.html#"><span class="id" title="library">interfaces.Category</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="interfaces.Functor.html#"><span class="id" title="library">interfaces.Functor</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="interfaces.MonoidalCategory.html#"><span class="id" title="library">interfaces.MonoidalCategory</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="models.EffectSignatures.html#"><span class="id" title="library">models.EffectSignatures</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab258"></a><h1 class="section">Linearization-based Concurrent Certified Abstraction Layers</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="LinCCALBase" class="idref" href="#LinCCALBase"><span class="id" title="module">LinCCALBase</span></a> &lt;: <a class="idref" href="interfaces.Category.html#Category"><span class="id" title="module">Category</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a id="LinCCALBase.TMap" class="idref" href="#LinCCALBase.TMap"><span class="id" title="module">TMap</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.FSets.FMapPositive.html#PositiveMap"><span class="id" title="module">PositiveMap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="LinCCALBase.tid" class="idref" href="#LinCCALBase.tid"><span class="id" title="abbreviation">tid</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALBase.key"><span class="id" title="definition">TMap.key</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="LinCCALBase.tmap" class="idref" href="#LinCCALBase.tmap"><span class="id" title="abbreviation">tmap</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALBase.t"><span class="id" title="definition">TMap.t</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab259"></a><h2 class="section">Concurrent object specifications</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a id="LinCCALBase.Spec" class="idref" href="#LinCCALBase.Spec"><span class="id" title="module">Spec</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab260"></a><h3 class="section">Definition</h3>

<div class="paragraph"> </div>

 For simplicity, we use linearized atomic specifications and
      specify correctness directly in terms of that model. In their
      linearized form, the specifications are deterministic, however
      we allow both undefined and unimplementable behaviors.
      Undefined behaviors (<span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.bot"><span class="id" title="constructor">bot</span></a></span>) release the implementation of any
      obligation, and are usually a consequence of illegal actions
      by the client (for example, a thread acquiring a lock twice).
      Conversely, unimplementable behaviors (<span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.top"><span class="id" title="constructor">top</span></a></span>) are simply
      impossible for an implementation to obey; this is usually
      meant to force a different linearization order. For example,
      in the atomic specification, acquiring a lock which is already
      held by a different thread will yield an unimplementable spec.
      However, a lock implementation can still obey the
      specification by delaying the linearization of <span class="inlinecode"><span class="id" title="var">acquire</span></span> until
      the lock is released by the thread currently holding it. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALBase.Spec.outcome" class="idref" href="#LinCCALBase.Spec.outcome"><span class="id" title="inductive">outcome</span></a> {<a id="E:1" class="idref" href="#E:1"><span class="id" title="binder">E</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.t"><span class="id" title="definition">Sig.t</span></a>} {<a id="X:2" class="idref" href="#X:2"><span class="id" title="binder">X</span></a> : <span class="id" title="keyword">Type</span>} {<a id="m:3" class="idref" href="#m:3"><span class="id" title="binder">m</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#E:1"><span class="id" title="variable">E</span></a>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.Spec.bot" class="idref" href="#LinCCALBase.Spec.bot"><span class="id" title="constructor">bot</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.Spec.top" class="idref" href="#LinCCALBase.Spec.top"><span class="id" title="constructor">top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.Spec.ret" class="idref" href="#LinCCALBase.Spec.ret"><span class="id" title="constructor">ret</span></a> (<a id="n:6" class="idref" href="#n:6"><span class="id" title="binder">n</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.LinCCAL.html#m:3"><span class="id" title="variable">m</span></a>) (<a id="x:7" class="idref" href="#x:7"><span class="id" title="binder">x</span></a> : <a class="idref" href="models.LinCCAL.html#X:2"><span class="id" title="variable">X</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.outcome"><span class="id" title="inductive">outcome</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
</div>

<div class="doc">
Our specifications give an outcome of this kind
      for every possible thread and operation of <span class="inlinecode"><span class="id" title="var">E</span></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">CoInductive</span> <a id="LinCCALBase.Spec.t" class="idref" href="#LinCCALBase.Spec.t"><span class="id" title="record">t</span></a> {<a id="E:8" class="idref" href="#E:8"><span class="id" title="binder">E</span></a>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.Spec.next" class="idref" href="#LinCCALBase.Spec.next"><span class="id" title="projection">next</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.tid"><span class="id" title="abbreviation">tid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="m:10" class="idref" href="#m:10"><span class="id" title="binder">m</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.outcome"><span class="id" title="inductive">outcome</span></a> <a class="idref" href="models.LinCCAL.html#E:8"><span class="id" title="variable">E</span></a> (@<a class="idref" href="models.LinCCAL.html#t:9"><span class="id" title="inductive">t</span></a> <a class="idref" href="models.LinCCAL.html#E:8"><span class="id" title="variable">E</span></a>) <a class="idref" href="models.LinCCAL.html#m:10"><span class="id" title="variable">m</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.t"><span class="id" title="record">t</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab261"></a><h3 class="section">State-based representations</h3>

<div class="paragraph"> </div>

 More generally, behaviors of this kind can be described by
      transition systems with the same shape as <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.next"><span class="id" title="projection">next</span></a></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="LinCCALBase.Spec.lts" class="idref" href="#LinCCALBase.Spec.lts"><span class="id" title="abbreviation">lts</span></a> <span class="id" title="var">E</span> <span class="id" title="var">A</span> := (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.tid"><span class="id" title="abbreviation">tid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="m:12" class="idref" href="#m:12"><span class="id" title="binder">m</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.outcome"><span class="id" title="inductive">outcome</span></a> <span class="id" title="var">E</span> <span class="id" title="var">A</span> <a class="idref" href="models.LinCCAL.html#m:12"><span class="id" title="variable">m</span></a>).<br/>

<br/>
</div>

<div class="doc">
In fact, <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.next"><span class="id" title="projection">next</span></a></span> constitutes a final coalgebra over specifications,
      meaning that states in any transition system can be mapped to
      specifications with the same behavior. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">CoFixpoint</span> <a id="LinCCALBase.Spec.gen" class="idref" href="#LinCCALBase.Spec.gen"><span class="id" title="definition">gen</span></a> {<a id="E:13" class="idref" href="#E:13"><span class="id" title="binder">E</span></a> <a id="A:14" class="idref" href="#A:14"><span class="id" title="binder">A</span></a>} (<a id="02b0af0daad361079c3c6c4a8ed28287" class="idref" href="#02b0af0daad361079c3c6c4a8ed28287"><span class="id" title="binder">α</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.lts"><span class="id" title="abbreviation">lts</span></a> <a class="idref" href="models.LinCCAL.html#E:13"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#A:14"><span class="id" title="variable">A</span></a>) <a id="x:16" class="idref" href="#x:16"><span class="id" title="binder">x</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.t"><span class="id" title="record">t</span></a> <a class="idref" href="models.LinCCAL.html#E:13"><span class="id" title="variable">E</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.next"><span class="id" title="projection">next</span></a> <a id="t:18" class="idref" href="#t:18"><span class="id" title="binder">t</span></a> <a id="m:19" class="idref" href="#m:19"><span class="id" title="binder">m</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#02b0af0daad361079c3c6c4a8ed28287"><span class="id" title="variable">α</span></a> <a class="idref" href="models.LinCCAL.html#x:16"><span class="id" title="variable">x</span></a> <a class="idref" href="models.LinCCAL.html#t:18"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#m:19"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.bot"><span class="id" title="constructor">bot</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.bot"><span class="id" title="constructor">bot</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.top"><span class="id" title="constructor">top</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.top"><span class="id" title="constructor">top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.ret"><span class="id" title="constructor">ret</span></a> <span class="id" title="var">n</span> <span class="id" title="var">y</span> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.ret"><span class="id" title="constructor">ret</span></a> <span class="id" title="var">n</span> (<a class="idref" href="models.LinCCAL.html#gen:17"><span class="id" title="definition">gen</span></a> <a class="idref" href="models.LinCCAL.html#02b0af0daad361079c3c6c4a8ed28287"><span class="id" title="variable">α</span></a> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> |}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab262"></a><h3 class="section">Tensor product</h3>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Import</span> (<span class="id" title="var">canonicals</span>) <a class="idref" href="models.EffectSignatures.html#Sig.Plus"><span class="id" title="module">Sig.Plus</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALBase.Spec.tens_lts" class="idref" href="#LinCCALBase.Spec.tens_lts"><span class="id" title="definition">tens_lts</span></a> {<a id="E1:20" class="idref" href="#E1:20"><span class="id" title="binder">E1</span></a> <a id="E2:21" class="idref" href="#E2:21"><span class="id" title="binder">E2</span></a>} : <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.lts"><span class="id" title="abbreviation">lts</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.Plus.omap"><span class="id" title="definition">Sig.Plus.omap</span></a> <a class="idref" href="models.LinCCAL.html#E1:20"><span class="id" title="variable">E1</span></a> <a class="idref" href="models.LinCCAL.html#E2:21"><span class="id" title="variable">E2</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.t"><span class="id" title="record">t</span></a> <a class="idref" href="models.LinCCAL.html#E1:20"><span class="id" title="variable">E1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.t"><span class="id" title="record">t</span></a> <a class="idref" href="models.LinCCAL.html#E2:21"><span class="id" title="variable">E2</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="d0cc8ffb472da08f91141220c07a3c85" class="idref" href="#d0cc8ffb472da08f91141220c07a3c85"><span class="id" title="binder">Σ</span></a> <a id="t:23" class="idref" href="#t:23"><span class="id" title="binder">t</span></a> <a id="m:24" class="idref" href="#m:24"><span class="id" title="binder">m</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#m:24"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">m1</span> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.next"><span class="id" title="projection">next</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="models.LinCCAL.html#d0cc8ffb472da08f91141220c07a3c85"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="models.LinCCAL.html#t:23"><span class="id" title="variable">t</span></a> <span class="id" title="var">m1</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.bot"><span class="id" title="constructor">bot</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.bot"><span class="id" title="constructor">bot</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.top"><span class="id" title="constructor">top</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.top"><span class="id" title="constructor">top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.ret"><span class="id" title="constructor">ret</span></a> <span class="id" title="var">n</span> <span class="id" title="var">Σ1</span> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.ret"><span class="id" title="constructor">ret</span></a> (<span class="id" title="var">m</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">m1</span>) <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="models.LinCCAL.html#d0cc8ffb472da08f91141220c07a3c85"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">m2</span> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.next"><span class="id" title="projection">next</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="models.LinCCAL.html#d0cc8ffb472da08f91141220c07a3c85"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="models.LinCCAL.html#t:23"><span class="id" title="variable">t</span></a> <span class="id" title="var">m2</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.bot"><span class="id" title="constructor">bot</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.bot"><span class="id" title="constructor">bot</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.top"><span class="id" title="constructor">top</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.top"><span class="id" title="constructor">top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.ret"><span class="id" title="constructor">ret</span></a> <span class="id" title="var">n</span> <span class="id" title="var">Σ2</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.ret"><span class="id" title="constructor">ret</span></a> (<span class="id" title="var">m</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">m2</span>) <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="models.LinCCAL.html#d0cc8ffb472da08f91141220c07a3c85"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">Σ2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALBase.Spec.tens" class="idref" href="#LinCCALBase.Spec.tens"><span class="id" title="definition">tens</span></a> {<a id="E1:26" class="idref" href="#E1:26"><span class="id" title="binder">E1</span></a> <a id="E2:27" class="idref" href="#E2:27"><span class="id" title="binder">E2</span></a>} (<a id="b40da1c3f6427f4a24b1405dd2716c51" class="idref" href="#b40da1c3f6427f4a24b1405dd2716c51"><span class="id" title="binder">Σ1</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.t"><span class="id" title="record">t</span></a> <a class="idref" href="models.LinCCAL.html#E1:26"><span class="id" title="variable">E1</span></a>) (<a id="8fa297da711a1beec509314948c59a64" class="idref" href="#8fa297da711a1beec509314948c59a64"><span class="id" title="binder">Σ2</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.t"><span class="id" title="record">t</span></a> <a class="idref" href="models.LinCCAL.html#E2:27"><span class="id" title="variable">E2</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.gen"><span class="id" title="definition">gen</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec.tens_lts"><span class="id" title="definition">tens_lts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="models.LinCCAL.html#b40da1c3f6427f4a24b1405dd2716c51"><span class="id" title="variable">Σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="models.LinCCAL.html#8fa297da711a1beec509314948c59a64"><span class="id" title="variable">Σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="models.LinCCAL.html#LinCCALBase.Spec"><span class="id" title="module">Spec</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="LinCCALBase.spec" class="idref" href="#LinCCALBase.spec"><span class="id" title="abbreviation">spec</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALBase.t"><span class="id" title="record">Spec.t</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">spec_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">spec_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">spec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Bind Scope</span> <span class="id" title="var">spec_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">Spec.t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Infix</span> <a id="bea741525cbf7258062ab0c0397d20ee" class="idref" href="#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">&quot;</span></a>×" := <a class="idref" href="models.LinCCAL.html#LinCCALBase.tens"><span class="id" title="definition">Spec.tens</span></a> : <span class="id" title="var">spec_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab263"></a><h2 class="section">Implementation states</h2>

<div class="paragraph"> </div>

 We use regular maps <span class="inlinecode"><span class="id" title="var">Reg.m</span></span> to model implementations of a given
    overlay specification in terms of a given underlay specification.
    A regular map associates with each overlay operation a term of the
    underlay signature, interpreted as a strategy tree or a computation
    in the free monad, in the style of algebraic effect frameworks.

<div class="paragraph"> </div>

    To express correctness, we use the following execution model.
    When a method <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCALBase.ts_op"><span class="id" title="projection">ts_op</span></a></span> is invoked in a particular thread, we use
    the implementation to initialize a computation <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCALBase.ts_prog"><span class="id" title="projection">ts_prog</span></a></span> for that
    thread.  Whenever the thread is scheduled, we use the (linearized,
    atomic) underlay specification to perform the next underlay call
    in the computation. Eventually, the computation will produce a
    result and return from the overlay call.

<div class="paragraph"> </div>

    It remains to compare this behavior to the one prescribed by the
    overlay specification. To prove that the implementation's behavior
    linearizes to the atomic overlay specification, we must show there
    is a way to pick a particular point in time, as a method is being
    executed, when its atomic call and return will be recoded as
    occuring from the point of view of the overlay client. We match
    the call against the overlay specification at that time and keep
    track of the result <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCALBase.ts_res"><span class="id" title="projection">ts_res</span></a></span> that we have committed to. As the
    method's execution proceeds and eventually terminates, we will
    have to show that the actual outcome matches the recorded result.

<div class="paragraph"> </div>

    Concretely, our state will consist of a finite map which will
    associate to each running thread a linearization state of the
    following type. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="LinCCALBase.threadstate" class="idref" href="#LinCCALBase.threadstate"><span class="id" title="record">threadstate</span></a> {<a id="E:30" class="idref" href="#E:30"><span class="id" title="binder">E</span></a> <a id="F:31" class="idref" href="#F:31"><span class="id" title="binder">F</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.t"><span class="id" title="definition">Sig.t</span></a>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.mkts" class="idref" href="#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.ts_op" class="idref" href="#LinCCALBase.ts_op"><span class="id" title="projection">ts_op</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#F:31"><span class="id" title="variable">F</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.ts_prog" class="idref" href="#LinCCALBase.ts_prog"><span class="id" title="projection">ts_prog</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> <a class="idref" href="models.LinCCAL.html#E:30"><span class="id" title="variable">E</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.LinCCAL.html#ts_op:33"><span class="id" title="method">ts_op</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.ts_res" class="idref" href="#LinCCALBase.ts_res"><span class="id" title="projection">ts_res</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.LinCCAL.html#ts_op:33"><span class="id" title="method">ts_op</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCALBase.threadstate"><span class="id" title="record">threadstate</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">F</span>}.<br/>

<br/>
</div>

<div class="doc">
Then the global state consists of a thread state for every
    running thread, an overlay spec and an underlay spec. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="LinCCALBase.state" class="idref" href="#LinCCALBase.state"><span class="id" title="record">state</span></a> {<a id="E:36" class="idref" href="#E:36"><span class="id" title="binder">E</span></a> <a id="F:37" class="idref" href="#F:37"><span class="id" title="binder">F</span></a>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.mkst" class="idref" href="#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.st_spec" class="idref" href="#LinCCALBase.st_spec"><span class="id" title="projection">st_spec</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.spec"><span class="id" title="abbreviation">spec</span></a> <a class="idref" href="models.LinCCAL.html#F:37"><span class="id" title="variable">F</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.st_impl" class="idref" href="#LinCCALBase.st_impl"><span class="id" title="projection">st_impl</span></a> :&gt; <a class="idref" href="models.LinCCAL.html#LinCCALBase.tmap"><span class="id" title="abbreviation">tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.threadstate"><span class="id" title="record">threadstate</span></a> <a class="idref" href="models.LinCCAL.html#E:36"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:37"><span class="id" title="variable">F</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.st_base" class="idref" href="#LinCCALBase.st_base"><span class="id" title="projection">st_base</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.spec"><span class="id" title="abbreviation">spec</span></a> <a class="idref" href="models.LinCCAL.html#E:36"><span class="id" title="variable">E</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCALBase.state"><span class="id" title="record">state</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">F</span>}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab264"></a><h3 class="section">Environment steps</h3>

<div class="paragraph"> </div>

 At any time, the environment may invoke a method on a ready thread,
    or schedule a running thread to execute. A linearization proof
    must be ready to deal with the corresponding effects on the state,
    enumerated below. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALBase.estep" class="idref" href="#LinCCALBase.estep"><span class="id" title="inductive">estep</span></a> {<a id="E:42" class="idref" href="#E:42"><span class="id" title="binder">E</span></a> <a id="F:43" class="idref" href="#F:43"><span class="id" title="binder">F</span></a>} (<a id="M:44" class="idref" href="#M:44"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:42"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:43"><span class="id" title="variable">F</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.state"><span class="id" title="record">state</span></a> <span class="id" title="var">E</span> <span class="id" title="var">F</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.einvoke" class="idref" href="#LinCCALBase.einvoke"><span class="id" title="constructor">einvoke</span></a> <a id="t:47" class="idref" href="#t:47"><span class="id" title="binder">t</span></a> <a id="q:48" class="idref" href="#q:48"><span class="id" title="binder">q</span></a> <a id="f570eeb83f49df461a5c9ba68e6ca6b4" class="idref" href="#f570eeb83f49df461a5c9ba68e6ca6b4"><span class="id" title="binder">Δ</span></a> <a id="s:50" class="idref" href="#s:50"><span class="id" title="binder">s</span></a> <a id="s':51" class="idref" href="#s':51"><span class="id" title="binder">s'</span></a> <a id="2419f67097a80bf54d8cab0e41eb773a" class="idref" href="#2419f67097a80bf54d8cab0e41eb773a"><span class="id" title="binder">Σ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:47"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:50"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:47"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:48"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#M:44"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#q:48"><span class="id" title="variable">q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="models.LinCCAL.html#s:50"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#s':51"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#estep:45"><span class="id" title="inductive">estep</span></a> <a class="idref" href="models.LinCCAL.html#M:44"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#f570eeb83f49df461a5c9ba68e6ca6b4"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s:50"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#2419f67097a80bf54d8cab0e41eb773a"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#f570eeb83f49df461a5c9ba68e6ca6b4"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s':51"><span class="id" title="variable">s'</span></a> <a class="idref" href="models.LinCCAL.html#2419f67097a80bf54d8cab0e41eb773a"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.eaction" class="idref" href="#LinCCALBase.eaction"><span class="id" title="constructor">eaction</span></a> <a id="t:53" class="idref" href="#t:53"><span class="id" title="binder">t</span></a> <a id="q:54" class="idref" href="#q:54"><span class="id" title="binder">q</span></a> <a id="m:55" class="idref" href="#m:55"><span class="id" title="binder">m</span></a> <a id="n:56" class="idref" href="#n:56"><span class="id" title="binder">n</span></a> <a id="k:57" class="idref" href="#k:57"><span class="id" title="binder">k</span></a> <a id="R:58" class="idref" href="#R:58"><span class="id" title="binder">R</span></a> <a id="a34401480b9ee68b7620454cfaad3bdd" class="idref" href="#a34401480b9ee68b7620454cfaad3bdd"><span class="id" title="binder">Δ</span></a> <a id="s:60" class="idref" href="#s:60"><span class="id" title="binder">s</span></a> <a id="77616297ab8389c2db18b8aa996822b8" class="idref" href="#77616297ab8389c2db18b8aa996822b8"><span class="id" title="binder">Σ</span></a> <a id="s':62" class="idref" href="#s':62"><span class="id" title="binder">s'</span></a> <a id="0d3109060c917f4da945dc08580ab411" class="idref" href="#0d3109060c917f4da945dc08580ab411"><span class="id" title="binder">Σ'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:53"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:60"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:54"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:55"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#k:57"><span class="id" title="variable">k</span></a>) <a class="idref" href="models.LinCCAL.html#R:58"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.next"><span class="id" title="projection">Spec.next</span></a> <a class="idref" href="models.LinCCAL.html#77616297ab8389c2db18b8aa996822b8"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#t:53"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#m:55"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.ret"><span class="id" title="constructor">Spec.ret</span></a> <a class="idref" href="models.LinCCAL.html#n:56"><span class="id" title="variable">n</span></a> <a class="idref" href="models.LinCCAL.html#0d3109060c917f4da945dc08580ab411"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:53"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:54"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#k:57"><span class="id" title="variable">k</span></a> <a class="idref" href="models.LinCCAL.html#n:56"><span class="id" title="variable">n</span></a>) <a class="idref" href="models.LinCCAL.html#R:58"><span class="id" title="variable">R</span></a>) <a class="idref" href="models.LinCCAL.html#s:60"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#s':62"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#estep:45"><span class="id" title="inductive">estep</span></a> <a class="idref" href="models.LinCCAL.html#M:44"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#a34401480b9ee68b7620454cfaad3bdd"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s:60"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#77616297ab8389c2db18b8aa996822b8"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#a34401480b9ee68b7620454cfaad3bdd"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s':62"><span class="id" title="variable">s'</span></a> <a class="idref" href="models.LinCCAL.html#0d3109060c917f4da945dc08580ab411"><span class="id" title="variable">Σ'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.ereturn" class="idref" href="#LinCCALBase.ereturn"><span class="id" title="constructor">ereturn</span></a> <a id="t:64" class="idref" href="#t:64"><span class="id" title="binder">t</span></a> <a id="q:65" class="idref" href="#q:65"><span class="id" title="binder">q</span></a> <a id="r:66" class="idref" href="#r:66"><span class="id" title="binder">r</span></a> <a id="7e3627dd3a2403746b83b58e438b6bc7" class="idref" href="#7e3627dd3a2403746b83b58e438b6bc7"><span class="id" title="binder">Δ</span></a> <a id="s:68" class="idref" href="#s:68"><span class="id" title="binder">s</span></a> <a id="s':69" class="idref" href="#s':69"><span class="id" title="binder">s'</span></a> <a id="ac713e2c58df9c0a01be9ad130d8ea1a" class="idref" href="#ac713e2c58df9c0a01be9ad130d8ea1a"><span class="id" title="binder">Σ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:64"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:68"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:65"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#r:66"><span class="id" title="variable">r</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#r:66"><span class="id" title="variable">r</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.remove"><span class="id" title="definition">TMap.remove</span></a> <a class="idref" href="models.LinCCAL.html#t:64"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:68"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#s':69"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#estep:45"><span class="id" title="inductive">estep</span></a> <a class="idref" href="models.LinCCAL.html#M:44"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#7e3627dd3a2403746b83b58e438b6bc7"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s:68"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#ac713e2c58df9c0a01be9ad130d8ea1a"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#7e3627dd3a2403746b83b58e438b6bc7"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s':69"><span class="id" title="variable">s'</span></a> <a class="idref" href="models.LinCCAL.html#ac713e2c58df9c0a01be9ad130d8ea1a"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab265"></a><h3 class="section">Commit steps</h3>

<div class="paragraph"> </div>

 Our job is then to insert commit steps in such a way that by the
    time <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCALBase.ereturn"><span class="id" title="constructor">ereturn</span></a></span> is in play, the invocation has been committed with
    the correct outcome. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALBase.lstep" class="idref" href="#LinCCALBase.lstep"><span class="id" title="inductive">lstep</span></a> {<a id="E:71" class="idref" href="#E:71"><span class="id" title="binder">E</span></a> <a id="F:72" class="idref" href="#F:72"><span class="id" title="binder">F</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.state"><span class="id" title="record">state</span></a> <span class="id" title="var">E</span> <span class="id" title="var">F</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.lcommit" class="idref" href="#LinCCALBase.lcommit"><span class="id" title="constructor">lcommit</span></a> <a id="t:75" class="idref" href="#t:75"><span class="id" title="binder">t</span></a> <a id="q:76" class="idref" href="#q:76"><span class="id" title="binder">q</span></a> <a id="r:77" class="idref" href="#r:77"><span class="id" title="binder">r</span></a> <a id="T:78" class="idref" href="#T:78"><span class="id" title="binder">T</span></a> <a id="70ada6cfa53da45d0d20dee4fc20e60a" class="idref" href="#70ada6cfa53da45d0d20dee4fc20e60a"><span class="id" title="binder">Δ</span></a> <a id="a6a1278f229a5f8d7ae1e88b0513b5a0" class="idref" href="#a6a1278f229a5f8d7ae1e88b0513b5a0"><span class="id" title="binder">Δ'</span></a> <a id="s:81" class="idref" href="#s:81"><span class="id" title="binder">s</span></a> <a id="s':82" class="idref" href="#s':82"><span class="id" title="binder">s'</span></a> <a id="af0c8f8f5ce7afdccb859d2482b046b5" class="idref" href="#af0c8f8f5ce7afdccb859d2482b046b5"><span class="id" title="binder">Σ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:75"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:81"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:76"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:78"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.next"><span class="id" title="projection">Spec.next</span></a> <a class="idref" href="models.LinCCAL.html#70ada6cfa53da45d0d20dee4fc20e60a"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#t:75"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:76"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.ret"><span class="id" title="constructor">Spec.ret</span></a> <a class="idref" href="models.LinCCAL.html#r:77"><span class="id" title="variable">r</span></a> <a class="idref" href="models.LinCCAL.html#a6a1278f229a5f8d7ae1e88b0513b5a0"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:75"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:76"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:78"><span class="id" title="variable">T</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#r:77"><span class="id" title="variable">r</span></a>)) <a class="idref" href="models.LinCCAL.html#s:81"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#s':82"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#lstep:73"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#70ada6cfa53da45d0d20dee4fc20e60a"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s:81"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#af0c8f8f5ce7afdccb859d2482b046b5"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#a6a1278f229a5f8d7ae1e88b0513b5a0"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="models.LinCCAL.html#s':82"><span class="id" title="variable">s'</span></a> <a class="idref" href="models.LinCCAL.html#af0c8f8f5ce7afdccb859d2482b046b5"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
</div>

<div class="doc">
In addition, if it is possible for a commit to trigger an
    undefined behavior in the overlay specification, then any
    implementation behavior would be correct from this point on,
    so we need to relax any further correctness constraints.
    The following predicate identifies states for which
    that is not the case. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALBase.specified" class="idref" href="#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> {<a id="E:84" class="idref" href="#E:84"><span class="id" title="binder">E</span></a> <a id="F:85" class="idref" href="#F:85"><span class="id" title="binder">F</span></a>} (<a id="s:86" class="idref" href="#s:86"><span class="id" title="binder">s</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.state"><span class="id" title="record">state</span></a> <a class="idref" href="models.LinCCAL.html#E:84"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:85"><span class="id" title="variable">F</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="t:87" class="idref" href="#t:87"><span class="id" title="binder">t</span></a> <a id="q:88" class="idref" href="#q:88"><span class="id" title="binder">q</span></a> <a id="T:89" class="idref" href="#T:89"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:87"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:86"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:88"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:89"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.next"><span class="id" title="projection">Spec.next</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.st_spec"><span class="id" title="projection">st_spec</span></a> <a class="idref" href="models.LinCCAL.html#s:86"><span class="id" title="variable">s</span></a>) <a class="idref" href="models.LinCCAL.html#t:87"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:88"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.bot"><span class="id" title="constructor">Spec.bot</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab266"></a><h2 class="section">Correctness</h2>

<div class="paragraph"> </div>

 Based on the constructions above, our ultimate goal is to show
    that no matter what methods are called and how the threads are
    scheduled, there is a way to perform commits such that the
    following invariant is always preserved. That is, every thread
    will eventually produce the result that was matched against the
    overlay specification. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALBase.threadstate_valid" class="idref" href="#LinCCALBase.threadstate_valid"><span class="id" title="definition">threadstate_valid</span></a> {<a id="E:90" class="idref" href="#E:90"><span class="id" title="binder">E</span></a> <a id="F:91" class="idref" href="#F:91"><span class="id" title="binder">F</span></a>} (<a id="e:92" class="idref" href="#e:92"><span class="id" title="binder">e</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.threadstate"><span class="id" title="record">threadstate</span></a> <a class="idref" href="models.LinCCAL.html#E:90"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:91"><span class="id" title="variable">F</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="q:93" class="idref" href="#q:93"><span class="id" title="binder">q</span></a> <a id="r:94" class="idref" href="#r:94"><span class="id" title="binder">r</span></a> <a id="R:95" class="idref" href="#R:95"><span class="id" title="binder">R</span></a>, <a class="idref" href="models.LinCCAL.html#e:92"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:93"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#r:94"><span class="id" title="variable">r</span></a>) <a class="idref" href="models.LinCCAL.html#R:95"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#R:95"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#r:94"><span class="id" title="variable">r</span></a>.<br/>

<br/>
</div>

<div class="doc">
Note that if <span class="inlinecode"><span class="id" title="var">spec_top</span></span> appears in the underlay specification <span class="inlinecode"><span class="id" title="var">Σ</span></span>,
    there will be no corresponding <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCALBase.eaction"><span class="id" title="constructor">eaction</span></a></span> step to take. As a
    result the associated thread will not be scheduled and there are
    no correctness requirements against it at that time. Conversely,
    if <span class="inlinecode"><span class="id" title="var">spec_top</span></span> appears in the overlay specification <span class="inlinecode"><span class="id" title="var">Δ</span></span>, there will
    be no way to commit a result at that point in time. 
<div class="paragraph"> </div>

<a id="lab267"></a><h3 class="section">Rechability predicate</h3>

<div class="paragraph"> </div>

 To formulate this criterion, we will use the following helpful
    definitions and properties. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="LinCCALBase.star" class="idref" href="#LinCCALBase.star"><span class="id" title="abbreviation">star</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Operators.html#clos_refl_trans"><span class="id" title="inductive">clos_refl_trans</span></a> <span class="id" title="var">_</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALBase.reachable" class="idref" href="#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> {<a id="A:96" class="idref" href="#A:96"><span class="id" title="binder">A</span></a>} (<a id="R:97" class="idref" href="#R:97"><span class="id" title="binder">R</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="models.LinCCAL.html#A:96"><span class="id" title="variable">A</span></a>) (<a id="P:98" class="idref" href="#P:98"><span class="id" title="binder">P</span></a> : <a class="idref" href="models.LinCCAL.html#A:96"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="x:99" class="idref" href="#x:99"><span class="id" title="binder">x</span></a> : <a class="idref" href="models.LinCCAL.html#A:96"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="y:100" class="idref" href="#y:100"><span class="id" title="binder">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.star"><span class="id" title="abbreviation">star</span></a> <a class="idref" href="models.LinCCAL.html#R:97"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#x:99"><span class="id" title="variable">x</span></a> <a class="idref" href="models.LinCCAL.html#y:100"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="models.LinCCAL.html#P:98"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#y:100"><span class="id" title="variable">y</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.reachable_base" class="idref" href="#LinCCALBase.reachable_base"><span class="id" title="lemma">reachable_base</span></a> {<a id="A:101" class="idref" href="#A:101"><span class="id" title="binder">A</span></a>} (<a id="R:102" class="idref" href="#R:102"><span class="id" title="binder">R</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="models.LinCCAL.html#A:101"><span class="id" title="variable">A</span></a>) (<a id="P:103" class="idref" href="#P:103"><span class="id" title="binder">P</span></a> : <a class="idref" href="models.LinCCAL.html#A:101"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="x:104" class="idref" href="#x:104"><span class="id" title="binder">x</span></a> : <a class="idref" href="models.LinCCAL.html#A:101"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:103"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#x:104"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#R:102"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#P:103"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#x:104"><span class="id" title="variable">x</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.reachable_step" class="idref" href="#LinCCALBase.reachable_step"><span class="id" title="lemma">reachable_step</span></a> {<a id="A:105" class="idref" href="#A:105"><span class="id" title="binder">A</span></a>} (<a id="R:106" class="idref" href="#R:106"><span class="id" title="binder">R</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="models.LinCCAL.html#A:105"><span class="id" title="variable">A</span></a>) <a id="P:107" class="idref" href="#P:107"><span class="id" title="binder">P</span></a> <a id="x:108" class="idref" href="#x:108"><span class="id" title="binder">x</span></a> <a id="y:109" class="idref" href="#y:109"><span class="id" title="binder">y</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#R:106"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#P:107"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#y:109"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#R:106"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#x:108"><span class="id" title="variable">x</span></a> <a class="idref" href="models.LinCCAL.html#y:109"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#R:106"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#P:107"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#x:108"><span class="id" title="variable">x</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.reachable_steps" class="idref" href="#LinCCALBase.reachable_steps"><span class="id" title="lemma">reachable_steps</span></a> {<a id="A:110" class="idref" href="#A:110"><span class="id" title="binder">A</span></a>} (<a id="R:111" class="idref" href="#R:111"><span class="id" title="binder">R</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="models.LinCCAL.html#A:110"><span class="id" title="variable">A</span></a>) (<a id="P:112" class="idref" href="#P:112"><span class="id" title="binder">P</span></a> : <a class="idref" href="models.LinCCAL.html#A:110"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="x:113" class="idref" href="#x:113"><span class="id" title="binder">x</span></a> <a id="y:114" class="idref" href="#y:114"><span class="id" title="binder">y</span></a> : <a class="idref" href="models.LinCCAL.html#A:110"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#R:111"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#P:112"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#y:114"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.star"><span class="id" title="abbreviation">star</span></a> <a class="idref" href="models.LinCCAL.html#R:111"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#x:113"><span class="id" title="variable">x</span></a> <a class="idref" href="models.LinCCAL.html#y:114"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#R:111"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#P:112"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#x:113"><span class="id" title="variable">x</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.lsteps_ind" class="idref" href="#LinCCALBase.lsteps_ind"><span class="id" title="lemma">lsteps_ind</span></a> {<a id="E:115" class="idref" href="#E:115"><span class="id" title="binder">E</span></a> <a id="F:116" class="idref" href="#F:116"><span class="id" title="binder">F</span></a>} (<a id="P:117" class="idref" href="#P:117"><span class="id" title="binder">P</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.spec"><span class="id" title="abbreviation">spec</span></a> <a class="idref" href="models.LinCCAL.html#F:116"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.spec"><span class="id" title="abbreviation">spec</span></a> <a class="idref" href="models.LinCCAL.html#E:115"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="Q:118" class="idref" href="#Q:118"><span class="id" title="binder">Q</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.state"><span class="id" title="record">state</span></a> <a class="idref" href="models.LinCCAL.html#E:115"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:116"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="16605f1a75f72775fb615d3234c605eb" class="idref" href="#16605f1a75f72775fb615d3234c605eb"><span class="id" title="binder">Δ</span></a> <a id="v:120" class="idref" href="#v:120"><span class="id" title="binder">v</span></a> <a id="22291429b6747bbc3b99ddb1e9a3d90c" class="idref" href="#22291429b6747bbc3b99ddb1e9a3d90c"><span class="id" title="binder">Σ</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#Q:118"><span class="id" title="variable">Q</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#16605f1a75f72775fb615d3234c605eb"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#v:120"><span class="id" title="variable">v</span></a> <a class="idref" href="models.LinCCAL.html#22291429b6747bbc3b99ddb1e9a3d90c"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:117"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#16605f1a75f72775fb615d3234c605eb"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#v:120"><span class="id" title="variable">v</span></a> <a class="idref" href="models.LinCCAL.html#22291429b6747bbc3b99ddb1e9a3d90c"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="t:122" class="idref" href="#t:122"><span class="id" title="binder">t</span></a> <a id="q:123" class="idref" href="#q:123"><span class="id" title="binder">q</span></a> <a id="r:124" class="idref" href="#r:124"><span class="id" title="binder">r</span></a> <a id="T:125" class="idref" href="#T:125"><span class="id" title="binder">T</span></a> <a id="ad60e307443b7d2e474f1a436ce2610b" class="idref" href="#ad60e307443b7d2e474f1a436ce2610b"><span class="id" title="binder">Δ</span></a> <a id="12d294eb2685f9f7ac7554632e77ce29" class="idref" href="#12d294eb2685f9f7ac7554632e77ce29"><span class="id" title="binder">Δ'</span></a> <a id="s:128" class="idref" href="#s:128"><span class="id" title="binder">s</span></a> <a id="15b074cf36512f8adc75ec6a926bd245" class="idref" href="#15b074cf36512f8adc75ec6a926bd245"><span class="id" title="binder">Σ</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:122"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:128"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:123"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:125"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.next"><span class="id" title="projection">Spec.next</span></a> <a class="idref" href="models.LinCCAL.html#ad60e307443b7d2e474f1a436ce2610b"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#t:122"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:123"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.ret"><span class="id" title="constructor">Spec.ret</span></a> <a class="idref" href="models.LinCCAL.html#r:124"><span class="id" title="variable">r</span></a> <a class="idref" href="models.LinCCAL.html#12d294eb2685f9f7ac7554632e77ce29"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:117"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#12d294eb2685f9f7ac7554632e77ce29"><span class="id" title="variable">Δ'</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:122"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:123"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:125"><span class="id" title="variable">T</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#r:124"><span class="id" title="variable">r</span></a>)) <a class="idref" href="models.LinCCAL.html#s:128"><span class="id" title="variable">s</span></a>) <a class="idref" href="models.LinCCAL.html#15b074cf36512f8adc75ec6a926bd245"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:117"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#ad60e307443b7d2e474f1a436ce2610b"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s:128"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#15b074cf36512f8adc75ec6a926bd245"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="b0b73ea6c72ccf2e90c9da6fb1e70fe0" class="idref" href="#b0b73ea6c72ccf2e90c9da6fb1e70fe0"><span class="id" title="binder">Δ</span></a> <a id="v:131" class="idref" href="#v:131"><span class="id" title="binder">v</span></a> <a id="7d336dd4e557e810b25dfc202ccf219e" class="idref" href="#7d336dd4e557e810b25dfc202ccf219e"><span class="id" title="binder">Σ</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.lstep"><span class="id" title="inductive">lstep</span></a> <a class="idref" href="models.LinCCAL.html#Q:118"><span class="id" title="variable">Q</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#b0b73ea6c72ccf2e90c9da6fb1e70fe0"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#v:131"><span class="id" title="variable">v</span></a> <a class="idref" href="models.LinCCAL.html#7d336dd4e557e810b25dfc202ccf219e"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:117"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#b0b73ea6c72ccf2e90c9da6fb1e70fe0"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#v:131"><span class="id" title="variable">v</span></a> <a class="idref" href="models.LinCCAL.html#7d336dd4e557e810b25dfc202ccf219e"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab268"></a><h3 class="section">Coinductive property</h3>

<div class="paragraph"> </div>

 The overall correctness property can be given as follows. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">CoInductive</span> <a id="LinCCALBase.correct" class="idref" href="#LinCCALBase.correct"><span class="id" title="record">correct</span></a> {<a id="E:135" class="idref" href="#E:135"><span class="id" title="binder">E</span></a> <a id="F:136" class="idref" href="#F:136"><span class="id" title="binder">F</span></a>} (<a id="M:137" class="idref" href="#M:137"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:135"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:136"><span class="id" title="variable">F</span></a>) (<a id="s:138" class="idref" href="#s:138"><span class="id" title="binder">s</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.state"><span class="id" title="record">state</span></a> <a class="idref" href="models.LinCCAL.html#E:135"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:136"><span class="id" title="variable">F</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.correct_valid" class="idref" href="#LinCCALBase.correct_valid"><span class="id" title="projection">correct_valid</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> <a class="idref" href="models.LinCCAL.html#s:138"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="i:140" class="idref" href="#i:140"><span class="id" title="binder">i</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCALBase.threadstate_valid"><span class="id" title="definition">threadstate_valid</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:140"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s:138"><span class="id" title="variable">s</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.correct_safe" class="idref" href="#LinCCALBase.correct_safe"><span class="id" title="projection">correct_safe</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> <a class="idref" href="models.LinCCAL.html#s:138"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="i:142" class="idref" href="#i:142"><span class="id" title="binder">i</span></a> <a id="q:143" class="idref" href="#q:143"><span class="id" title="binder">q</span></a> <a id="m:144" class="idref" href="#m:144"><span class="id" title="binder">m</span></a> <a id="k:145" class="idref" href="#k:145"><span class="id" title="binder">k</span></a> <a id="R:146" class="idref" href="#R:146"><span class="id" title="binder">R</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:142"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s:138"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:143"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:144"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#k:145"><span class="id" title="variable">k</span></a>) <a class="idref" href="models.LinCCAL.html#R:146"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.next"><span class="id" title="projection">Spec.next</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.st_base"><span class="id" title="projection">st_base</span></a> <a class="idref" href="models.LinCCAL.html#s:138"><span class="id" title="variable">s</span></a>) <a class="idref" href="models.LinCCAL.html#i:142"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#m:144"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.bot"><span class="id" title="constructor">Spec.bot</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.correct_next" class="idref" href="#LinCCALBase.correct_next"><span class="id" title="projection">correct_next</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> <a class="idref" href="models.LinCCAL.html#s:138"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="s':148" class="idref" href="#s':148"><span class="id" title="binder">s'</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCALBase.estep"><span class="id" title="inductive">estep</span></a> <a class="idref" href="models.LinCCAL.html#M:137"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#s:138"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#s':148"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#correct:139"><span class="id" title="inductive">correct</span></a> <a class="idref" href="models.LinCCAL.html#M:137"><span class="id" title="variable">M</span></a>) <a class="idref" href="models.LinCCAL.html#s':148"><span class="id" title="variable">s'</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALBase.cal" class="idref" href="#LinCCALBase.cal"><span class="id" title="definition">cal</span></a> {<a id="E:150" class="idref" href="#E:150"><span class="id" title="binder">E</span></a> <a id="F:151" class="idref" href="#F:151"><span class="id" title="binder">F</span></a>} <a id="18b3bad72da93e7ecd0c75efd41cf5f3" class="idref" href="#18b3bad72da93e7ecd0c75efd41cf5f3"><span class="id" title="binder">Σ</span></a> (<a id="M:153" class="idref" href="#M:153"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:150"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:151"><span class="id" title="variable">F</span></a>) <a id="9ad2bf8edacaf601040a2452e0a609b6" class="idref" href="#9ad2bf8edacaf601040a2452e0a609b6"><span class="id" title="binder">Δ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#M:153"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#9ad2bf8edacaf601040a2452e0a609b6"><span class="id" title="variable">Δ</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.empty"><span class="id" title="definition">TMap.empty</span></a> <span class="id" title="var">_</span>) <a class="idref" href="models.LinCCAL.html#18b3bad72da93e7ecd0c75efd41cf5f3"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab269"></a><h3 class="section">Proof method</h3>

<div class="paragraph"> </div>

 To establish correctness, it suffices to show that there is
    a correctness invariant with the following properties. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="LinCCALBase.correctness_invariant" class="idref" href="#LinCCALBase.correctness_invariant"><span class="id" title="record">correctness_invariant</span></a> {<a id="E:155" class="idref" href="#E:155"><span class="id" title="binder">E</span></a> <a id="F:156" class="idref" href="#F:156"><span class="id" title="binder">F</span></a>} (<a id="M:157" class="idref" href="#M:157"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:155"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:156"><span class="id" title="variable">F</span></a>) (<a id="P:158" class="idref" href="#P:158"><span class="id" title="binder">P</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.state"><span class="id" title="record">state</span></a> <a class="idref" href="models.LinCCAL.html#E:155"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:156"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.ci_valid" class="idref" href="#LinCCALBase.ci_valid"><span class="id" title="projection">ci_valid</span></a> <a id="s:160" class="idref" href="#s:160"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#s:160"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> <a class="idref" href="models.LinCCAL.html#s:160"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="i:161" class="idref" href="#i:161"><span class="id" title="binder">i</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCALBase.threadstate_valid"><span class="id" title="definition">threadstate_valid</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:161"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s:160"><span class="id" title="variable">s</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.ci_safe" class="idref" href="#LinCCALBase.ci_safe"><span class="id" title="projection">ci_safe</span></a> <a id="s:163" class="idref" href="#s:163"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#s:163"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> <a class="idref" href="models.LinCCAL.html#s:163"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="i:164" class="idref" href="#i:164"><span class="id" title="binder">i</span></a> <a id="q:165" class="idref" href="#q:165"><span class="id" title="binder">q</span></a> <a id="m:166" class="idref" href="#m:166"><span class="id" title="binder">m</span></a> <a id="k:167" class="idref" href="#k:167"><span class="id" title="binder">k</span></a> <a id="R:168" class="idref" href="#R:168"><span class="id" title="binder">R</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:164"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s:163"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:165"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:166"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#k:167"><span class="id" title="variable">k</span></a>) <a class="idref" href="models.LinCCAL.html#R:168"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.next"><span class="id" title="projection">Spec.next</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.st_base"><span class="id" title="projection">st_base</span></a> <a class="idref" href="models.LinCCAL.html#s:163"><span class="id" title="variable">s</span></a>) <a class="idref" href="models.LinCCAL.html#i:164"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#m:166"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.bot"><span class="id" title="constructor">Spec.bot</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.ci_next" class="idref" href="#LinCCALBase.ci_next"><span class="id" title="projection">ci_next</span></a> <a id="s:170" class="idref" href="#s:170"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#s:170"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> <a class="idref" href="models.LinCCAL.html#s:170"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="s':171" class="idref" href="#s':171"><span class="id" title="binder">s'</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCALBase.estep"><span class="id" title="inductive">estep</span></a> <a class="idref" href="models.LinCCAL.html#M:157"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#s:170"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#s':171"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.lstep"><span class="id" title="inductive">lstep</span></a> <a class="idref" href="models.LinCCAL.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#s':171"><span class="id" title="variable">s'</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.correct_ci" class="idref" href="#LinCCALBase.correct_ci"><span class="id" title="lemma">correct_ci</span></a> {<a id="E:173" class="idref" href="#E:173"><span class="id" title="binder">E</span></a> <a id="F:174" class="idref" href="#F:174"><span class="id" title="binder">F</span></a>} (<a id="M:175" class="idref" href="#M:175"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:173"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:174"><span class="id" title="variable">F</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correctness_invariant"><span class="id" title="record">correctness_invariant</span></a> <a class="idref" href="models.LinCCAL.html#M:175"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#M:175"><span class="id" title="variable">M</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.correctness_invariant_sound" class="idref" href="#LinCCALBase.correctness_invariant_sound"><span class="id" title="lemma">correctness_invariant_sound</span></a> {<a id="E:176" class="idref" href="#E:176"><span class="id" title="binder">E</span></a> <a id="F:177" class="idref" href="#F:177"><span class="id" title="binder">F</span></a>} (<a id="M:178" class="idref" href="#M:178"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:176"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:177"><span class="id" title="variable">F</span></a>) <a id="P:179" class="idref" href="#P:179"><span class="id" title="binder">P</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correctness_invariant"><span class="id" title="record">correctness_invariant</span></a> <a class="idref" href="models.LinCCAL.html#M:178"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#P:179"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="s:180" class="idref" href="#s:180"><span class="id" title="binder">s</span></a>, <a class="idref" href="models.LinCCAL.html#P:179"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#s:180"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#M:178"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#s:180"><span class="id" title="variable">s</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab270"></a><h2 class="section">Identity</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALBase.id_linstate" class="idref" href="#LinCCALBase.id_linstate"><span class="id" title="inductive">id_linstate</span></a> {<a id="E:181" class="idref" href="#E:181"><span class="id" title="binder">E</span></a>} : <a class="idref" href="models.LinCCAL.html#LinCCALBase.threadstate"><span class="id" title="record">threadstate</span></a> <span class="id" title="var">E</span> <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.id_invoked" class="idref" href="#LinCCALBase.id_invoked"><span class="id" title="constructor">id_invoked</span></a> <a id="q:184" class="idref" href="#q:184"><span class="id" title="binder">q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#id_linstate:182"><span class="id" title="inductive">id_linstate</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:184"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#q:184"><span class="id" title="variable">q</span></a> <a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.id_returned" class="idref" href="#LinCCALBase.id_returned"><span class="id" title="constructor">id_returned</span></a> <a id="q:185" class="idref" href="#q:185"><span class="id" title="binder">q</span></a> <a id="r:186" class="idref" href="#r:186"><span class="id" title="binder">r</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#id_linstate:182"><span class="id" title="inductive">id_linstate</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:185"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#r:186"><span class="id" title="variable">r</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#r:186"><span class="id" title="variable">r</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALBase.id_state" class="idref" href="#LinCCALBase.id_state"><span class="id" title="inductive">id_state</span></a> {<a id="E:187" class="idref" href="#E:187"><span class="id" title="binder">E</span></a>} : <a class="idref" href="models.LinCCAL.html#LinCCALBase.state"><span class="id" title="record">state</span></a> <span class="id" title="var">E</span> <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.id_state_intro" class="idref" href="#LinCCALBase.id_state_intro"><span class="id" title="constructor">id_state_intro</span></a> <a id="b2a195965d386570a3ea1c826f7e2031" class="idref" href="#b2a195965d386570a3ea1c826f7e2031"><span class="id" title="binder">Σ</span></a> (<a id="u:191" class="idref" href="#u:191"><span class="id" title="binder">u</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.tmap"><span class="id" title="abbreviation">tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.threadstate"><span class="id" title="record">threadstate</span></a> <a class="idref" href="models.LinCCAL.html#E:187"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#E:187"><span class="id" title="variable">E</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="t:192" class="idref" href="#t:192"><span class="id" title="binder">t</span></a> <a id="s:193" class="idref" href="#s:193"><span class="id" title="binder">s</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:192"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#u:191"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#s:193"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.id_linstate"><span class="id" title="inductive">id_linstate</span></a> <a class="idref" href="models.LinCCAL.html#s:193"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#id_state:188"><span class="id" title="inductive">id_state</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#b2a195965d386570a3ea1c826f7e2031"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#u:191"><span class="id" title="variable">u</span></a> <a class="idref" href="models.LinCCAL.html#b2a195965d386570a3ea1c826f7e2031"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.id_state_ci" class="idref" href="#LinCCALBase.id_state_ci"><span class="id" title="lemma">id_state_ci</span></a> <a id="E:194" class="idref" href="#E:194"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correctness_invariant"><span class="id" title="record">correctness_invariant</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.id"><span class="id" title="definition">Reg.id</span></a> <a class="idref" href="models.LinCCAL.html#E:194"><span class="id" title="variable">E</span></a>) <a class="idref" href="models.LinCCAL.html#LinCCALBase.id_state"><span class="id" title="inductive">id_state</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="LinCCALBase.id_cal" class="idref" href="#LinCCALBase.id_cal"><span class="id" title="lemma">id_cal</span></a> {<a id="E:195" class="idref" href="#E:195"><span class="id" title="binder">E</span></a>} (<a id="0d82cc8b7f207b2b18c7ca2bdebdd1ca" class="idref" href="#0d82cc8b7f207b2b18c7ca2bdebdd1ca"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.spec"><span class="id" title="abbreviation">spec</span></a> <a class="idref" href="models.LinCCAL.html#E:195"><span class="id" title="variable">E</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.cal"><span class="id" title="definition">cal</span></a> <a class="idref" href="models.LinCCAL.html#0d82cc8b7f207b2b18c7ca2bdebdd1ca"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.id"><span class="id" title="definition">Reg.id</span></a> <a class="idref" href="models.LinCCAL.html#E:195"><span class="id" title="variable">E</span></a>) <a class="idref" href="models.LinCCAL.html#0d82cc8b7f207b2b18c7ca2bdebdd1ca"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab271"></a><h2 class="section">Vertical composition</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="2d0a6afda4814d43222b1a7260aa507a" class="idref" href="#2d0a6afda4814d43222b1a7260aa507a"><span class="id" title="notation">&quot;</span></a>t &gt;&gt;= f" := (<a class="idref" href="models.EffectSignatures.html#Sig.subst"><span class="id" title="definition">Sig.subst</span></a> <span class="id" title="var">f</span> <span class="id" title="var">t</span>) (<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="c366fea30fc95925e57e8f3c5a90b9e0" class="idref" href="#c366fea30fc95925e57e8f3c5a90b9e0"><span class="id" title="notation">&quot;</span></a>x &lt;- t ; f" := (<span class="id" title="var">t</span> <a class="idref" href="models.LinCCAL.html#2d0a6afda4814d43222b1a7260aa507a"><span class="id" title="notation">&gt;&gt;=</span></a> <span class="id" title="keyword">fun</span> <a id="x:197" class="idref" href="#x:197"><span class="id" title="binder">x</span></a> ⇒ <span class="id" title="var">f</span>) (<span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 60).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="LinCCALBase.COMPOSE" class="idref" href="#LinCCALBase.COMPOSE"><span class="id" title="section">COMPOSE</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="E:198" class="idref" href="#E:198"><span class="id" title="binder">E</span></a> <a id="F:199" class="idref" href="#F:199"><span class="id" title="binder">F</span></a> <a id="G:200" class="idref" href="#G:200"><span class="id" title="binder">G</span></a>} (<a id="M:201" class="idref" href="#M:201"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#F:199"><span class="id" title="variable">F</span></a> <a class="idref" href="models.LinCCAL.html#G:200"><span class="id" title="variable">G</span></a>) (<a id="N:202" class="idref" href="#N:202"><span class="id" title="binder">N</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:198"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:199"><span class="id" title="variable">F</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab272"></a><h3 class="section">Per-thread invariant</h3>

<div class="paragraph"> </div>

 When <span class="inlinecode"><span class="id" title="var">M</span></span> invokes a method <span class="inlinecode"><a class="idref" href="interfaces.Limits.html#D2.m"><span class="id" title="definition">m</span></a></span> of <span class="inlinecode"><a class="idref" href="examples.CAL.html#N"><span class="id" title="axiom">N</span></a></span> with continuation <span class="inlinecode"><span class="id" title="var">k</span></span>,
      we distinguish between two phases:
<ul class="doclist">
<li> before <span class="inlinecode"><a class="idref" href="examples.CAL.html#N"><span class="id" title="axiom">N</span></a></span> commits a result, the action is still pending in <span class="inlinecode"><span class="id" title="var">M</span></span>

</li>
<li> afterwards, <span class="inlinecode"><span class="id" title="var">M</span></span> progresses and is now waiting on the next action
           (or return), which will be carried out after <span class="inlinecode"><a class="idref" href="examples.CAL.html#N"><span class="id" title="axiom">N</span></a></span> actually returns.

</li>
</ul>
      In order to express this, we introduce the following auxiliary
      computation, which computes the current program of <span class="inlinecode"><span class="id" title="var">M</span></span> based on
      the commit state <span class="inlinecode"><a class="idref" href="models.IntStrat.html#VCOMP_NOT_ASSOC.S"><span class="id" title="definition">S</span></a></span> of the <span class="inlinecode"><a class="idref" href="examples.CAL.html#N"><span class="id" title="axiom">N</span></a></span> component. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALBase.pending_program" class="idref" href="#LinCCALBase.pending_program"><span class="id" title="definition">pending_program</span></a> (<a id="q:203" class="idref" href="#q:203"><span class="id" title="binder">q</span></a>: <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.G"><span class="id" title="variable">G</span></a>) <a id="m:204" class="idref" href="#m:204"><span class="id" title="binder">m</span></a> <a id="k:205" class="idref" href="#k:205"><span class="id" title="binder">k</span></a> <a id="S:206" class="idref" href="#S:206"><span class="id" title="binder">S</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.F"><span class="id" title="variable">F</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.LinCCAL.html#q:203"><span class="id" title="variable">q</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#S:206"><span class="id" title="variable">S</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:204"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#k:205"><span class="id" title="variable">k</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">n</span> ⇒ <a class="idref" href="models.LinCCAL.html#k:205"><span class="id" title="variable">k</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The predicate we use to formulate the composition invariant
      will also cover intermediate states where internal execution
      is ongoing. This is the case when a thread has a <span class="inlinecode"><span class="id" title="var">Sig.cons</span></span>
      program in <span class="inlinecode"><span class="id" title="var">M</span></span> while <span class="inlinecode"><a class="idref" href="examples.CAL.html#N"><span class="id" title="axiom">N</span></a></span> is waiting for the next query,
      or when <span class="inlinecode"><a class="idref" href="examples.CAL.html#N"><span class="id" title="axiom">N</span></a></span> has a <span class="inlinecode"><span class="id" title="var">Sig.var</span></span> program. We will use the following
      constructions to manage this. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALBase.comp_phase" class="idref" href="#LinCCALBase.comp_phase"><span class="id" title="inductive">comp_phase</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.comp_ready" class="idref" href="#LinCCALBase.comp_ready"><span class="id" title="constructor">comp_ready</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.comp_running" class="idref" href="#LinCCALBase.comp_running"><span class="id" title="constructor">comp_running</span></a> (<a id="i:210" class="idref" href="#i:210"><span class="id" title="binder">i</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.tid"><span class="id" title="abbreviation">tid</span></a>) (<a id="q:211" class="idref" href="#q:211"><span class="id" title="binder">q</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.G"><span class="id" title="variable">G</span></a>) (<a id="T:212" class="idref" href="#T:212"><span class="id" title="binder">T</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.F"><span class="id" title="variable">F</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.LinCCAL.html#q:211"><span class="id" title="variable">q</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALBase.run_check_l" class="idref" href="#LinCCALBase.run_check_l"><span class="id" title="inductive">run_check_l</span></a> <a id="i:213" class="idref" href="#i:213"><span class="id" title="binder">i</span></a> <a id="q:214" class="idref" href="#q:214"><span class="id" title="binder">q</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.F"><span class="id" title="variable">F</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <span class="id" title="var">q</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_phase"><span class="id" title="inductive">comp_phase</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.run_check_l_cons" class="idref" href="#LinCCALBase.run_check_l_cons"><span class="id" title="constructor">run_check_l_cons</span></a> <a id="m:217" class="idref" href="#m:217"><span class="id" title="binder">m</span></a> <a id="mk:218" class="idref" href="#mk:218"><span class="id" title="binder">mk</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#run_check_l:215"><span class="id" title="inductive">run_check_l</span></a> <a class="idref" href="models.LinCCAL.html#i:213"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:214"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:217"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:218"><span class="id" title="variable">mk</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#i:213"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:214"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:217"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:218"><span class="id" title="variable">mk</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.run_check_l_var" class="idref" href="#LinCCALBase.run_check_l_var"><span class="id" title="constructor">run_check_l_var</span></a> <a id="w:219" class="idref" href="#w:219"><span class="id" title="binder">w</span></a> <a id="r:220" class="idref" href="#r:220"><span class="id" title="binder">r</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#run_check_l:215"><span class="id" title="inductive">run_check_l</span></a> <a class="idref" href="models.LinCCAL.html#i:213"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:214"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#r:220"><span class="id" title="variable">r</span></a>) <a class="idref" href="models.LinCCAL.html#w:219"><span class="id" title="variable">w</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALBase.run_check_r" class="idref" href="#LinCCALBase.run_check_r"><span class="id" title="inductive">run_check_r</span></a> <a id="i:221" class="idref" href="#i:221"><span class="id" title="binder">i</span></a> <a id="q:222" class="idref" href="#q:222"><span class="id" title="binder">q</span></a> <a id="m:223" class="idref" href="#m:223"><span class="id" title="binder">m</span></a> <a id="mk:224" class="idref" href="#mk:224"><span class="id" title="binder">mk</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.E"><span class="id" title="variable">E</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <span class="id" title="var">m</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.run_check_r_cons" class="idref" href="#LinCCALBase.run_check_r_cons"><span class="id" title="constructor">run_check_r_cons</span></a> <a id="u:227" class="idref" href="#u:227"><span class="id" title="binder">u</span></a> <a id="uk:228" class="idref" href="#uk:228"><span class="id" title="binder">uk</span></a> <a id="w:229" class="idref" href="#w:229"><span class="id" title="binder">w</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#run_check_r:225"><span class="id" title="inductive">run_check_r</span></a> <a class="idref" href="models.LinCCAL.html#i:221"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:222"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#m:223"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:224"><span class="id" title="variable">mk</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#u:227"><span class="id" title="variable">u</span></a> <a class="idref" href="models.LinCCAL.html#uk:228"><span class="id" title="variable">uk</span></a>) <a class="idref" href="models.LinCCAL.html#w:229"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.run_check_r_var" class="idref" href="#LinCCALBase.run_check_r_var"><span class="id" title="constructor">run_check_r_var</span></a> <a id="n:230" class="idref" href="#n:230"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#run_check_r:225"><span class="id" title="inductive">run_check_r</span></a> <a class="idref" href="models.LinCCAL.html#i:221"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:222"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#m:223"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:224"><span class="id" title="variable">mk</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#n:230"><span class="id" title="variable">n</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#i:221"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:222"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:223"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:224"><span class="id" title="variable">mk</span></a>)).<br/>

<br/>
</div>

<div class="doc">
The predicate <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a></span> <span class="inlinecode"><span class="id" title="var">i</span></span> <span class="inlinecode"><span class="id" title="var">w</span></span> <span class="inlinecode"><span class="id" title="var">s12</span></span> <span class="inlinecode"><span class="id" title="var">s1</span></span> <span class="inlinecode"><span class="id" title="var">s2</span></span> relates
      the composite state <span class="inlinecode"><span class="id" title="var">s12</span></span> for thread <span class="inlinecode"><span class="id" title="var">i</span></span> with the component
      states <span class="inlinecode"><span class="id" title="var">s1</span></span> and <span class="inlinecode"><span class="id" title="var">s2</span></span>. The parameter <span class="inlinecode"><span class="id" title="var">w</span></span> optionally allows
      a thread to be running, so that unprocessed internal
      interactions could still be present if that thread matches <span class="inlinecode"><span class="id" title="var">i</span></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALBase.comp_threadstate" class="idref" href="#LinCCALBase.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a> <a id="i:231" class="idref" href="#i:231"><span class="id" title="binder">i</span></a> (<a id="w:232" class="idref" href="#w:232"><span class="id" title="binder">w</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_phase"><span class="id" title="inductive">comp_phase</span></a>) : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;thread&nbsp;is&nbsp;currently&nbsp;waiting&nbsp;for&nbsp;the&nbsp;next&nbsp;query.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.cts_ready" class="idref" href="#LinCCALBase.cts_ready"><span class="id" title="constructor">cts_ready</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#comp_threadstate:233"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:231"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#w:232"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Query&nbsp;<span class="inlinecode"><span class="id" title="var">q</span></span>&nbsp;is&nbsp;being&nbsp;executed&nbsp;by&nbsp;<span class="inlinecode"><span class="id" title="var">M</span></span>&nbsp;with&nbsp;the&nbsp;remaning&nbsp;program&nbsp;<span class="inlinecode"><span class="id" title="var">T</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">N</span></span>&nbsp;is&nbsp;not&nbsp;running.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.cts_left" class="idref" href="#LinCCALBase.cts_left"><span class="id" title="constructor">cts_left</span></a> <a id="q:235" class="idref" href="#q:235"><span class="id" title="binder">q</span></a> <a id="T:236" class="idref" href="#T:236"><span class="id" title="binder">T</span></a> <a id="R:237" class="idref" href="#R:237"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.run_check_l"><span class="id" title="inductive">run_check_l</span></a> <a class="idref" href="models.LinCCAL.html#i:231"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:235"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:236"><span class="id" title="variable">T</span></a> <a class="idref" href="models.LinCCAL.html#w:232"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#comp_threadstate:233"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:231"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#w:232"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:235"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.transform"><span class="id" title="definition">Reg.transform</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.N"><span class="id" title="variable">N</span></a> <a class="idref" href="models.LinCCAL.html#T:236"><span class="id" title="variable">T</span></a>) <a class="idref" href="models.LinCCAL.html#R:237"><span class="id" title="variable">R</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:235"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:236"><span class="id" title="variable">T</span></a> <a class="idref" href="models.LinCCAL.html#R:237"><span class="id" title="variable">R</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Query&nbsp;<span class="inlinecode"><span class="id" title="var">q</span></span>&nbsp;is&nbsp;begin&nbsp;executed&nbsp;by&nbsp;<span class="inlinecode"><span class="id" title="var">M</span></span>,&nbsp;which&nbsp;has&nbsp;invoked&nbsp;<span class="inlinecode"><span class="id" title="var">N</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;query&nbsp;<span class="inlinecode"><span class="id" title="var">m</span></span>.&nbsp;Once&nbsp;the&nbsp;remaining&nbsp;program&nbsp;<span class="inlinecode"><span class="id" title="var">U</span></span>&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">N</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;a&nbsp;result&nbsp;<span class="inlinecode"><span class="id" title="var">n</span></span>,&nbsp;the&nbsp;execution&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">M</span></span>&nbsp;is&nbsp;resumed<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;according&nbsp;to&nbsp;<span class="inlinecode"><span class="id" title="var">mk</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.cts_right" class="idref" href="#LinCCALBase.cts_right"><span class="id" title="constructor">cts_right</span></a> <a id="q:238" class="idref" href="#q:238"><span class="id" title="binder">q</span></a> <a id="m:239" class="idref" href="#m:239"><span class="id" title="binder">m</span></a> <a id="U:240" class="idref" href="#U:240"><span class="id" title="binder">U</span></a> <a id="Q:241" class="idref" href="#Q:241"><span class="id" title="binder">Q</span></a> <a id="mk:242" class="idref" href="#mk:242"><span class="id" title="binder">mk</span></a> <a id="R:243" class="idref" href="#R:243"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.run_check_r"><span class="id" title="inductive">run_check_r</span></a> <a class="idref" href="models.LinCCAL.html#i:231"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:238"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#m:239"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:242"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#U:240"><span class="id" title="variable">U</span></a> <a class="idref" href="models.LinCCAL.html#w:232"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#comp_threadstate:233"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:231"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#w:232"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:238"><span class="id" title="variable">q</span></a> (<a id="n:244" class="idref" href="#n:244"><span class="id" title="binder">n</span></a> <a class="idref" href="models.LinCCAL.html#c366fea30fc95925e57e8f3c5a90b9e0"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="models.LinCCAL.html#U:240"><span class="id" title="variable">U</span></a><a class="idref" href="models.LinCCAL.html#c366fea30fc95925e57e8f3c5a90b9e0"><span class="id" title="notation">;</span></a> <a class="idref" href="models.EffectSignatures.html#Reg.transform"><span class="id" title="definition">Reg.transform</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.N"><span class="id" title="variable">N</span></a> (<a class="idref" href="models.LinCCAL.html#mk:242"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#n:244"><span class="id" title="variable">n</span></a>)) <a class="idref" href="models.LinCCAL.html#R:243"><span class="id" title="variable">R</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:238"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.pending_program"><span class="id" title="definition">pending_program</span></a> <a class="idref" href="models.LinCCAL.html#q:238"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#m:239"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:242"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#Q:241"><span class="id" title="variable">Q</span></a>) <a class="idref" href="models.LinCCAL.html#R:243"><span class="id" title="variable">R</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:239"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#U:240"><span class="id" title="variable">U</span></a> <a class="idref" href="models.LinCCAL.html#Q:241"><span class="id" title="variable">Q</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_threadstate_valid" class="idref" href="#LinCCALBase.comp_threadstate_valid"><span class="id" title="lemma">comp_threadstate_valid</span></a> <a id="i:245" class="idref" href="#i:245"><span class="id" title="binder">i</span></a> <a id="e12:246" class="idref" href="#e12:246"><span class="id" title="binder">e12</span></a> <a id="e1:247" class="idref" href="#e1:247"><span class="id" title="binder">e1</span></a> <a id="e2:248" class="idref" href="#e2:248"><span class="id" title="binder">e2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:245"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_ready"><span class="id" title="constructor">comp_ready</span></a> <a class="idref" href="models.LinCCAL.html#e12:246"><span class="id" title="variable">e12</span></a> <a class="idref" href="models.LinCCAL.html#e1:247"><span class="id" title="variable">e1</span></a> <a class="idref" href="models.LinCCAL.html#e2:248"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.threadstate_valid"><span class="id" title="definition">threadstate_valid</span></a> <a class="idref" href="models.LinCCAL.html#e1:247"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.threadstate_valid"><span class="id" title="definition">threadstate_valid</span></a> <a class="idref" href="models.LinCCAL.html#e2:248"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.threadstate_valid"><span class="id" title="definition">threadstate_valid</span></a> <a class="idref" href="models.LinCCAL.html#e12:246"><span class="id" title="variable">e12</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_threadstate_o" class="idref" href="#LinCCALBase.comp_threadstate_o"><span class="id" title="lemma">comp_threadstate_o</span></a> <a id="i:249" class="idref" href="#i:249"><span class="id" title="binder">i</span></a> <a id="j:250" class="idref" href="#j:250"><span class="id" title="binder">j</span></a> <a id="q:251" class="idref" href="#q:251"><span class="id" title="binder">q</span></a> <a id="T:252" class="idref" href="#T:252"><span class="id" title="binder">T</span></a> <a id="w:253" class="idref" href="#w:253"><span class="id" title="binder">w</span></a> <a id="s12:254" class="idref" href="#s12:254"><span class="id" title="binder">s12</span></a> <a id="s1:255" class="idref" href="#s1:255"><span class="id" title="binder">s1</span></a> <a id="s2:256" class="idref" href="#s2:256"><span class="id" title="binder">s2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:249"><span class="id" title="variable">i</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#j:250"><span class="id" title="variable">j</span></a> <a class="idref" href="models.LinCCAL.html#q:251"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:252"><span class="id" title="variable">T</span></a>) <a class="idref" href="models.LinCCAL.html#s12:254"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:255"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:256"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#i:249"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="models.LinCCAL.html#j:250"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:249"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#w:253"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:254"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:255"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:256"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab273"></a><h3 class="section">Global state invariant</h3>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALBase.comp_tmap" class="idref" href="#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a id="w:257" class="idref" href="#w:257"><span class="id" title="binder">w</span></a> (<a id="s12:258" class="idref" href="#s12:258"><span class="id" title="binder">s12</span></a> <a id="s1:259" class="idref" href="#s1:259"><span class="id" title="binder">s1</span></a> <a id="s2:260" class="idref" href="#s2:260"><span class="id" title="binder">s2</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.tmap"><span class="id" title="abbreviation">tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.threadstate"><span class="id" title="record">threadstate</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="i:261" class="idref" href="#i:261"><span class="id" title="binder">i</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:261"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#w:257"><span class="id" title="variable">w</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:261"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s12:258"><span class="id" title="variable">s12</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:261"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s1:259"><span class="id" title="variable">s1</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:261"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s2:260"><span class="id" title="variable">s2</span></a>).<br/>

<br/>
</div>

<div class="doc">
Basic properties. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_tmap_convert" class="idref" href="#LinCCALBase.comp_tmap_convert"><span class="id" title="lemma">comp_tmap_convert</span></a> <a id="t:262" class="idref" href="#t:262"><span class="id" title="binder">t</span></a> <a id="q:263" class="idref" href="#q:263"><span class="id" title="binder">q</span></a> <a id="T:264" class="idref" href="#T:264"><span class="id" title="binder">T</span></a> <a id="w:265" class="idref" href="#w:265"><span class="id" title="binder">w</span></a> <a id="s12:266" class="idref" href="#s12:266"><span class="id" title="binder">s12</span></a> <a id="s1:267" class="idref" href="#s1:267"><span class="id" title="binder">s1</span></a> <a id="s2:268" class="idref" href="#s2:268"><span class="id" title="binder">s2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:262"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:263"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:264"><span class="id" title="variable">T</span></a>) <a class="idref" href="models.LinCCAL.html#s12:266"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:267"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:268"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#t:262"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#w:265"><span class="id" title="variable">w</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:262"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s12:266"><span class="id" title="variable">s12</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:262"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:267"><span class="id" title="variable">s1</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:262"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:268"><span class="id" title="variable">s2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:265"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:266"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:267"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:268"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_tmap_specified_l" class="idref" href="#LinCCALBase.comp_tmap_specified_l"><span class="id" title="lemma">comp_tmap_specified_l</span></a> <a id="w:269" class="idref" href="#w:269"><span class="id" title="binder">w</span></a> <a id="769ead6a41c1967f32128961a61d7727" class="idref" href="#769ead6a41c1967f32128961a61d7727"><span class="id" title="binder">Δ</span></a> <a id="s1:271" class="idref" href="#s1:271"><span class="id" title="binder">s1</span></a> <a id="6141302fba982f3583951ce191c6fa36" class="idref" href="#6141302fba982f3583951ce191c6fa36"><span class="id" title="binder">Γ</span></a> <a id="s2:273" class="idref" href="#s2:273"><span class="id" title="binder">s2</span></a> <a id="cc664e2ebdb5001557a38eea9d90b077" class="idref" href="#cc664e2ebdb5001557a38eea9d90b077"><span class="id" title="binder">Σ</span></a> <a id="s12:275" class="idref" href="#s12:275"><span class="id" title="binder">s12</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:269"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:275"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:271"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:273"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#769ead6a41c1967f32128961a61d7727"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s12:275"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#cc664e2ebdb5001557a38eea9d90b077"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#769ead6a41c1967f32128961a61d7727"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s1:271"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#6141302fba982f3583951ce191c6fa36"><span class="id" title="variable">Γ</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_tmap_specified_r" class="idref" href="#LinCCALBase.comp_tmap_specified_r"><span class="id" title="lemma">comp_tmap_specified_r</span></a> <a id="w:276" class="idref" href="#w:276"><span class="id" title="binder">w</span></a> <a id="63947471c86ea1c79410e25f2633dc1f" class="idref" href="#63947471c86ea1c79410e25f2633dc1f"><span class="id" title="binder">Δ</span></a> <a id="s1:278" class="idref" href="#s1:278"><span class="id" title="binder">s1</span></a> <a id="d1a1282b755d50bc07dffad75c89a0fd" class="idref" href="#d1a1282b755d50bc07dffad75c89a0fd"><span class="id" title="binder">Γ</span></a> <a id="s2:280" class="idref" href="#s2:280"><span class="id" title="binder">s2</span></a> <a id="814c8bffd75ac79057558b0ba1e67cc7" class="idref" href="#814c8bffd75ac79057558b0ba1e67cc7"><span class="id" title="binder">Σ</span></a> <a id="s12:282" class="idref" href="#s12:282"><span class="id" title="binder">s12</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:276"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:282"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:278"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:280"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.M"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#63947471c86ea1c79410e25f2633dc1f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s1:278"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#d1a1282b755d50bc07dffad75c89a0fd"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#63947471c86ea1c79410e25f2633dc1f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s12:282"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#814c8bffd75ac79057558b0ba1e67cc7"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#d1a1282b755d50bc07dffad75c89a0fd"><span class="id" title="variable">Γ</span></a> <a class="idref" href="models.LinCCAL.html#s2:280"><span class="id" title="variable">s2</span></a> <a class="idref" href="models.LinCCAL.html#814c8bffd75ac79057558b0ba1e67cc7"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
</div>

<div class="doc">
The invariant is preserved by environment steps. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_tmap_invoke_l" class="idref" href="#LinCCALBase.comp_tmap_invoke_l"><span class="id" title="lemma">comp_tmap_invoke_l</span></a> <a id="s12:283" class="idref" href="#s12:283"><span class="id" title="binder">s12</span></a> <a id="s1:284" class="idref" href="#s1:284"><span class="id" title="binder">s1</span></a> <a id="s2:285" class="idref" href="#s2:285"><span class="id" title="binder">s2</span></a> <a id="t:286" class="idref" href="#t:286"><span class="id" title="binder">t</span></a> <a id="q:287" class="idref" href="#q:287"><span class="id" title="binder">q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:286"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:284"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_ready"><span class="id" title="constructor">comp_ready</span></a> <a class="idref" href="models.LinCCAL.html#s12:283"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:284"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:285"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:286"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:287"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.M"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#q:287"><span class="id" title="variable">q</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="models.LinCCAL.html#LinCCALBase.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:286"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:287"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.Op.compose"><span class="id" title="definition">Reg.Op.compose</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.M"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.N"><span class="id" title="variable">N</span></a> <a class="idref" href="models.LinCCAL.html#q:287"><span class="id" title="variable">q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="models.LinCCAL.html#s12:283"><span class="id" title="variable">s12</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="models.LinCCAL.html#LinCCALBase.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:286"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:287"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.M"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#q:287"><span class="id" title="variable">q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="models.LinCCAL.html#s1:284"><span class="id" title="variable">s1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#s2:285"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_tmap_action_l" class="idref" href="#LinCCALBase.comp_tmap_action_l"><span class="id" title="lemma">comp_tmap_action_l</span></a> <a id="w:288" class="idref" href="#w:288"><span class="id" title="binder">w</span></a> <a id="t:289" class="idref" href="#t:289"><span class="id" title="binder">t</span></a> <a id="q:290" class="idref" href="#q:290"><span class="id" title="binder">q</span></a> <a id="m:291" class="idref" href="#m:291"><span class="id" title="binder">m</span></a> <a id="n:292" class="idref" href="#n:292"><span class="id" title="binder">n</span></a> <a id="mk:293" class="idref" href="#mk:293"><span class="id" title="binder">mk</span></a> <a id="U:294" class="idref" href="#U:294"><span class="id" title="binder">U</span></a> <a id="R:295" class="idref" href="#R:295"><span class="id" title="binder">R</span></a> <a id="s12:296" class="idref" href="#s12:296"><span class="id" title="binder">s12</span></a> <a id="s1:297" class="idref" href="#s1:297"><span class="id" title="binder">s1</span></a> <a id="s2:298" class="idref" href="#s2:298"><span class="id" title="binder">s2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:289"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:297"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:290"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:291"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:293"><span class="id" title="variable">mk</span></a>) <a class="idref" href="models.LinCCAL.html#R:295"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:289"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:298"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:291"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#U:294"><span class="id" title="variable">U</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:288"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:296"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:297"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:298"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:288"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:296"><span class="id" title="variable">s12</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:289"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:290"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#mk:293"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#n:292"><span class="id" title="variable">n</span></a>) <a class="idref" href="models.LinCCAL.html#R:295"><span class="id" title="variable">R</span></a>) <a class="idref" href="models.LinCCAL.html#s1:297"><span class="id" title="variable">s1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="models.LinCCAL.html#LinCCALBase.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:289"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:291"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#U:294"><span class="id" title="variable">U</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#n:292"><span class="id" title="variable">n</span></a>)) <a class="idref" href="models.LinCCAL.html#s2:298"><span class="id" title="variable">s2</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_tmap_return_l" class="idref" href="#LinCCALBase.comp_tmap_return_l"><span class="id" title="lemma">comp_tmap_return_l</span></a> <a id="w:299" class="idref" href="#w:299"><span class="id" title="binder">w</span></a> <a id="t:300" class="idref" href="#t:300"><span class="id" title="binder">t</span></a> <a id="q:301" class="idref" href="#q:301"><span class="id" title="binder">q</span></a> <a id="r:302" class="idref" href="#r:302"><span class="id" title="binder">r</span></a> <a id="s12:303" class="idref" href="#s12:303"><span class="id" title="binder">s12</span></a> <a id="s1:304" class="idref" href="#s1:304"><span class="id" title="binder">s1</span></a> <a id="s2:305" class="idref" href="#s2:305"><span class="id" title="binder">s2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:300"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:304"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:301"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#r:302"><span class="id" title="variable">r</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#r:302"><span class="id" title="variable">r</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:300"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:305"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:299"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:303"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:304"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:305"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:299"><span class="id" title="variable">w</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.remove"><span class="id" title="definition">TMap.remove</span></a> <a class="idref" href="models.LinCCAL.html#t:300"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s12:303"><span class="id" title="variable">s12</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.remove"><span class="id" title="definition">TMap.remove</span></a> <a class="idref" href="models.LinCCAL.html#t:300"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:304"><span class="id" title="variable">s1</span></a>) <a class="idref" href="models.LinCCAL.html#s2:305"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_tmap_invoke_r" class="idref" href="#LinCCALBase.comp_tmap_invoke_r"><span class="id" title="lemma">comp_tmap_invoke_r</span></a> <a id="s12:306" class="idref" href="#s12:306"><span class="id" title="binder">s12</span></a> <a id="s1:307" class="idref" href="#s1:307"><span class="id" title="binder">s1</span></a> <a id="s2:308" class="idref" href="#s2:308"><span class="id" title="binder">s2</span></a> <a id="t:309" class="idref" href="#t:309"><span class="id" title="binder">t</span></a> <a id="q:310" class="idref" href="#q:310"><span class="id" title="binder">q</span></a> <a id="m:311" class="idref" href="#m:311"><span class="id" title="binder">m</span></a> <a id="mk:312" class="idref" href="#mk:312"><span class="id" title="binder">mk</span></a> <a id="R:313" class="idref" href="#R:313"><span class="id" title="binder">R</span></a> <a id="w:314" class="idref" href="#w:314"><span class="id" title="binder">w</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:309"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:307"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:310"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:311"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:312"><span class="id" title="variable">mk</span></a>) <a class="idref" href="models.LinCCAL.html#R:313"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:309"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:308"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:314"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:306"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:307"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:308"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:314"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:306"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:307"><span class="id" title="variable">s1</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:309"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:311"><span class="id" title="variable">m</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.N"><span class="id" title="variable">N</span></a> <a class="idref" href="models.LinCCAL.html#m:311"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="models.LinCCAL.html#s2:308"><span class="id" title="variable">s2</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_tmap_action_r" class="idref" href="#LinCCALBase.comp_tmap_action_r"><span class="id" title="lemma">comp_tmap_action_r</span></a> <a id="s12:315" class="idref" href="#s12:315"><span class="id" title="binder">s12</span></a> <a id="s1:316" class="idref" href="#s1:316"><span class="id" title="binder">s1</span></a> <a id="s2:317" class="idref" href="#s2:317"><span class="id" title="binder">s2</span></a> <a id="t:318" class="idref" href="#t:318"><span class="id" title="binder">t</span></a> <a id="q:319" class="idref" href="#q:319"><span class="id" title="binder">q</span></a> <a id="m:320" class="idref" href="#m:320"><span class="id" title="binder">m</span></a> <a id="mk:321" class="idref" href="#mk:321"><span class="id" title="binder">mk</span></a> <a id="u:322" class="idref" href="#u:322"><span class="id" title="binder">u</span></a> <a id="uk:323" class="idref" href="#uk:323"><span class="id" title="binder">uk</span></a> <a id="v:324" class="idref" href="#v:324"><span class="id" title="binder">v</span></a> <a id="R:325" class="idref" href="#R:325"><span class="id" title="binder">R</span></a> <a id="S:326" class="idref" href="#S:326"><span class="id" title="binder">S</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:318"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:316"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:319"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.pending_program"><span class="id" title="definition">pending_program</span></a> <a class="idref" href="models.LinCCAL.html#q:319"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#m:320"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:321"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#S:326"><span class="id" title="variable">S</span></a>) <a class="idref" href="models.LinCCAL.html#R:325"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:318"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:317"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:320"><span class="id" title="variable">m</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#u:322"><span class="id" title="variable">u</span></a> <a class="idref" href="models.LinCCAL.html#uk:323"><span class="id" title="variable">uk</span></a>) <a class="idref" href="models.LinCCAL.html#S:326"><span class="id" title="variable">S</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_ready"><span class="id" title="constructor">comp_ready</span></a> <a class="idref" href="models.LinCCAL.html#s12:315"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:316"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:317"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:318"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:319"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:320"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:321"><span class="id" title="variable">mk</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="models.LinCCAL.html#LinCCALBase.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:318"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:319"><span class="id" title="variable">q</span></a> (<a id="n:327" class="idref" href="#n:327"><span class="id" title="binder">n</span></a> <a class="idref" href="models.LinCCAL.html#c366fea30fc95925e57e8f3c5a90b9e0"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="models.LinCCAL.html#uk:323"><span class="id" title="variable">uk</span></a> <a class="idref" href="models.LinCCAL.html#v:324"><span class="id" title="variable">v</span></a><a class="idref" href="models.LinCCAL.html#c366fea30fc95925e57e8f3c5a90b9e0"><span class="id" title="notation">;</span></a> <a class="idref" href="models.EffectSignatures.html#Reg.transform"><span class="id" title="definition">Reg.transform</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.N"><span class="id" title="variable">N</span></a> (<a class="idref" href="models.LinCCAL.html#mk:321"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#n:327"><span class="id" title="variable">n</span></a>)) <a class="idref" href="models.LinCCAL.html#R:325"><span class="id" title="variable">R</span></a>) <a class="idref" href="models.LinCCAL.html#s12:315"><span class="id" title="variable">s12</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#s1:316"><span class="id" title="variable">s1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="models.LinCCAL.html#LinCCALBase.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:318"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:320"><span class="id" title="variable">m</span></a> (<a class="idref" href="models.LinCCAL.html#uk:323"><span class="id" title="variable">uk</span></a> <a class="idref" href="models.LinCCAL.html#v:324"><span class="id" title="variable">v</span></a>) <a class="idref" href="models.LinCCAL.html#S:326"><span class="id" title="variable">S</span></a>) <a class="idref" href="models.LinCCAL.html#s2:317"><span class="id" title="variable">s2</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_tmap_return_r" class="idref" href="#LinCCALBase.comp_tmap_return_r"><span class="id" title="lemma">comp_tmap_return_r</span></a> <a id="s12:328" class="idref" href="#s12:328"><span class="id" title="binder">s12</span></a> <a id="s1:329" class="idref" href="#s1:329"><span class="id" title="binder">s1</span></a> <a id="s2:330" class="idref" href="#s2:330"><span class="id" title="binder">s2</span></a> <a id="t:331" class="idref" href="#t:331"><span class="id" title="binder">t</span></a> <a id="q:332" class="idref" href="#q:332"><span class="id" title="binder">q</span></a> <a id="m:333" class="idref" href="#m:333"><span class="id" title="binder">m</span></a> <a id="mk:334" class="idref" href="#mk:334"><span class="id" title="binder">mk</span></a> <a id="n:335" class="idref" href="#n:335"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:331"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:330"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:333"><span class="id" title="variable">m</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#n:335"><span class="id" title="variable">n</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#n:335"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:331"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:332"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:333"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:334"><span class="id" title="variable">mk</span></a>)) <a class="idref" href="models.LinCCAL.html#s12:328"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:329"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:330"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:331"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:332"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#mk:334"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#n:335"><span class="id" title="variable">n</span></a>)) <a class="idref" href="models.LinCCAL.html#s12:328"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:329"><span class="id" title="variable">s1</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.remove"><span class="id" title="definition">TMap.remove</span></a> <a class="idref" href="models.LinCCAL.html#t:331"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:330"><span class="id" title="variable">s2</span></a>).<br/>

<br/>
</div>

<div class="doc">
The commit steps triggered by the components likewise
      perserve the invariant, once equivalent commit steps have been
      applied to the composite layer as needed. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_tmap_commit_l" class="idref" href="#LinCCALBase.comp_tmap_commit_l"><span class="id" title="lemma">comp_tmap_commit_l</span></a> <a id="b662171991636daa2c2395eb5402b2b1" class="idref" href="#b662171991636daa2c2395eb5402b2b1"><span class="id" title="binder">Δ</span></a> <a id="s1:337" class="idref" href="#s1:337"><span class="id" title="binder">s1</span></a> <a id="3d29090e089084c9012cf931107a397a" class="idref" href="#3d29090e089084c9012cf931107a397a"><span class="id" title="binder">Γ</span></a> <a id="s2:339" class="idref" href="#s2:339"><span class="id" title="binder">s2</span></a> <a id="75f23cbb2e43fc6dcdac1d76f0872a8d" class="idref" href="#75f23cbb2e43fc6dcdac1d76f0872a8d"><span class="id" title="binder">Σ</span></a> <a id="s12:341" class="idref" href="#s12:341"><span class="id" title="binder">s12</span></a> <a id="p:342" class="idref" href="#p:342"><span class="id" title="binder">p</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.M"><span class="id" title="variable">M</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#b662171991636daa2c2395eb5402b2b1"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s1:337"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#3d29090e089084c9012cf931107a397a"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#p:342"><span class="id" title="variable">p</span></a> <a class="idref" href="models.LinCCAL.html#s12:341"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:337"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:339"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="7fff29f5c3b1a3d155e5de422e069df3" class="idref" href="#7fff29f5c3b1a3d155e5de422e069df3"><span class="id" title="binder">Δ'</span></a> <a id="s12':344" class="idref" href="#s12':344"><span class="id" title="binder">s12'</span></a> <a id="s1':345" class="idref" href="#s1':345"><span class="id" title="binder">s1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.star"><span class="id" title="abbreviation">star</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#b662171991636daa2c2395eb5402b2b1"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s12:341"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#75f23cbb2e43fc6dcdac1d76f0872a8d"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#7fff29f5c3b1a3d155e5de422e069df3"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="models.LinCCAL.html#s12':344"><span class="id" title="variable">s12'</span></a> <a class="idref" href="models.LinCCAL.html#75f23cbb2e43fc6dcdac1d76f0872a8d"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.M"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#7fff29f5c3b1a3d155e5de422e069df3"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="models.LinCCAL.html#s1':345"><span class="id" title="variable">s1'</span></a> <a class="idref" href="models.LinCCAL.html#3d29090e089084c9012cf931107a397a"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#p:342"><span class="id" title="variable">p</span></a> <a class="idref" href="models.LinCCAL.html#s12':344"><span class="id" title="variable">s12'</span></a> <a class="idref" href="models.LinCCAL.html#s1':345"><span class="id" title="variable">s1'</span></a> <a class="idref" href="models.LinCCAL.html#s2:339"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_tmap_commit_r" class="idref" href="#LinCCALBase.comp_tmap_commit_r"><span class="id" title="lemma">comp_tmap_commit_r</span></a> <a id="w:348" class="idref" href="#w:348"><span class="id" title="binder">w</span></a> <a id="5566387e4e7339545dc909d7e4258341" class="idref" href="#5566387e4e7339545dc909d7e4258341"><span class="id" title="binder">Δ</span></a> <a id="s1:350" class="idref" href="#s1:350"><span class="id" title="binder">s1</span></a> <a id="5fe9a45ed0e880b9eb0b14e00dad650b" class="idref" href="#5fe9a45ed0e880b9eb0b14e00dad650b"><span class="id" title="binder">Γ</span></a> <a id="s2:352" class="idref" href="#s2:352"><span class="id" title="binder">s2</span></a> <a id="2b9b5f3cf131387257ec5433bd404055" class="idref" href="#2b9b5f3cf131387257ec5433bd404055"><span class="id" title="binder">Σ</span></a> <a id="s12:354" class="idref" href="#s12:354"><span class="id" title="binder">s12</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.N"><span class="id" title="variable">N</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#5fe9a45ed0e880b9eb0b14e00dad650b"><span class="id" title="variable">Γ</span></a> <a class="idref" href="models.LinCCAL.html#s2:352"><span class="id" title="variable">s2</span></a> <a class="idref" href="models.LinCCAL.html#2b9b5f3cf131387257ec5433bd404055"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.M"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#5566387e4e7339545dc909d7e4258341"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s1:350"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#5fe9a45ed0e880b9eb0b14e00dad650b"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:348"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:354"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:350"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:352"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#5566387e4e7339545dc909d7e4258341"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s12:354"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#2b9b5f3cf131387257ec5433bd404055"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="fc4788006572125d974eccfc11deea39" class="idref" href="#fc4788006572125d974eccfc11deea39"><span class="id" title="binder">Δ'</span></a> <a id="caf98ffe52b923f25d6d22a08a4336ff" class="idref" href="#caf98ffe52b923f25d6d22a08a4336ff"><span class="id" title="binder">Γ'</span></a> <a id="s12':357" class="idref" href="#s12':357"><span class="id" title="binder">s12'</span></a> <a id="s1':358" class="idref" href="#s1':358"><span class="id" title="binder">s1'</span></a> <a id="s2':359" class="idref" href="#s2':359"><span class="id" title="binder">s2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.star"><span class="id" title="abbreviation">star</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#5566387e4e7339545dc909d7e4258341"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s12:354"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#2b9b5f3cf131387257ec5433bd404055"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#fc4788006572125d974eccfc11deea39"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="models.LinCCAL.html#s12':357"><span class="id" title="variable">s12'</span></a> <a class="idref" href="models.LinCCAL.html#2b9b5f3cf131387257ec5433bd404055"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#fc4788006572125d974eccfc11deea39"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="models.LinCCAL.html#s12':357"><span class="id" title="variable">s12'</span></a> <a class="idref" href="models.LinCCAL.html#2b9b5f3cf131387257ec5433bd404055"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.M"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#fc4788006572125d974eccfc11deea39"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="models.LinCCAL.html#s1':358"><span class="id" title="variable">s1'</span></a> <a class="idref" href="models.LinCCAL.html#caf98ffe52b923f25d6d22a08a4336ff"><span class="id" title="variable">Γ'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.N"><span class="id" title="variable">N</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#caf98ffe52b923f25d6d22a08a4336ff"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="models.LinCCAL.html#s2':359"><span class="id" title="variable">s2'</span></a> <a class="idref" href="models.LinCCAL.html#2b9b5f3cf131387257ec5433bd404055"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:348"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12':357"><span class="id" title="variable">s12'</span></a> <a class="idref" href="models.LinCCAL.html#s1':358"><span class="id" title="variable">s1'</span></a> <a class="idref" href="models.LinCCAL.html#s2':359"><span class="id" title="variable">s2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="i:360" class="idref" href="#i:360"><span class="id" title="binder">i</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:360"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s2:352"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:360"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s2':359"><span class="id" title="variable">s2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab274"></a><h3 class="section">Overall invariant</h3>

<div class="paragraph"> </div>

 The overall composition invariant is as follows.
      Essentially, there should be an intemediate specification
      and component states such that each thread satisfies
      <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a></span>, and such that the component are correct with
      respect to the relevant specifications. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALBase.comp_state_def" class="idref" href="#LinCCALBase.comp_state_def"><span class="id" title="inductive">comp_state_def</span></a> <a id="w:363" class="idref" href="#w:363"><span class="id" title="binder">w</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.state"><span class="id" title="record">state</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.E"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.G"><span class="id" title="variable">G</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALBase.comp_state_intro" class="idref" href="#LinCCALBase.comp_state_intro"><span class="id" title="constructor">comp_state_intro</span></a> <a id="4073d2851eaacec7d4d74a5e8e5c3466" class="idref" href="#4073d2851eaacec7d4d74a5e8e5c3466"><span class="id" title="binder">Σ</span></a> <a id="60ae0d3c858d79cb126ad17ae7dde48a" class="idref" href="#60ae0d3c858d79cb126ad17ae7dde48a"><span class="id" title="binder">Γ</span></a> <a id="8030c1ccc68430d781f99676dc89d9ca" class="idref" href="#8030c1ccc68430d781f99676dc89d9ca"><span class="id" title="binder">Δ</span></a> <a id="s12:369" class="idref" href="#s12:369"><span class="id" title="binder">s12</span></a> <a id="s1:370" class="idref" href="#s1:370"><span class="id" title="binder">s1</span></a> <a id="s2:371" class="idref" href="#s2:371"><span class="id" title="binder">s2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:363"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:369"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:370"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:371"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.M"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#8030c1ccc68430d781f99676dc89d9ca"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s1:370"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#60ae0d3c858d79cb126ad17ae7dde48a"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.N"><span class="id" title="variable">N</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#60ae0d3c858d79cb126ad17ae7dde48a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="models.LinCCAL.html#s2:371"><span class="id" title="variable">s2</span></a> <a class="idref" href="models.LinCCAL.html#4073d2851eaacec7d4d74a5e8e5c3466"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#comp_state_def:364"><span class="id" title="inductive">comp_state_def</span></a> <a class="idref" href="models.LinCCAL.html#w:363"><span class="id" title="variable">w</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#8030c1ccc68430d781f99676dc89d9ca"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s12:369"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#4073d2851eaacec7d4d74a5e8e5c3466"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALBase.comp_state" class="idref" href="#LinCCALBase.comp_state"><span class="id" title="definition">comp_state</span></a> <a id="w:372" class="idref" href="#w:372"><span class="id" title="binder">w</span></a> <a id="s:373" class="idref" href="#s:373"><span class="id" title="binder">s</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> <a class="idref" href="models.LinCCAL.html#s:373"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_state_def"><span class="id" title="inductive">comp_state_def</span></a> <a class="idref" href="models.LinCCAL.html#w:372"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s:373"><span class="id" title="variable">s</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_specified_sufficient" class="idref" href="#LinCCALBase.comp_specified_sufficient"><span class="id" title="lemma">comp_specified_sufficient</span></a> <a id="w:374" class="idref" href="#w:374"><span class="id" title="binder">w</span></a> <a id="s:375" class="idref" href="#s:375"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="models.LinCCAL.html#LinCCALBase.specified"><span class="id" title="definition">specified</span></a> <a class="idref" href="models.LinCCAL.html#s:375"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_state"><span class="id" title="definition">comp_state</span></a> <a class="idref" href="models.LinCCAL.html#w:374"><span class="id" title="variable">w</span></a>) <a class="idref" href="models.LinCCAL.html#s:375"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_state"><span class="id" title="definition">comp_state</span></a> <a class="idref" href="models.LinCCAL.html#w:374"><span class="id" title="variable">w</span></a>) <a class="idref" href="models.LinCCAL.html#s:375"><span class="id" title="variable">s</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_run_r" class="idref" href="#LinCCALBase.comp_run_r"><span class="id" title="lemma">comp_run_r</span></a> <a id="t:376" class="idref" href="#t:376"><span class="id" title="binder">t</span></a> <a id="q:377" class="idref" href="#q:377"><span class="id" title="binder">q</span></a> <a id="m:378" class="idref" href="#m:378"><span class="id" title="binder">m</span></a> <a id="mk:379" class="idref" href="#mk:379"><span class="id" title="binder">mk</span></a> <a id="s12:380" class="idref" href="#s12:380"><span class="id" title="binder">s12</span></a> <a id="2d183e30b9e80e1ae02cad836d809920" class="idref" href="#2d183e30b9e80e1ae02cad836d809920"><span class="id" title="binder">Δ</span></a> <a id="s1:382" class="idref" href="#s1:382"><span class="id" title="binder">s1</span></a> <a id="59d80a6ab79a819705a62380b2d0e1e8" class="idref" href="#59d80a6ab79a819705a62380b2d0e1e8"><span class="id" title="binder">Γ</span></a> <a id="s2:384" class="idref" href="#s2:384"><span class="id" title="binder">s2</span></a> <a id="9bf150bc2304a6b87e5b9aeed2ddd501" class="idref" href="#9bf150bc2304a6b87e5b9aeed2ddd501"><span class="id" title="binder">Σ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:376"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:377"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:378"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:379"><span class="id" title="variable">mk</span></a>)) <a class="idref" href="models.LinCCAL.html#s12:380"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:382"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:384"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.M"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#2d183e30b9e80e1ae02cad836d809920"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s1:382"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#59d80a6ab79a819705a62380b2d0e1e8"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.N"><span class="id" title="variable">N</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#59d80a6ab79a819705a62380b2d0e1e8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="models.LinCCAL.html#s2:384"><span class="id" title="variable">s2</span></a> <a class="idref" href="models.LinCCAL.html#9bf150bc2304a6b87e5b9aeed2ddd501"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:376"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:384"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="n:386" class="idref" href="#n:386"><span class="id" title="binder">n</span></a> <a id="s:387" class="idref" href="#s:387"><span class="id" title="binder">s</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_state"><span class="id" title="definition">comp_state</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:376"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:377"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#mk:379"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#n:386"><span class="id" title="variable">n</span></a>)) <a class="idref" href="models.LinCCAL.html#s:387"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_state"><span class="id" title="definition">comp_state</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_ready"><span class="id" title="constructor">comp_ready</span></a>) <a class="idref" href="models.LinCCAL.html#s:387"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_state"><span class="id" title="definition">comp_state</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_ready"><span class="id" title="constructor">comp_ready</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#2d183e30b9e80e1ae02cad836d809920"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s12:380"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#9bf150bc2304a6b87e5b9aeed2ddd501"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_run" class="idref" href="#LinCCALBase.comp_run"><span class="id" title="lemma">comp_run</span></a> <a id="t:388" class="idref" href="#t:388"><span class="id" title="binder">t</span></a> <a id="q:389" class="idref" href="#q:389"><span class="id" title="binder">q</span></a> <a id="T:390" class="idref" href="#T:390"><span class="id" title="binder">T</span></a> <a id="s:391" class="idref" href="#s:391"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_state"><span class="id" title="definition">comp_state</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:388"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:389"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:390"><span class="id" title="variable">T</span></a>) <a class="idref" href="models.LinCCAL.html#s:391"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_state"><span class="id" title="definition">comp_state</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_ready"><span class="id" title="constructor">comp_ready</span></a>) <a class="idref" href="models.LinCCAL.html#s:391"><span class="id" title="variable">s</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.comp_ci" class="idref" href="#LinCCALBase.comp_ci"><span class="id" title="lemma">comp_ci</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.correctness_invariant"><span class="id" title="record">correctness_invariant</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.Op.compose"><span class="id" title="definition">Reg.Op.compose</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.M"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.N"><span class="id" title="variable">N</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_state"><span class="id" title="definition">comp_state</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.comp_ready"><span class="id" title="constructor">comp_ready</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="LinCCALBase.comp_cal" class="idref" href="#LinCCALBase.comp_cal"><span class="id" title="lemma">comp_cal</span></a> <a id="5336b3955ef5f77d8dcc36ea7486cef7" class="idref" href="#5336b3955ef5f77d8dcc36ea7486cef7"><span class="id" title="binder">Σ</span></a> <a id="1619ff5abc63ef4c0bf4d2fc5bf92f7d" class="idref" href="#1619ff5abc63ef4c0bf4d2fc5bf92f7d"><span class="id" title="binder">Γ</span></a> <a id="4ffe074e0470fe50fd9d50211c9fe6b3" class="idref" href="#4ffe074e0470fe50fd9d50211c9fe6b3"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.cal"><span class="id" title="definition">cal</span></a> <a class="idref" href="models.LinCCAL.html#1619ff5abc63ef4c0bf4d2fc5bf92f7d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.M"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#4ffe074e0470fe50fd9d50211c9fe6b3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.cal"><span class="id" title="definition">cal</span></a> <a class="idref" href="models.LinCCAL.html#5336b3955ef5f77d8dcc36ea7486cef7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.N"><span class="id" title="variable">N</span></a> <a class="idref" href="models.LinCCAL.html#1619ff5abc63ef4c0bf4d2fc5bf92f7d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.cal"><span class="id" title="definition">cal</span></a> <a class="idref" href="models.LinCCAL.html#5336b3955ef5f77d8dcc36ea7486cef7"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.Op.compose"><span class="id" title="definition">Reg.Op.compose</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.M"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE.N"><span class="id" title="variable">N</span></a>) <a class="idref" href="models.LinCCAL.html#4ffe074e0470fe50fd9d50211c9fe6b3"><span class="id" title="variable">Δ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="models.LinCCAL.html#LinCCALBase.COMPOSE"><span class="id" title="section">COMPOSE</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab275"></a><h2 class="section">Certified abstraction layers form a category</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="LinCCALBase.layer_interface" class="idref" href="#LinCCALBase.layer_interface"><span class="id" title="record">layer_interface</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.li_sig" class="idref" href="#LinCCALBase.li_sig"><span class="id" title="projection">li_sig</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.t"><span class="id" title="definition">Sig.t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.li_spec" class="idref" href="#LinCCALBase.li_spec"><span class="id" title="projection">li_spec</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.spec"><span class="id" title="abbreviation">spec</span></a> <a class="idref" href="models.LinCCAL.html#li_sig:396"><span class="id" title="method">li_sig</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="LinCCALBase.layer_implementation" class="idref" href="#LinCCALBase.layer_implementation"><span class="id" title="record">layer_implementation</span></a> {<a id="L:398" class="idref" href="#L:398"><span class="id" title="binder">L</span></a> <a id="L':399" class="idref" href="#L':399"><span class="id" title="binder">L'</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.layer_interface"><span class="id" title="record">layer_interface</span></a>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.li_impl" class="idref" href="#LinCCALBase.li_impl"><span class="id" title="projection">li_impl</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.li_sig"><span class="id" title="projection">li_sig</span></a> <a class="idref" href="models.LinCCAL.html#L:398"><span class="id" title="variable">L</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.li_sig"><span class="id" title="projection">li_sig</span></a> <a class="idref" href="models.LinCCAL.html#L':399"><span class="id" title="variable">L'</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALBase.li_correct" class="idref" href="#LinCCALBase.li_correct"><span class="id" title="projection">li_correct</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.cal"><span class="id" title="definition">cal</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.li_spec"><span class="id" title="projection">li_spec</span></a> <a class="idref" href="models.LinCCAL.html#L:398"><span class="id" title="variable">L</span></a>) <a class="idref" href="models.LinCCAL.html#li_impl:401"><span class="id" title="method">li_impl</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.li_spec"><span class="id" title="projection">li_spec</span></a> <a class="idref" href="models.LinCCAL.html#L':399"><span class="id" title="variable">L'</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCALBase.layer_implementation"><span class="id" title="record">layer_implementation</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALBase.t" class="idref" href="#LinCCALBase.t"><span class="id" title="definition">t</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="models.LinCCAL.html#LinCCALBase.layer_interface"><span class="id" title="record">layer_interface</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALBase.m" class="idref" href="#LinCCALBase.m"><span class="id" title="definition">m</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.t"><span class="id" title="definition">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.t"><span class="id" title="definition">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> := <a class="idref" href="models.LinCCAL.html#LinCCALBase.layer_implementation"><span class="id" title="record">layer_implementation</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="LinCCALBase.id" class="idref" href="#LinCCALBase.id"><span class="id" title="definition">id</span></a> <a id="L:403" class="idref" href="#L:403"><span class="id" title="binder">L</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L:403"><span class="id" title="variable">L</span></a> <a class="idref" href="models.LinCCAL.html#L:403"><span class="id" title="variable">L</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCALBase.li_impl"><span class="id" title="projection">li_impl</span></a> := <a class="idref" href="models.EffectSignatures.html#Reg.id"><span class="id" title="definition">Reg.id</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.li_sig"><span class="id" title="projection">li_sig</span></a> <a class="idref" href="models.LinCCAL.html#L:403"><span class="id" title="variable">L</span></a>) |}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="LinCCALBase.compose" class="idref" href="#LinCCALBase.compose"><span class="id" title="definition">compose</span></a> {<a id="L1:404" class="idref" href="#L1:404"><span class="id" title="binder">L1</span></a> <a id="L2:405" class="idref" href="#L2:405"><span class="id" title="binder">L2</span></a> <a id="L3:406" class="idref" href="#L3:406"><span class="id" title="binder">L3</span></a>} (<a id="M:407" class="idref" href="#M:407"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L2:405"><span class="id" title="variable">L2</span></a> <a class="idref" href="models.LinCCAL.html#L3:406"><span class="id" title="variable">L3</span></a>) (<a id="N:408" class="idref" href="#N:408"><span class="id" title="binder">N</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L1:404"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#L2:405"><span class="id" title="variable">L2</span></a>) : <a class="idref" href="models.LinCCAL.html#LinCCALBase.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L1:404"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#L3:406"><span class="id" title="variable">L3</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCALBase.li_impl"><span class="id" title="projection">li_impl</span></a> := <a class="idref" href="models.EffectSignatures.html#Reg.Op.compose"><span class="id" title="definition">Reg.Op.compose</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.li_impl"><span class="id" title="projection">li_impl</span></a> <a class="idref" href="models.LinCCAL.html#M:407"><span class="id" title="variable">M</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALBase.li_impl"><span class="id" title="projection">li_impl</span></a> <a class="idref" href="models.LinCCAL.html#N:408"><span class="id" title="variable">N</span></a>) |}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.meq" class="idref" href="#LinCCALBase.meq"><span class="id" title="lemma">meq</span></a> {<a id="L1:409" class="idref" href="#L1:409"><span class="id" title="binder">L1</span></a> <a id="L2:410" class="idref" href="#L2:410"><span class="id" title="binder">L2</span></a>} (<a id="M:411" class="idref" href="#M:411"><span class="id" title="binder">M</span></a> <a id="N:412" class="idref" href="#N:412"><span class="id" title="binder">N</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L1:409"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#L2:410"><span class="id" title="variable">L2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.li_impl"><span class="id" title="projection">li_impl</span></a> <a class="idref" href="models.LinCCAL.html#M:411"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.li_impl"><span class="id" title="projection">li_impl</span></a> <a class="idref" href="models.LinCCAL.html#N:412"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#M:411"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#N:412"><span class="id" title="variable">N</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.compose_id_left" class="idref" href="#LinCCALBase.compose_id_left"><span class="id" title="lemma">compose_id_left</span></a> {<a id="L1:413" class="idref" href="#L1:413"><span class="id" title="binder">L1</span></a> <a id="L2:414" class="idref" href="#L2:414"><span class="id" title="binder">L2</span></a>} (<a id="M:415" class="idref" href="#M:415"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L1:413"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#L2:414"><span class="id" title="variable">L2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.compose"><span class="id" title="definition">compose</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.id"><span class="id" title="definition">id</span></a> <a class="idref" href="models.LinCCAL.html#L2:414"><span class="id" title="variable">L2</span></a>) <a class="idref" href="models.LinCCAL.html#M:415"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#M:415"><span class="id" title="variable">M</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.compose_id_right" class="idref" href="#LinCCALBase.compose_id_right"><span class="id" title="lemma">compose_id_right</span></a> {<a id="L1:416" class="idref" href="#L1:416"><span class="id" title="binder">L1</span></a> <a id="L2:417" class="idref" href="#L2:417"><span class="id" title="binder">L2</span></a>} (<a id="M:418" class="idref" href="#M:418"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALBase.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L1:416"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#L2:417"><span class="id" title="variable">L2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="models.LinCCAL.html#M:418"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.id"><span class="id" title="definition">id</span></a> <a class="idref" href="models.LinCCAL.html#L1:416"><span class="id" title="variable">L1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#M:418"><span class="id" title="variable">M</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALBase.compose_assoc" class="idref" href="#LinCCALBase.compose_assoc"><span class="id" title="lemma">compose_assoc</span></a> {<a id="L1:419" class="idref" href="#L1:419"><span class="id" title="binder">L1</span></a> <a id="L2:420" class="idref" href="#L2:420"><span class="id" title="binder">L2</span></a> <a id="L3:421" class="idref" href="#L3:421"><span class="id" title="binder">L3</span></a> <a id="L4:422" class="idref" href="#L4:422"><span class="id" title="binder">L4</span></a>} (<a id="M12:423" class="idref" href="#M12:423"><span class="id" title="binder">M12</span></a>: <a class="idref" href="models.LinCCAL.html#LinCCALBase.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L1:419"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#L2:420"><span class="id" title="variable">L2</span></a>) (<a id="M23:424" class="idref" href="#M23:424"><span class="id" title="binder">M23</span></a>: <a class="idref" href="models.LinCCAL.html#LinCCALBase.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L2:420"><span class="id" title="variable">L2</span></a> <a class="idref" href="models.LinCCAL.html#L3:421"><span class="id" title="variable">L3</span></a>) (<a id="M34:425" class="idref" href="#M34:425"><span class="id" title="binder">M34</span></a>: <a class="idref" href="models.LinCCAL.html#LinCCALBase.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L3:421"><span class="id" title="variable">L3</span></a> <a class="idref" href="models.LinCCAL.html#L4:422"><span class="id" title="variable">L4</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase.compose"><span class="id" title="definition">compose</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="models.LinCCAL.html#M34:425"><span class="id" title="variable">M34</span></a> <a class="idref" href="models.LinCCAL.html#M23:424"><span class="id" title="variable">M23</span></a>) <a class="idref" href="models.LinCCAL.html#M12:423"><span class="id" title="variable">M12</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALBase.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="models.LinCCAL.html#M34:425"><span class="id" title="variable">M34</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALBase.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="models.LinCCAL.html#M23:424"><span class="id" title="variable">M23</span></a> <a class="idref" href="models.LinCCAL.html#M12:423"><span class="id" title="variable">M12</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <a class="idref" href="interfaces.Category.html#CategoryTheory"><span class="id" title="module">CategoryTheory</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="models.LinCCAL.html#LinCCALBase"><span class="id" title="module">LinCCALBase</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab276"></a><h2 class="section">Horizontal composition</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <a id="LinCCALTensSpec" class="idref" href="#LinCCALTensSpec"><span class="id" title="module">LinCCALTensSpec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <a class="idref" href="models.LinCCAL.html#LinCCALBase"><span class="id" title="module">LinCCALBase</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="models.LinCCAL.html#LinCCALTensSpec"><span class="id" title="module">LinCCALTensSpec</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="LinCCALTens" class="idref" href="#LinCCALTens"><span class="id" title="module">LinCCALTens</span></a> (<span class="id" title="var">B</span> : <a class="idref" href="models.LinCCAL.html#LinCCALTensSpec"><span class="id" title="module">LinCCALTensSpec</span></a>) &lt;: <a class="idref" href="interfaces.MonoidalCategory.html#Monoidal"><span class="id" title="module">Monoidal</span></a> <a class="idref" href="models.LinCCAL.html#B"><span class="id" title="module">B</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> (<span class="id" title="var">notations</span>, <span class="id" title="var">canonicals</span>) <a class="idref" href="models.EffectSignatures.html#Reg.Plus"><span class="id" title="module">Reg.Plus</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="models.LinCCAL.html#B"><span class="id" title="module">B</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">Tactic</span> := <span class="id" title="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a id="LinCCALTens.Tens" class="idref" href="#LinCCALTens.Tens"><span class="id" title="module">Tens</span></a> &lt;: <a class="idref" href="interfaces.MonoidalCategory.html#MonoidalStructure"><span class="id" title="module">MonoidalStructure</span></a> <a class="idref" href="models.LinCCAL.html#B"><span class="id" title="module">B</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab277"></a><h3 class="section">Tensor product of layer interfaces</h3>

<div class="paragraph"> </div>

 Two certified abstraction layers can be composed horizontally
      by taking method implementations as defined in <span class="inlinecode"><span class="id" title="var">Reg.Plus</span></span>. Then
      the specification of the composite layer can be computed by
      independently interleaving the specifications from each side
      per <span class="inlinecode"><span class="id" title="var">Spec.tens</span></span>, as shown below. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALTens.Tens.omap" class="idref" href="#LinCCALTens.Tens.omap"><span class="id" title="definition">omap</span></a> (<a id="L1:426" class="idref" href="#L1:426"><span class="id" title="binder">L1</span></a> <a id="L2:427" class="idref" href="#L2:427"><span class="id" title="binder">L2</span></a> : <a class="idref" href="models.LinCCAL.html#B.t"><span class="id" title="definition">t</span></a>) : <a class="idref" href="models.LinCCAL.html#B.t"><span class="id" title="definition">t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.li_sig"><span class="id" title="projection">li_sig</span></a> := <a class="idref" href="models.EffectSignatures.html#Reg.Plus.omap"><span class="id" title="definition">Reg.Plus.omap</span></a> (<a class="idref" href="models.LinCCAL.html#B.li_sig"><span class="id" title="projection">li_sig</span></a> <a class="idref" href="models.LinCCAL.html#L1:426"><span class="id" title="variable">L1</span></a>) (<a class="idref" href="models.LinCCAL.html#B.li_sig"><span class="id" title="projection">li_sig</span></a> <a class="idref" href="models.LinCCAL.html#L2:427"><span class="id" title="variable">L2</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.li_spec"><span class="id" title="projection">li_spec</span></a> := <a class="idref" href="models.LinCCAL.html#B.li_spec"><span class="id" title="projection">li_spec</span></a> <a class="idref" href="models.LinCCAL.html#L1:426"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#B.li_spec"><span class="id" title="projection">li_spec</span></a> <a class="idref" href="models.LinCCAL.html#L2:427"><span class="id" title="variable">L2</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>

<br/>
</div>

<div class="doc">
<a id="lab278"></a><h3 class="section">Tensor product of layer implementations</h3>

<div class="paragraph"> </div>

 For some reason, <span class="inlinecode"><span class="id" title="tactic">congruence</span></span> and other tactics are buggy when
      faced with those cases. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALTens.Tens.inj_somets2" class="idref" href="#LinCCALTens.Tens.inj_somets2"><span class="id" title="lemma">inj_somets2</span></a> {<a id="E:428" class="idref" href="#E:428"><span class="id" title="binder">E</span></a> <a id="F:429" class="idref" href="#F:429"><span class="id" title="binder">F</span></a>} <a id="q:430" class="idref" href="#q:430"><span class="id" title="binder">q</span></a> <a id="T1:431" class="idref" href="#T1:431"><span class="id" title="binder">T1</span></a> <a id="T2:432" class="idref" href="#T2:432"><span class="id" title="binder">T2</span></a> <a id="R1:433" class="idref" href="#R1:433"><span class="id" title="binder">R1</span></a> <a id="R2:434" class="idref" href="#R2:434"><span class="id" title="binder">R2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (@<a class="idref" href="models.LinCCAL.html#B.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#E:428"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:429"><span class="id" title="variable">F</span></a> <a class="idref" href="models.LinCCAL.html#q:430"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T1:431"><span class="id" title="variable">T1</span></a> <a class="idref" href="models.LinCCAL.html#R1:433"><span class="id" title="variable">R1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (@<a class="idref" href="models.LinCCAL.html#B.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#E:428"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:429"><span class="id" title="variable">F</span></a> <a class="idref" href="models.LinCCAL.html#q:430"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T2:432"><span class="id" title="variable">T2</span></a> <a class="idref" href="models.LinCCAL.html#R2:434"><span class="id" title="variable">R2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#T1:431"><span class="id" title="variable">T1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#T2:432"><span class="id" title="variable">T2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="models.LinCCAL.html#R1:433"><span class="id" title="variable">R1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#R2:434"><span class="id" title="variable">R2</span></a>.<br/>

<br/>
</div>

<div class="doc">
Owing to proof irrelevance, the monoidal structure associated
      with the tensor product of layers can be pulled from <span class="inlinecode"><span class="id" title="var">Reg.Plus</span></span>.
      However, we first need to prove locality and show that
      horizontal composition preserves layer correctness.
      Fortunately, because the two layer act largely independently
      from each other, this is much simpler to establish than the
      vertical composition property used to define <span class="inlinecode"><a class="idref" href="interfaces.Limits.html#D2.compose"><span class="id" title="definition">compose</span></a></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="LinCCALTens.Tens.CORRECTNESS" class="idref" href="#LinCCALTens.Tens.CORRECTNESS"><span class="id" title="section">CORRECTNESS</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="E1:435" class="idref" href="#E1:435"><span class="id" title="binder">E1</span></a> <a id="E2:436" class="idref" href="#E2:436"><span class="id" title="binder">E2</span></a> <a id="F1:437" class="idref" href="#F1:437"><span class="id" title="binder">F1</span></a> <a id="F2:438" class="idref" href="#F2:438"><span class="id" title="binder">F2</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.t"><span class="id" title="definition">Sig.t</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="M1:439" class="idref" href="#M1:439"><span class="id" title="binder">M1</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.F1"><span class="id" title="variable">F1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="M2:440" class="idref" href="#M2:440"><span class="id" title="binder">M2</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.F2"><span class="id" title="variable">F2</span></a>).<br/>

<br/>
</div>

<div class="doc">
Per-thread invariant 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALTens.Tens.fmap_threadstate" class="idref" href="#LinCCALTens.Tens.fmap_threadstate"><span class="id" title="inductive">fmap_threadstate</span></a> : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALTens.Tens.fmap_ts_none" class="idref" href="#LinCCALTens.Tens.fmap_ts_none"><span class="id" title="constructor">fmap_ts_none</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fmap_threadstate:441"><span class="id" title="inductive">fmap_threadstate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALTens.Tens.fmap_ts_left" class="idref" href="#LinCCALTens.Tens.fmap_ts_left"><span class="id" title="constructor">fmap_ts_left</span></a> (<a id="q:443" class="idref" href="#q:443"><span class="id" title="binder">q</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.F1"><span class="id" title="variable">F1</span></a>) (<a id="T:444" class="idref" href="#T:444"><span class="id" title="binder">T</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.E1"><span class="id" title="variable">E1</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.LinCCAL.html#q:443"><span class="id" title="variable">q</span></a>)) <a id="R:445" class="idref" href="#R:445"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fmap_threadstate:441"><span class="id" title="inductive">fmap_threadstate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkts"><span class="id" title="constructor">mkts</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="models.LinCCAL.html#q:443"><span class="id" title="variable">q</span></a>) (<a class="idref" href="models.EffectSignatures.html#Reg.transform"><span class="id" title="definition">Reg.transform</span></a> <a class="idref" href="models.EffectSignatures.html#Reg.Plus.i1"><span class="id" title="definition">Reg.Plus.i1</span></a> <a class="idref" href="models.LinCCAL.html#T:444"><span class="id" title="variable">T</span></a>) <a class="idref" href="models.LinCCAL.html#R:445"><span class="id" title="variable">R</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:443"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:444"><span class="id" title="variable">T</span></a> <a class="idref" href="models.LinCCAL.html#R:445"><span class="id" title="variable">R</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALTens.Tens.fmap_ts_right" class="idref" href="#LinCCALTens.Tens.fmap_ts_right"><span class="id" title="constructor">fmap_ts_right</span></a> (<a id="q:446" class="idref" href="#q:446"><span class="id" title="binder">q</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.F2"><span class="id" title="variable">F2</span></a>) (<a id="T:447" class="idref" href="#T:447"><span class="id" title="binder">T</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.E2"><span class="id" title="variable">E2</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.LinCCAL.html#q:446"><span class="id" title="variable">q</span></a>)) <a id="R:448" class="idref" href="#R:448"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fmap_threadstate:441"><span class="id" title="inductive">fmap_threadstate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkts"><span class="id" title="constructor">mkts</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="models.LinCCAL.html#q:446"><span class="id" title="variable">q</span></a>) (<a class="idref" href="models.EffectSignatures.html#Reg.transform"><span class="id" title="definition">Reg.transform</span></a> <a class="idref" href="models.EffectSignatures.html#Reg.Plus.i2"><span class="id" title="definition">Reg.Plus.i2</span></a> <a class="idref" href="models.LinCCAL.html#T:447"><span class="id" title="variable">T</span></a>) <a class="idref" href="models.LinCCAL.html#R:448"><span class="id" title="variable">R</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:446"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:447"><span class="id" title="variable">T</span></a> <a class="idref" href="models.LinCCAL.html#R:448"><span class="id" title="variable">R</span></a>)).<br/>

<br/>
</div>

<div class="doc">
Thread map invariant 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALTens.Tens.fmap_tmap" class="idref" href="#LinCCALTens.Tens.fmap_tmap"><span class="id" title="definition">fmap_tmap</span></a> (<a id="s12:449" class="idref" href="#s12:449"><span class="id" title="binder">s12</span></a> <a id="s1:450" class="idref" href="#s1:450"><span class="id" title="binder">s1</span></a> <a id="s2:451" class="idref" href="#s2:451"><span class="id" title="binder">s2</span></a> : <a class="idref" href="models.LinCCAL.html#B.tmap"><span class="id" title="abbreviation">tmap</span></a> <span class="id" title="var">_</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="i:452" class="idref" href="#i:452"><span class="id" title="binder">i</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap_threadstate"><span class="id" title="inductive">fmap_threadstate</span></a> (<a class="idref" href="models.LinCCAL.html#B.TMap.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:452"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s12:449"><span class="id" title="variable">s12</span></a>) (<a class="idref" href="models.LinCCAL.html#B.TMap.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:452"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s1:450"><span class="id" title="variable">s1</span></a>) (<a class="idref" href="models.LinCCAL.html#B.TMap.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:452"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s2:451"><span class="id" title="variable">s2</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALTens.Tens.fmap_tmap_specified_l" class="idref" href="#LinCCALTens.Tens.fmap_tmap_specified_l"><span class="id" title="lemma">fmap_tmap_specified_l</span></a> <a id="c346dbef277219d6f1ba1e251f6572d9" class="idref" href="#c346dbef277219d6f1ba1e251f6572d9"><span class="id" title="binder">Σ1</span></a> <a id="80e42fac6143e000d307985644ae122e" class="idref" href="#80e42fac6143e000d307985644ae122e"><span class="id" title="binder">Σ2</span></a> <a id="s12:455" class="idref" href="#s12:455"><span class="id" title="binder">s12</span></a> <a id="s1:456" class="idref" href="#s1:456"><span class="id" title="binder">s1</span></a> <a id="s2:457" class="idref" href="#s2:457"><span class="id" title="binder">s2</span></a> <a id="eed50f75b4feb01befbc59f211fe86ad" class="idref" href="#eed50f75b4feb01befbc59f211fe86ad"><span class="id" title="binder">Δ1</span></a> <a id="f40d61329a4a4f4632f961ad52ccf43c" class="idref" href="#f40d61329a4a4f4632f961ad52ccf43c"><span class="id" title="binder">Δ2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap_tmap"><span class="id" title="definition">fmap_tmap</span></a> <a class="idref" href="models.LinCCAL.html#s12:455"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:456"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:457"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.specified"><span class="id" title="definition">specified</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> (<a class="idref" href="models.LinCCAL.html#c346dbef277219d6f1ba1e251f6572d9"><span class="id" title="variable">Σ1</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#80e42fac6143e000d307985644ae122e"><span class="id" title="variable">Σ2</span></a>) <a class="idref" href="models.LinCCAL.html#s12:455"><span class="id" title="variable">s12</span></a> (<a class="idref" href="models.LinCCAL.html#eed50f75b4feb01befbc59f211fe86ad"><span class="id" title="variable">Δ1</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#f40d61329a4a4f4632f961ad52ccf43c"><span class="id" title="variable">Δ2</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.specified"><span class="id" title="definition">specified</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#c346dbef277219d6f1ba1e251f6572d9"><span class="id" title="variable">Σ1</span></a> <a class="idref" href="models.LinCCAL.html#s1:456"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#eed50f75b4feb01befbc59f211fe86ad"><span class="id" title="variable">Δ1</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALTens.Tens.fmap_tmap_specified_r" class="idref" href="#LinCCALTens.Tens.fmap_tmap_specified_r"><span class="id" title="lemma">fmap_tmap_specified_r</span></a> <a id="0394dc3e25e769756274ec49322ce679" class="idref" href="#0394dc3e25e769756274ec49322ce679"><span class="id" title="binder">Σ1</span></a> <a id="cb890c32c1b7e1180e0a4e9a88759e19" class="idref" href="#cb890c32c1b7e1180e0a4e9a88759e19"><span class="id" title="binder">Σ2</span></a> <a id="s12:462" class="idref" href="#s12:462"><span class="id" title="binder">s12</span></a> <a id="s1:463" class="idref" href="#s1:463"><span class="id" title="binder">s1</span></a> <a id="s2:464" class="idref" href="#s2:464"><span class="id" title="binder">s2</span></a> <a id="c7fdf489f3ce01dbe773bea452ddde59" class="idref" href="#c7fdf489f3ce01dbe773bea452ddde59"><span class="id" title="binder">Δ1</span></a> <a id="0cd4d5b6ddb178fdecb8aa3e5e982813" class="idref" href="#0cd4d5b6ddb178fdecb8aa3e5e982813"><span class="id" title="binder">Δ2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap_tmap"><span class="id" title="definition">fmap_tmap</span></a> <a class="idref" href="models.LinCCAL.html#s12:462"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:463"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:464"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.specified"><span class="id" title="definition">specified</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> (<a class="idref" href="models.LinCCAL.html#0394dc3e25e769756274ec49322ce679"><span class="id" title="variable">Σ1</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#cb890c32c1b7e1180e0a4e9a88759e19"><span class="id" title="variable">Σ2</span></a>) <a class="idref" href="models.LinCCAL.html#s12:462"><span class="id" title="variable">s12</span></a> (<a class="idref" href="models.LinCCAL.html#c7fdf489f3ce01dbe773bea452ddde59"><span class="id" title="variable">Δ1</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#0cd4d5b6ddb178fdecb8aa3e5e982813"><span class="id" title="variable">Δ2</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.specified"><span class="id" title="definition">specified</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#cb890c32c1b7e1180e0a4e9a88759e19"><span class="id" title="variable">Σ2</span></a> <a class="idref" href="models.LinCCAL.html#s2:464"><span class="id" title="variable">s2</span></a> <a class="idref" href="models.LinCCAL.html#0cd4d5b6ddb178fdecb8aa3e5e982813"><span class="id" title="variable">Δ2</span></a>).<br/>

<br/>
</div>

<div class="doc">
Global state invariant 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALTens.Tens.fmap_state" class="idref" href="#LinCCALTens.Tens.fmap_state"><span class="id" title="inductive">fmap_state</span></a> : <a class="idref" href="models.LinCCAL.html#B.state"><span class="id" title="record">state</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALTens.Tens.fmap_state_intro" class="idref" href="#LinCCALTens.Tens.fmap_state_intro"><span class="id" title="constructor">fmap_state_intro</span></a> <a id="s12:469" class="idref" href="#s12:469"><span class="id" title="binder">s12</span></a> <a id="s1:470" class="idref" href="#s1:470"><span class="id" title="binder">s1</span></a> <a id="s2:471" class="idref" href="#s2:471"><span class="id" title="binder">s2</span></a> <a id="7a82cb349f5e85c099db101372d75ae9" class="idref" href="#7a82cb349f5e85c099db101372d75ae9"><span class="id" title="binder">Δ1</span></a> <a id="c50946dca5e524597bf906b20e9c6256" class="idref" href="#c50946dca5e524597bf906b20e9c6256"><span class="id" title="binder">Δ2</span></a> <a id="d9248cab58f2803abb10ccd031d93191" class="idref" href="#d9248cab58f2803abb10ccd031d93191"><span class="id" title="binder">Σ1</span></a> <a id="fa29bf15f14f2a0757e44ba5b9fdc3fb" class="idref" href="#fa29bf15f14f2a0757e44ba5b9fdc3fb"><span class="id" title="binder">Σ2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap_tmap"><span class="id" title="definition">fmap_tmap</span></a> <a class="idref" href="models.LinCCAL.html#s12:469"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:470"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:471"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.M1"><span class="id" title="variable">M1</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#7a82cb349f5e85c099db101372d75ae9"><span class="id" title="variable">Δ1</span></a> <a class="idref" href="models.LinCCAL.html#s1:470"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#d9248cab58f2803abb10ccd031d93191"><span class="id" title="variable">Σ1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.M2"><span class="id" title="variable">M2</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#c50946dca5e524597bf906b20e9c6256"><span class="id" title="variable">Δ2</span></a> <a class="idref" href="models.LinCCAL.html#s2:471"><span class="id" title="variable">s2</span></a> <a class="idref" href="models.LinCCAL.html#fa29bf15f14f2a0757e44ba5b9fdc3fb"><span class="id" title="variable">Σ2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fmap_state:467"><span class="id" title="inductive">fmap_state</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> (<a class="idref" href="models.LinCCAL.html#7a82cb349f5e85c099db101372d75ae9"><span class="id" title="variable">Δ1</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#c50946dca5e524597bf906b20e9c6256"><span class="id" title="variable">Δ2</span></a>) <a class="idref" href="models.LinCCAL.html#s12:469"><span class="id" title="variable">s12</span></a> (<a class="idref" href="models.LinCCAL.html#d9248cab58f2803abb10ccd031d93191"><span class="id" title="variable">Σ1</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#fa29bf15f14f2a0757e44ba5b9fdc3fb"><span class="id" title="variable">Σ2</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALTens.Tens.fmap_lsteps_l" class="idref" href="#LinCCALTens.Tens.fmap_lsteps_l"><span class="id" title="lemma">fmap_lsteps_l</span></a> <a id="s12:476" class="idref" href="#s12:476"><span class="id" title="binder">s12</span></a> <a id="s1:477" class="idref" href="#s1:477"><span class="id" title="binder">s1</span></a> <a id="s2:478" class="idref" href="#s2:478"><span class="id" title="binder">s2</span></a> <a id="3c122749054655e673665eb56954534a" class="idref" href="#3c122749054655e673665eb56954534a"><span class="id" title="binder">Δ1</span></a> <a id="d9f287b70e9f9d46443c36ebc01373b9" class="idref" href="#d9f287b70e9f9d46443c36ebc01373b9"><span class="id" title="binder">Δ2</span></a> <a id="9083f0ee526b1776e589b1aa32968562" class="idref" href="#9083f0ee526b1776e589b1aa32968562"><span class="id" title="binder">Σ1</span></a> <a id="dbc652d1fc54586b9dc0146484d00c9f" class="idref" href="#dbc652d1fc54586b9dc0146484d00c9f"><span class="id" title="binder">Σ2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap_tmap"><span class="id" title="definition">fmap_tmap</span></a> <a class="idref" href="models.LinCCAL.html#s12:476"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:477"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:478"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#B.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#B.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.M1"><span class="id" title="variable">M1</span></a>) (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#3c122749054655e673665eb56954534a"><span class="id" title="variable">Δ1</span></a> <a class="idref" href="models.LinCCAL.html#s1:477"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#9083f0ee526b1776e589b1aa32968562"><span class="id" title="variable">Σ1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.M2"><span class="id" title="variable">M2</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#d9f287b70e9f9d46443c36ebc01373b9"><span class="id" title="variable">Δ2</span></a> <a class="idref" href="models.LinCCAL.html#s2:478"><span class="id" title="variable">s2</span></a> <a class="idref" href="models.LinCCAL.html#dbc652d1fc54586b9dc0146484d00c9f"><span class="id" title="variable">Σ2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#B.lstep"><span class="id" title="inductive">lstep</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap_state"><span class="id" title="inductive">fmap_state</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> (<a class="idref" href="models.LinCCAL.html#3c122749054655e673665eb56954534a"><span class="id" title="variable">Δ1</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#d9f287b70e9f9d46443c36ebc01373b9"><span class="id" title="variable">Δ2</span></a>) <a class="idref" href="models.LinCCAL.html#s12:476"><span class="id" title="variable">s12</span></a> (<a class="idref" href="models.LinCCAL.html#9083f0ee526b1776e589b1aa32968562"><span class="id" title="variable">Σ1</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#dbc652d1fc54586b9dc0146484d00c9f"><span class="id" title="variable">Σ2</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALTens.Tens.fmap_lsteps_r" class="idref" href="#LinCCALTens.Tens.fmap_lsteps_r"><span class="id" title="lemma">fmap_lsteps_r</span></a> <a id="s12:483" class="idref" href="#s12:483"><span class="id" title="binder">s12</span></a> <a id="s1:484" class="idref" href="#s1:484"><span class="id" title="binder">s1</span></a> <a id="s2:485" class="idref" href="#s2:485"><span class="id" title="binder">s2</span></a> <a id="fb1c66b7b4abf75601732c06910f4940" class="idref" href="#fb1c66b7b4abf75601732c06910f4940"><span class="id" title="binder">Δ1</span></a> <a id="d496ba7c444f9e096406bd58dba1a60b" class="idref" href="#d496ba7c444f9e096406bd58dba1a60b"><span class="id" title="binder">Δ2</span></a> <a id="b2edc072805a118f372652a2db3eb28b" class="idref" href="#b2edc072805a118f372652a2db3eb28b"><span class="id" title="binder">Σ1</span></a> <a id="3b0436784fd521cdac377fdf94db9ffc" class="idref" href="#3b0436784fd521cdac377fdf94db9ffc"><span class="id" title="binder">Σ2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap_tmap"><span class="id" title="definition">fmap_tmap</span></a> <a class="idref" href="models.LinCCAL.html#s12:483"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:484"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:485"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.M1"><span class="id" title="variable">M1</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#fb1c66b7b4abf75601732c06910f4940"><span class="id" title="variable">Δ1</span></a> <a class="idref" href="models.LinCCAL.html#s1:484"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#b2edc072805a118f372652a2db3eb28b"><span class="id" title="variable">Σ1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#B.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#B.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.M2"><span class="id" title="variable">M2</span></a>) (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#d496ba7c444f9e096406bd58dba1a60b"><span class="id" title="variable">Δ2</span></a> <a class="idref" href="models.LinCCAL.html#s2:485"><span class="id" title="variable">s2</span></a> <a class="idref" href="models.LinCCAL.html#3b0436784fd521cdac377fdf94db9ffc"><span class="id" title="variable">Σ2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#B.lstep"><span class="id" title="inductive">lstep</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap_state"><span class="id" title="inductive">fmap_state</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> (<a class="idref" href="models.LinCCAL.html#fb1c66b7b4abf75601732c06910f4940"><span class="id" title="variable">Δ1</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#d496ba7c444f9e096406bd58dba1a60b"><span class="id" title="variable">Δ2</span></a>) <a class="idref" href="models.LinCCAL.html#s12:483"><span class="id" title="variable">s12</span></a> (<a class="idref" href="models.LinCCAL.html#b2edc072805a118f372652a2db3eb28b"><span class="id" title="variable">Σ1</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#3b0436784fd521cdac377fdf94db9ffc"><span class="id" title="variable">Σ2</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALTens.Tens.fmap_ci" class="idref" href="#LinCCALTens.Tens.fmap_ci"><span class="id" title="lemma">fmap_ci</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.correctness_invariant"><span class="id" title="record">correctness_invariant</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.Plus.fmap"><span class="id" title="definition">Reg.Plus.fmap</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS.M2"><span class="id" title="variable">M2</span></a>) <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap_state"><span class="id" title="inductive">fmap_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.CORRECTNESS"><span class="id" title="section">CORRECTNESS</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="LinCCALTens.Tens.fmap" class="idref" href="#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> {<a id="L1:490" class="idref" href="#L1:490"><span class="id" title="binder">L1</span></a> <a id="L2:491" class="idref" href="#L2:491"><span class="id" title="binder">L2</span></a> <a id="L1':492" class="idref" href="#L1':492"><span class="id" title="binder">L1'</span></a> <a id="L2':493" class="idref" href="#L2':493"><span class="id" title="binder">L2'</span></a>} (<a id="M1:494" class="idref" href="#M1:494"><span class="id" title="binder">M1</span></a>: <a class="idref" href="models.LinCCAL.html#L1:490"><span class="id" title="variable">L1</span></a><a class="idref" href="interfaces.Category.html#7b8dcc69ad76cb5f4b018ef2f5d2eebb"><span class="id" title="notation">~~&gt;</span></a><a class="idref" href="models.LinCCAL.html#L1':492"><span class="id" title="variable">L1'</span></a>) (<a id="M2:495" class="idref" href="#M2:495"><span class="id" title="binder">M2</span></a>: <a class="idref" href="models.LinCCAL.html#L2:491"><span class="id" title="variable">L2</span></a><a class="idref" href="interfaces.Category.html#7b8dcc69ad76cb5f4b018ef2f5d2eebb"><span class="id" title="notation">~~&gt;</span></a><a class="idref" href="models.LinCCAL.html#L2':493"><span class="id" title="variable">L2'</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#L1:490"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#8db90f942c614d0ef4a83b79462fc670"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#L2:491"><span class="id" title="variable">L2</span></a> <a class="idref" href="interfaces.Category.html#7b8dcc69ad76cb5f4b018ef2f5d2eebb"><span class="id" title="notation">~~&gt;</span></a> <a class="idref" href="models.LinCCAL.html#L1':492"><span class="id" title="variable">L1'</span></a> <a class="idref" href="models.LinCCAL.html#8db90f942c614d0ef4a83b79462fc670"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#L2':493"><span class="id" title="variable">L2'</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#B.li_impl"><span class="id" title="projection">li_impl</span></a> := <a class="idref" href="models.EffectSignatures.html#Reg.Plus.fmap"><span class="id" title="definition">Reg.Plus.fmap</span></a> (<a class="idref" href="models.LinCCAL.html#B.li_impl"><span class="id" title="projection">li_impl</span></a> <a class="idref" href="models.LinCCAL.html#M1:494"><span class="id" title="variable">M1</span></a>) (<a class="idref" href="models.LinCCAL.html#B.li_impl"><span class="id" title="projection">li_impl</span></a> <a class="idref" href="models.LinCCAL.html#M2:495"><span class="id" title="variable">M2</span></a>) |}.<br/>

<br/>

<br/>
</div>

<div class="doc">
<a id="lab279"></a><h3 class="section">Functoriality</h3>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="LinCCALTens.Tens.fmap_id" class="idref" href="#LinCCALTens.Tens.fmap_id"><span class="id" title="lemma">fmap_id</span></a> <a id="E1:496" class="idref" href="#E1:496"><span class="id" title="binder">E1</span></a> <a id="E2:497" class="idref" href="#E2:497"><span class="id" title="binder">E2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> (<a class="idref" href="models.LinCCAL.html#B.id"><span class="id" title="definition">id</span></a> <a class="idref" href="models.LinCCAL.html#E1:496"><span class="id" title="variable">E1</span></a>) (<a class="idref" href="models.LinCCAL.html#B.id"><span class="id" title="definition">id</span></a> <a class="idref" href="models.LinCCAL.html#E2:497"><span class="id" title="variable">E2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#B.id"><span class="id" title="definition">id</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.omap"><span class="id" title="definition">omap</span></a> <a class="idref" href="models.LinCCAL.html#E1:496"><span class="id" title="variable">E1</span></a> <a class="idref" href="models.LinCCAL.html#E2:497"><span class="id" title="variable">E2</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="LinCCALTens.Tens.fmap_compose" class="idref" href="#LinCCALTens.Tens.fmap_compose"><span class="id" title="lemma">fmap_compose</span></a> {<a id="E1:498" class="idref" href="#E1:498"><span class="id" title="binder">E1</span></a> <a id="E2:499" class="idref" href="#E2:499"><span class="id" title="binder">E2</span></a> <a id="F1:500" class="idref" href="#F1:500"><span class="id" title="binder">F1</span></a> <a id="F2:501" class="idref" href="#F2:501"><span class="id" title="binder">F2</span></a> <a id="G1:502" class="idref" href="#G1:502"><span class="id" title="binder">G1</span></a> <a id="G2:503" class="idref" href="#G2:503"><span class="id" title="binder">G2</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="g1:504" class="idref" href="#g1:504"><span class="id" title="binder">g1</span></a>: <a class="idref" href="models.LinCCAL.html#F1:500"><span class="id" title="variable">F1</span></a> <a class="idref" href="interfaces.Category.html#7b8dcc69ad76cb5f4b018ef2f5d2eebb"><span class="id" title="notation">~~&gt;</span></a> <a class="idref" href="models.LinCCAL.html#G1:502"><span class="id" title="variable">G1</span></a>) (<a id="g2:505" class="idref" href="#g2:505"><span class="id" title="binder">g2</span></a>: <a class="idref" href="models.LinCCAL.html#F2:501"><span class="id" title="variable">F2</span></a> <a class="idref" href="interfaces.Category.html#7b8dcc69ad76cb5f4b018ef2f5d2eebb"><span class="id" title="notation">~~&gt;</span></a> <a class="idref" href="models.LinCCAL.html#G2:503"><span class="id" title="variable">G2</span></a>) (<a id="f1:506" class="idref" href="#f1:506"><span class="id" title="binder">f1</span></a>: <a class="idref" href="models.LinCCAL.html#E1:498"><span class="id" title="variable">E1</span></a> <a class="idref" href="interfaces.Category.html#7b8dcc69ad76cb5f4b018ef2f5d2eebb"><span class="id" title="notation">~~&gt;</span></a> <a class="idref" href="models.LinCCAL.html#F1:500"><span class="id" title="variable">F1</span></a>) (<a id="f2:507" class="idref" href="#f2:507"><span class="id" title="binder">f2</span></a>: <a class="idref" href="models.LinCCAL.html#E2:499"><span class="id" title="variable">E2</span></a> <a class="idref" href="interfaces.Category.html#7b8dcc69ad76cb5f4b018ef2f5d2eebb"><span class="id" title="notation">~~&gt;</span></a> <a class="idref" href="models.LinCCAL.html#F2:501"><span class="id" title="variable">F2</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> (<a class="idref" href="models.LinCCAL.html#g1:504"><span class="id" title="variable">g1</span></a> <a class="idref" href="interfaces.Category.html#3e379d1aac3668be9aafbc3d5ab8b888"><span class="id" title="notation">@</span></a> <a class="idref" href="models.LinCCAL.html#f1:506"><span class="id" title="variable">f1</span></a>) (<a class="idref" href="models.LinCCAL.html#g2:505"><span class="id" title="variable">g2</span></a> <a class="idref" href="interfaces.Category.html#3e379d1aac3668be9aafbc3d5ab8b888"><span class="id" title="notation">@</span></a> <a class="idref" href="models.LinCCAL.html#f2:507"><span class="id" title="variable">f2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> <a class="idref" href="models.LinCCAL.html#g1:504"><span class="id" title="variable">g1</span></a> <a class="idref" href="models.LinCCAL.html#g2:505"><span class="id" title="variable">g2</span></a> <a class="idref" href="interfaces.Category.html#3e379d1aac3668be9aafbc3d5ab8b888"><span class="id" title="notation">@</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> <a class="idref" href="models.LinCCAL.html#f1:506"><span class="id" title="variable">f1</span></a> <a class="idref" href="models.LinCCAL.html#f2:507"><span class="id" title="variable">f2</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab280"></a><h3 class="section">Zero layer interface</h3>

<div class="paragraph"> </div>

 The empty spec is used to define the zero layer interface. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALTens.Tens.unit" class="idref" href="#LinCCALTens.Tens.unit"><span class="id" title="definition">unit</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.li_sig"><span class="id" title="projection">li_sig</span></a> := <a class="idref" href="models.EffectSignatures.html#Reg.Plus.unit"><span class="id" title="definition">Reg.Plus.unit</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.li_spec"><span class="id" title="projection">li_spec</span></a> := <a class="idref" href="models.LinCCAL.html#B.Spec.gen"><span class="id" title="definition">Spec.gen</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Empty_set_rect"><span class="id" title="definition">Empty_set_rect</span></a> <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab281"></a><h3 class="section">Structural isomorphisms</h3>

<div class="paragraph"> </div>

 As with <span class="inlinecode"><a class="idref" href="interfaces.FunctorCategory.html#FunctorComposition.fmap"><span class="id" title="definition">fmap</span></a></span>, we must show that the various structural
      isomorphisms constitute correct layer implementations.
      This is tedious but mostly straightforward. In order to
      streamline the process somewhat we define a generic correctness
      invariant induced by a <span class="inlinecode"><span class="id" title="var">Sig.m</span></span>orphism, which generalizes the
      correctness invariant we used for <span class="inlinecode"><span class="id" title="var">LinCCAL.id</span></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="LinCCALTens.Tens.ISO_CORRECTNESS" class="idref" href="#LinCCALTens.Tens.ISO_CORRECTNESS"><span class="id" title="section">ISO_CORRECTNESS</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="E:508" class="idref" href="#E:508"><span class="id" title="binder">E</span></a> <a id="F:509" class="idref" href="#F:509"><span class="id" title="binder">F</span></a>} (<a id="9915fd8427284f766e25eee1eb37e34b" class="idref" href="#9915fd8427284f766e25eee1eb37e34b"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.Op.m"><span class="id" title="definition">Sig.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:508"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:509"><span class="id" title="variable">F</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Import</span> (<span class="id" title="var">notations</span>) <a class="idref" href="models.EffectSignatures.html#Sig"><span class="id" title="module">Sig</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALTens.Tens.iso_threadstate" class="idref" href="#LinCCALTens.Tens.iso_threadstate"><span class="id" title="inductive">iso_threadstate</span></a> : <a class="idref" href="models.LinCCAL.html#B.threadstate"><span class="id" title="record">threadstate</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.ISO_CORRECTNESS.E"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.ISO_CORRECTNESS.F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALTens.Tens.iso_invoked" class="idref" href="#LinCCALTens.Tens.iso_invoked"><span class="id" title="constructor">iso_invoked</span></a> <a id="q:513" class="idref" href="#q:513"><span class="id" title="binder">q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#iso_threadstate:511"><span class="id" title="inductive">iso_threadstate</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:513"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.operator"><span class="id" title="projection">Sig.operator</span></a> (<a class="idref" href="models.LinCCAL.html#d62f7175e08184a1d14edfe2907a4900"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="models.LinCCAL.html#q:513"><span class="id" title="variable">q</span></a>) <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="n:515" class="idref" href="#n:515"><span class="id" title="binder">n</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.operand"><span class="id" title="projection">Sig.operand</span></a> (<a class="idref" href="models.LinCCAL.html#d62f7175e08184a1d14edfe2907a4900"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="models.LinCCAL.html#q:513"><span class="id" title="variable">q</span></a>) <a class="idref" href="models.LinCCAL.html#n:514"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALTens.Tens.iso_returned" class="idref" href="#LinCCALTens.Tens.iso_returned"><span class="id" title="constructor">iso_returned</span></a> <a id="q:516" class="idref" href="#q:516"><span class="id" title="binder">q</span></a> <a id="n:517" class="idref" href="#n:517"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#iso_threadstate:511"><span class="id" title="inductive">iso_threadstate</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:516"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.operand"><span class="id" title="projection">Sig.operand</span></a> (<a class="idref" href="models.LinCCAL.html#d62f7175e08184a1d14edfe2907a4900"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="models.LinCCAL.html#q:516"><span class="id" title="variable">q</span></a>) <a class="idref" href="models.LinCCAL.html#n:517"><span class="id" title="variable">n</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.operand"><span class="id" title="projection">Sig.operand</span></a> (<a class="idref" href="models.LinCCAL.html#d62f7175e08184a1d14edfe2907a4900"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="models.LinCCAL.html#q:516"><span class="id" title="variable">q</span></a>) <a class="idref" href="models.LinCCAL.html#n:517"><span class="id" title="variable">n</span></a>))).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALTens.Tens.iso_tmap" class="idref" href="#LinCCALTens.Tens.iso_tmap"><span class="id" title="definition">iso_tmap</span></a> (<a id="s:518" class="idref" href="#s:518"><span class="id" title="binder">s</span></a> : <a class="idref" href="models.LinCCAL.html#B.tmap"><span class="id" title="abbreviation">tmap</span></a> (<a class="idref" href="models.LinCCAL.html#B.threadstate"><span class="id" title="record">threadstate</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.ISO_CORRECTNESS.E"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.ISO_CORRECTNESS.F"><span class="id" title="variable">F</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="t:519" class="idref" href="#t:519"><span class="id" title="binder">t</span></a> <a id="st:520" class="idref" href="#st:520"><span class="id" title="binder">st</span></a>, <a class="idref" href="models.LinCCAL.html#B.TMap.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:519"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:518"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#st:520"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.iso_threadstate"><span class="id" title="inductive">iso_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#st:520"><span class="id" title="variable">st</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.ISO_CORRECTNESS"><span class="id" title="section">ISO_CORRECTNESS</span></a>.<br/>

<br/>
</div>

<div class="doc">
Unfortunately the overall invariant still must be defined on a
      case-by-case basis, because the way the spec components of the
      parameters are involved varies from one to the next. 
</div>
<div class="code">

<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALTens.Tens.assoc_fw_state" class="idref" href="#LinCCALTens.Tens.assoc_fw_state"><span class="id" title="inductive">assoc_fw_state</span></a> {<a id="E:521" class="idref" href="#E:521"><span class="id" title="binder">E</span></a> <a id="F:522" class="idref" href="#F:522"><span class="id" title="binder">F</span></a> <a id="G:523" class="idref" href="#G:523"><span class="id" title="binder">G</span></a>}: <a class="idref" href="models.LinCCAL.html#B.state"><span class="id" title="record">state</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALTens.Tens.assoc_fw_state_intro" class="idref" href="#LinCCALTens.Tens.assoc_fw_state_intro"><span class="id" title="constructor">assoc_fw_state_intro</span></a> <a id="37860578f9397d3caef1693ff87acfc5" class="idref" href="#37860578f9397d3caef1693ff87acfc5"><span class="id" title="binder">Σ</span></a> <a id="b950899ee1aee1a4c0de3b83259159ea" class="idref" href="#b950899ee1aee1a4c0de3b83259159ea"><span class="id" title="binder">Φ</span></a> <a id="6a5fe061b184fa3a9dedc28f27d1144e" class="idref" href="#6a5fe061b184fa3a9dedc28f27d1144e"><span class="id" title="binder">Γ</span></a> <a id="s:529" class="idref" href="#s:529"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.iso_tmap"><span class="id" title="definition">iso_tmap</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.bw"><span class="id" title="projection">Sig.bw</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.Plus.assoc"><span class="id" title="definition">Sig.Plus.assoc</span></a> <a class="idref" href="models.LinCCAL.html#E:521"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:522"><span class="id" title="variable">F</span></a> <a class="idref" href="models.LinCCAL.html#G:523"><span class="id" title="variable">G</span></a>)) <a class="idref" href="models.LinCCAL.html#s:529"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#assoc_fw_state:524"><span class="id" title="inductive">assoc_fw_state</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> (<a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">(</span></a><a class="idref" href="models.LinCCAL.html#37860578f9397d3caef1693ff87acfc5"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#b950899ee1aee1a4c0de3b83259159ea"><span class="id" title="variable">Φ</span></a><a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">)</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#6a5fe061b184fa3a9dedc28f27d1144e"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="models.LinCCAL.html#s:529"><span class="id" title="variable">s</span></a> (<a class="idref" href="models.LinCCAL.html#37860578f9397d3caef1693ff87acfc5"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">(</span></a><a class="idref" href="models.LinCCAL.html#b950899ee1aee1a4c0de3b83259159ea"><span class="id" title="variable">Φ</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#6a5fe061b184fa3a9dedc28f27d1144e"><span class="id" title="variable">Γ</span></a><a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">)</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALTens.Tens.assoc_bw_state" class="idref" href="#LinCCALTens.Tens.assoc_bw_state"><span class="id" title="inductive">assoc_bw_state</span></a> {<a id="E:530" class="idref" href="#E:530"><span class="id" title="binder">E</span></a> <a id="F:531" class="idref" href="#F:531"><span class="id" title="binder">F</span></a> <a id="G:532" class="idref" href="#G:532"><span class="id" title="binder">G</span></a>}: <a class="idref" href="models.LinCCAL.html#B.state"><span class="id" title="record">state</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALTens.Tens.assoc_bw_state_intro" class="idref" href="#LinCCALTens.Tens.assoc_bw_state_intro"><span class="id" title="constructor">assoc_bw_state_intro</span></a> <a id="8dc10430e2f67ba7c992b40228e3437a" class="idref" href="#8dc10430e2f67ba7c992b40228e3437a"><span class="id" title="binder">Σ</span></a> <a id="3ddfac6306ad3dfce40b1fec56294915" class="idref" href="#3ddfac6306ad3dfce40b1fec56294915"><span class="id" title="binder">Φ</span></a> <a id="273dba93c971cbef0c11ff5d02da0fac" class="idref" href="#273dba93c971cbef0c11ff5d02da0fac"><span class="id" title="binder">Γ</span></a> <a id="s:538" class="idref" href="#s:538"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.iso_tmap"><span class="id" title="definition">iso_tmap</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.fw"><span class="id" title="projection">Sig.fw</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.Plus.assoc"><span class="id" title="definition">Sig.Plus.assoc</span></a> <a class="idref" href="models.LinCCAL.html#E:530"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:531"><span class="id" title="variable">F</span></a> <a class="idref" href="models.LinCCAL.html#G:532"><span class="id" title="variable">G</span></a>)) <a class="idref" href="models.LinCCAL.html#s:538"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#assoc_bw_state:533"><span class="id" title="inductive">assoc_bw_state</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> (<a class="idref" href="models.LinCCAL.html#8dc10430e2f67ba7c992b40228e3437a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">(</span></a><a class="idref" href="models.LinCCAL.html#3ddfac6306ad3dfce40b1fec56294915"><span class="id" title="variable">Φ</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#273dba93c971cbef0c11ff5d02da0fac"><span class="id" title="variable">Γ</span></a><a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">)</span></a>) <a class="idref" href="models.LinCCAL.html#s:538"><span class="id" title="variable">s</span></a> (<a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">(</span></a><a class="idref" href="models.LinCCAL.html#8dc10430e2f67ba7c992b40228e3437a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#3ddfac6306ad3dfce40b1fec56294915"><span class="id" title="variable">Φ</span></a><a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">)</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#273dba93c971cbef0c11ff5d02da0fac"><span class="id" title="variable">Γ</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="LinCCALTens.Tens.assoc" class="idref" href="#LinCCALTens.Tens.assoc"><span class="id" title="definition">assoc</span></a> <a id="L1:539" class="idref" href="#L1:539"><span class="id" title="binder">L1</span></a> <a id="L2:540" class="idref" href="#L2:540"><span class="id" title="binder">L2</span></a> <a id="L3:541" class="idref" href="#L3:541"><span class="id" title="binder">L3</span></a> : <a class="idref" href="models.LinCCAL.html#B.iso"><span class="id" title="record">iso</span></a> (<a class="idref" href="models.LinCCAL.html#L1:539"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#8db90f942c614d0ef4a83b79462fc670"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#8db90f942c614d0ef4a83b79462fc670"><span class="id" title="notation">(</span></a><a class="idref" href="models.LinCCAL.html#L2:540"><span class="id" title="variable">L2</span></a> <a class="idref" href="models.LinCCAL.html#8db90f942c614d0ef4a83b79462fc670"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#L3:541"><span class="id" title="variable">L3</span></a><a class="idref" href="models.LinCCAL.html#8db90f942c614d0ef4a83b79462fc670"><span class="id" title="notation">)</span></a>) (<a class="idref" href="models.LinCCAL.html#8db90f942c614d0ef4a83b79462fc670"><span class="id" title="notation">(</span></a><a class="idref" href="models.LinCCAL.html#L1:539"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#8db90f942c614d0ef4a83b79462fc670"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#L2:540"><span class="id" title="variable">L2</span></a><a class="idref" href="models.LinCCAL.html#8db90f942c614d0ef4a83b79462fc670"><span class="id" title="notation">)</span></a> <a class="idref" href="models.LinCCAL.html#8db90f942c614d0ef4a83b79462fc670"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#L3:541"><span class="id" title="variable">L3</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.fw"><span class="id" title="projection">fw</span></a> := {| <a class="idref" href="models.LinCCAL.html#B.li_impl"><span class="id" title="projection">li_impl</span></a> := <a class="idref" href="models.EffectSignatures.html#Reg.bw"><span class="id" title="projection">Reg.bw</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.Plus.assoc"><span class="id" title="definition">Reg.Plus.assoc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) |};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.bw"><span class="id" title="projection">bw</span></a> := {| <a class="idref" href="models.LinCCAL.html#B.li_impl"><span class="id" title="projection">li_impl</span></a> := <a class="idref" href="models.EffectSignatures.html#Reg.fw"><span class="id" title="projection">Reg.fw</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.Plus.assoc"><span class="id" title="definition">Reg.Plus.assoc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) |};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALTens.Tens.lunit_fw_state" class="idref" href="#LinCCALTens.Tens.lunit_fw_state"><span class="id" title="inductive">lunit_fw_state</span></a> {<a id="E:542" class="idref" href="#E:542"><span class="id" title="binder">E</span></a>}: <a class="idref" href="models.LinCCAL.html#B.state"><span class="id" title="record">state</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALTens.Tens.lunit_fw_state_intro" class="idref" href="#LinCCALTens.Tens.lunit_fw_state_intro"><span class="id" title="constructor">lunit_fw_state_intro</span></a> <a id="744fa20bc3fbc80a2295ad24dd5757e1" class="idref" href="#744fa20bc3fbc80a2295ad24dd5757e1"><span class="id" title="binder">Σ</span></a> <a id="s:546" class="idref" href="#s:546"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.iso_tmap"><span class="id" title="definition">iso_tmap</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.bw"><span class="id" title="projection">Sig.bw</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.Plus.lunit"><span class="id" title="definition">Sig.Plus.lunit</span></a> <a class="idref" href="models.LinCCAL.html#E:542"><span class="id" title="variable">E</span></a>)) <a class="idref" href="models.LinCCAL.html#s:546"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#lunit_fw_state:543"><span class="id" title="inductive">lunit_fw_state</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#744fa20bc3fbc80a2295ad24dd5757e1"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#s:546"><span class="id" title="variable">s</span></a> (<a class="idref" href="models.LinCCAL.html#B.li_spec"><span class="id" title="projection">li_spec</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.unit"><span class="id" title="definition">unit</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#744fa20bc3fbc80a2295ad24dd5757e1"><span class="id" title="variable">Σ</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALTens.Tens.lunit_bw_state" class="idref" href="#LinCCALTens.Tens.lunit_bw_state"><span class="id" title="inductive">lunit_bw_state</span></a> {<a id="E:547" class="idref" href="#E:547"><span class="id" title="binder">E</span></a>}: <a class="idref" href="models.LinCCAL.html#B.state"><span class="id" title="record">state</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALTens.Tens.lunit_bw_state_intro" class="idref" href="#LinCCALTens.Tens.lunit_bw_state_intro"><span class="id" title="constructor">lunit_bw_state_intro</span></a> <a id="391875e84e76cffda0d043a934da15bc" class="idref" href="#391875e84e76cffda0d043a934da15bc"><span class="id" title="binder">Σ</span></a> <a id="s:551" class="idref" href="#s:551"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.iso_tmap"><span class="id" title="definition">iso_tmap</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.fw"><span class="id" title="projection">Sig.fw</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.Plus.lunit"><span class="id" title="definition">Sig.Plus.lunit</span></a> <a class="idref" href="models.LinCCAL.html#E:547"><span class="id" title="variable">E</span></a>)) <a class="idref" href="models.LinCCAL.html#s:551"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#lunit_bw_state:548"><span class="id" title="inductive">lunit_bw_state</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> (<a class="idref" href="models.LinCCAL.html#B.li_spec"><span class="id" title="projection">li_spec</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.unit"><span class="id" title="definition">unit</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#391875e84e76cffda0d043a934da15bc"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="models.LinCCAL.html#s:551"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#391875e84e76cffda0d043a934da15bc"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="LinCCALTens.Tens.lunit" class="idref" href="#LinCCALTens.Tens.lunit"><span class="id" title="definition">lunit</span></a> <a id="L:552" class="idref" href="#L:552"><span class="id" title="binder">L</span></a> : <a class="idref" href="models.LinCCAL.html#B.iso"><span class="id" title="record">iso</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.unit"><span class="id" title="definition">unit</span></a> <a class="idref" href="models.LinCCAL.html#8db90f942c614d0ef4a83b79462fc670"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#L:552"><span class="id" title="variable">L</span></a>) <a class="idref" href="models.LinCCAL.html#L:552"><span class="id" title="variable">L</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.fw"><span class="id" title="projection">fw</span></a> := {| <a class="idref" href="models.LinCCAL.html#B.li_impl"><span class="id" title="projection">li_impl</span></a> := <a class="idref" href="models.EffectSignatures.html#Reg.bw"><span class="id" title="projection">Reg.bw</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.Plus.lunit"><span class="id" title="definition">Reg.Plus.lunit</span></a> <span class="id" title="var">_</span>) |};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.bw"><span class="id" title="projection">bw</span></a> := {| <a class="idref" href="models.LinCCAL.html#B.li_impl"><span class="id" title="projection">li_impl</span></a> := <a class="idref" href="models.EffectSignatures.html#Reg.fw"><span class="id" title="projection">Reg.fw</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.Plus.lunit"><span class="id" title="definition">Reg.Plus.lunit</span></a> <span class="id" title="var">_</span>) |};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALTens.Tens.runit_fw_state" class="idref" href="#LinCCALTens.Tens.runit_fw_state"><span class="id" title="inductive">runit_fw_state</span></a> {<a id="E:553" class="idref" href="#E:553"><span class="id" title="binder">E</span></a>}: <a class="idref" href="models.LinCCAL.html#B.state"><span class="id" title="record">state</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALTens.Tens.runit_fw_state_intro" class="idref" href="#LinCCALTens.Tens.runit_fw_state_intro"><span class="id" title="constructor">runit_fw_state_intro</span></a> <a id="1b28805641ce85512a5af863cf52ffb2" class="idref" href="#1b28805641ce85512a5af863cf52ffb2"><span class="id" title="binder">Σ</span></a> <a id="s:557" class="idref" href="#s:557"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.iso_tmap"><span class="id" title="definition">iso_tmap</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.bw"><span class="id" title="projection">Sig.bw</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.Plus.runit"><span class="id" title="definition">Sig.Plus.runit</span></a> <a class="idref" href="models.LinCCAL.html#E:553"><span class="id" title="variable">E</span></a>)) <a class="idref" href="models.LinCCAL.html#s:557"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#runit_fw_state:554"><span class="id" title="inductive">runit_fw_state</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#1b28805641ce85512a5af863cf52ffb2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#s:557"><span class="id" title="variable">s</span></a> (<a class="idref" href="models.LinCCAL.html#1b28805641ce85512a5af863cf52ffb2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#B.li_spec"><span class="id" title="projection">li_spec</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.unit"><span class="id" title="definition">unit</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALTens.Tens.runit_bw_state" class="idref" href="#LinCCALTens.Tens.runit_bw_state"><span class="id" title="inductive">runit_bw_state</span></a> {<a id="E:558" class="idref" href="#E:558"><span class="id" title="binder">E</span></a>}: <a class="idref" href="models.LinCCAL.html#B.state"><span class="id" title="record">state</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALTens.Tens.runit_bw_state_intro" class="idref" href="#LinCCALTens.Tens.runit_bw_state_intro"><span class="id" title="constructor">runit_bw_state_intro</span></a> <a id="25d295c39ca185e3d5d964aeb4ce032a" class="idref" href="#25d295c39ca185e3d5d964aeb4ce032a"><span class="id" title="binder">Σ</span></a> <a id="s:562" class="idref" href="#s:562"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.iso_tmap"><span class="id" title="definition">iso_tmap</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.fw"><span class="id" title="projection">Sig.fw</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.Plus.runit"><span class="id" title="definition">Sig.Plus.runit</span></a> <a class="idref" href="models.LinCCAL.html#E:558"><span class="id" title="variable">E</span></a>)) <a class="idref" href="models.LinCCAL.html#s:562"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#runit_bw_state:559"><span class="id" title="inductive">runit_bw_state</span></a> (<a class="idref" href="models.LinCCAL.html#B.mkst"><span class="id" title="constructor">mkst</span></a> (<a class="idref" href="models.LinCCAL.html#25d295c39ca185e3d5d964aeb4ce032a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#B.li_spec"><span class="id" title="projection">li_spec</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.unit"><span class="id" title="definition">unit</span></a>) <a class="idref" href="models.LinCCAL.html#s:562"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#25d295c39ca185e3d5d964aeb4ce032a"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="LinCCALTens.Tens.runit" class="idref" href="#LinCCALTens.Tens.runit"><span class="id" title="definition">runit</span></a> <a id="L:563" class="idref" href="#L:563"><span class="id" title="binder">L</span></a> : <a class="idref" href="models.LinCCAL.html#B.iso"><span class="id" title="record">iso</span></a> (<a class="idref" href="models.LinCCAL.html#L:563"><span class="id" title="variable">L</span></a> <a class="idref" href="models.LinCCAL.html#8db90f942c614d0ef4a83b79462fc670"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.unit"><span class="id" title="definition">unit</span></a>) <a class="idref" href="models.LinCCAL.html#L:563"><span class="id" title="variable">L</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.fw"><span class="id" title="projection">fw</span></a> := {| <a class="idref" href="models.LinCCAL.html#B.li_impl"><span class="id" title="projection">li_impl</span></a> := <a class="idref" href="models.EffectSignatures.html#Reg.bw"><span class="id" title="projection">Reg.bw</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.Plus.runit"><span class="id" title="definition">Reg.Plus.runit</span></a> <span class="id" title="var">_</span>) |};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#B.bw"><span class="id" title="projection">bw</span></a> := {| <a class="idref" href="models.LinCCAL.html#B.li_impl"><span class="id" title="projection">li_impl</span></a> := <a class="idref" href="models.EffectSignatures.html#Reg.fw"><span class="id" title="projection">Reg.fw</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.Plus.runit"><span class="id" title="definition">Reg.Plus.runit</span></a> <span class="id" title="var">_</span>) |};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab282"></a><h3 class="section">Naturality properties</h3>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="LinCCALTens.Tens.assoc_nat" class="idref" href="#LinCCALTens.Tens.assoc_nat"><span class="id" title="lemma">assoc_nat</span></a> {<a id="A1:564" class="idref" href="#A1:564"><span class="id" title="binder">A1</span></a> <a id="B1:565" class="idref" href="#B1:565"><span class="id" title="binder">B1</span></a> <a id="C1:566" class="idref" href="#C1:566"><span class="id" title="binder">C1</span></a> <a id="A2:567" class="idref" href="#A2:567"><span class="id" title="binder">A2</span></a> <a id="B2:568" class="idref" href="#B2:568"><span class="id" title="binder">B2</span></a> <a id="C2:569" class="idref" href="#C2:569"><span class="id" title="binder">C2</span></a>} <a id="f:570" class="idref" href="#f:570"><span class="id" title="binder">f</span></a> <a id="g:571" class="idref" href="#g:571"><span class="id" title="binder">g</span></a> <a id="h:572" class="idref" href="#h:572"><span class="id" title="binder">h</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> <a class="idref" href="models.LinCCAL.html#f:570"><span class="id" title="variable">f</span></a> <a class="idref" href="models.LinCCAL.html#g:571"><span class="id" title="variable">g</span></a>) <a class="idref" href="models.LinCCAL.html#h:572"><span class="id" title="variable">h</span></a> <a class="idref" href="interfaces.Category.html#3e379d1aac3668be9aafbc3d5ab8b888"><span class="id" title="notation">@</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.assoc"><span class="id" title="definition">assoc</span></a> <a class="idref" href="models.LinCCAL.html#A1:564"><span class="id" title="variable">A1</span></a> <a class="idref" href="models.LinCCAL.html#B1:565"><span class="id" title="variable">B1</span></a> <a class="idref" href="models.LinCCAL.html#C1:566"><span class="id" title="variable">C1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.assoc"><span class="id" title="definition">assoc</span></a> <a class="idref" href="models.LinCCAL.html#A2:567"><span class="id" title="variable">A2</span></a> <a class="idref" href="models.LinCCAL.html#B2:568"><span class="id" title="variable">B2</span></a> <a class="idref" href="models.LinCCAL.html#C2:569"><span class="id" title="variable">C2</span></a> <a class="idref" href="interfaces.Category.html#3e379d1aac3668be9aafbc3d5ab8b888"><span class="id" title="notation">@</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> <a class="idref" href="models.LinCCAL.html#f:570"><span class="id" title="variable">f</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> <a class="idref" href="models.LinCCAL.html#g:571"><span class="id" title="variable">g</span></a> <a class="idref" href="models.LinCCAL.html#h:572"><span class="id" title="variable">h</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="LinCCALTens.Tens.lunit_nat" class="idref" href="#LinCCALTens.Tens.lunit_nat"><span class="id" title="lemma">lunit_nat</span></a> {<a id="A1:573" class="idref" href="#A1:573"><span class="id" title="binder">A1</span></a> <a id="A2:574" class="idref" href="#A2:574"><span class="id" title="binder">A2</span></a>} <a id="f:575" class="idref" href="#f:575"><span class="id" title="binder">f</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#f:575"><span class="id" title="variable">f</span></a> <a class="idref" href="interfaces.Category.html#3e379d1aac3668be9aafbc3d5ab8b888"><span class="id" title="notation">@</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.lunit"><span class="id" title="definition">lunit</span></a> <a class="idref" href="models.LinCCAL.html#A1:573"><span class="id" title="variable">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.lunit"><span class="id" title="definition">lunit</span></a> <a class="idref" href="models.LinCCAL.html#A2:574"><span class="id" title="variable">A2</span></a> <a class="idref" href="interfaces.Category.html#3e379d1aac3668be9aafbc3d5ab8b888"><span class="id" title="notation">@</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> (<a class="idref" href="models.LinCCAL.html#B.id"><span class="id" title="definition">id</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.unit"><span class="id" title="definition">unit</span></a>) <a class="idref" href="models.LinCCAL.html#f:575"><span class="id" title="variable">f</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="LinCCALTens.Tens.runit_nat" class="idref" href="#LinCCALTens.Tens.runit_nat"><span class="id" title="lemma">runit_nat</span></a> {<a id="A1:576" class="idref" href="#A1:576"><span class="id" title="binder">A1</span></a> <a id="A2:577" class="idref" href="#A2:577"><span class="id" title="binder">A2</span></a>} <a id="f:578" class="idref" href="#f:578"><span class="id" title="binder">f</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#f:578"><span class="id" title="variable">f</span></a> <a class="idref" href="interfaces.Category.html#3e379d1aac3668be9aafbc3d5ab8b888"><span class="id" title="notation">@</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.runit"><span class="id" title="definition">runit</span></a> <a class="idref" href="models.LinCCAL.html#A1:576"><span class="id" title="variable">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.runit"><span class="id" title="definition">runit</span></a> <a class="idref" href="models.LinCCAL.html#A2:577"><span class="id" title="variable">A2</span></a> <a class="idref" href="interfaces.Category.html#3e379d1aac3668be9aafbc3d5ab8b888"><span class="id" title="notation">@</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> <a class="idref" href="models.LinCCAL.html#f:578"><span class="id" title="variable">f</span></a> (<a class="idref" href="models.LinCCAL.html#B.id"><span class="id" title="definition">id</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.unit"><span class="id" title="definition">unit</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab283"></a><h3 class="section">Coherence diagrams</h3>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="LinCCALTens.Tens.assoc_coh" class="idref" href="#LinCCALTens.Tens.assoc_coh"><span class="id" title="lemma">assoc_coh</span></a> <a id="A:579" class="idref" href="#A:579"><span class="id" title="binder">A</span></a> <a id="B:580" class="idref" href="#B:580"><span class="id" title="binder">B</span></a> <a id="C:581" class="idref" href="#C:581"><span class="id" title="binder">C</span></a> <a id="D:582" class="idref" href="#D:582"><span class="id" title="binder">D</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.assoc"><span class="id" title="definition">assoc</span></a> <a class="idref" href="models.LinCCAL.html#A:579"><span class="id" title="variable">A</span></a> <a class="idref" href="models.LinCCAL.html#B:580"><span class="id" title="variable">B</span></a> <a class="idref" href="models.LinCCAL.html#C:581"><span class="id" title="variable">C</span></a>) (<a class="idref" href="models.LinCCAL.html#B.id"><span class="id" title="definition">id</span></a> <a class="idref" href="models.LinCCAL.html#D:582"><span class="id" title="variable">D</span></a>) <a class="idref" href="interfaces.Category.html#3e379d1aac3668be9aafbc3d5ab8b888"><span class="id" title="notation">@</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.assoc"><span class="id" title="definition">assoc</span></a> <a class="idref" href="models.LinCCAL.html#A:579"><span class="id" title="variable">A</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.omap"><span class="id" title="definition">omap</span></a> <a class="idref" href="models.LinCCAL.html#B:580"><span class="id" title="variable">B</span></a> <a class="idref" href="models.LinCCAL.html#C:581"><span class="id" title="variable">C</span></a>) <a class="idref" href="models.LinCCAL.html#D:582"><span class="id" title="variable">D</span></a> <a class="idref" href="interfaces.Category.html#3e379d1aac3668be9aafbc3d5ab8b888"><span class="id" title="notation">@</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> (<a class="idref" href="models.LinCCAL.html#B.id"><span class="id" title="definition">id</span></a> <a class="idref" href="models.LinCCAL.html#A:579"><span class="id" title="variable">A</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.assoc"><span class="id" title="definition">assoc</span></a> <a class="idref" href="models.LinCCAL.html#B:580"><span class="id" title="variable">B</span></a> <a class="idref" href="models.LinCCAL.html#C:581"><span class="id" title="variable">C</span></a> <a class="idref" href="models.LinCCAL.html#D:582"><span class="id" title="variable">D</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.assoc"><span class="id" title="definition">assoc</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.omap"><span class="id" title="definition">omap</span></a> <a class="idref" href="models.LinCCAL.html#A:579"><span class="id" title="variable">A</span></a> <a class="idref" href="models.LinCCAL.html#B:580"><span class="id" title="variable">B</span></a>) <a class="idref" href="models.LinCCAL.html#C:581"><span class="id" title="variable">C</span></a> <a class="idref" href="models.LinCCAL.html#D:582"><span class="id" title="variable">D</span></a> <a class="idref" href="interfaces.Category.html#3e379d1aac3668be9aafbc3d5ab8b888"><span class="id" title="notation">@</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.assoc"><span class="id" title="definition">assoc</span></a> <a class="idref" href="models.LinCCAL.html#A:579"><span class="id" title="variable">A</span></a> <a class="idref" href="models.LinCCAL.html#B:580"><span class="id" title="variable">B</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.omap"><span class="id" title="definition">omap</span></a> <a class="idref" href="models.LinCCAL.html#C:581"><span class="id" title="variable">C</span></a> <a class="idref" href="models.LinCCAL.html#D:582"><span class="id" title="variable">D</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="LinCCALTens.Tens.unit_coh" class="idref" href="#LinCCALTens.Tens.unit_coh"><span class="id" title="lemma">unit_coh</span></a> <a id="A:583" class="idref" href="#A:583"><span class="id" title="binder">A</span></a> <a id="B:584" class="idref" href="#B:584"><span class="id" title="binder">B</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.runit"><span class="id" title="definition">runit</span></a> <a class="idref" href="models.LinCCAL.html#A:583"><span class="id" title="variable">A</span></a>) (<a class="idref" href="models.LinCCAL.html#B.id"><span class="id" title="definition">id</span></a> <a class="idref" href="models.LinCCAL.html#B:584"><span class="id" title="variable">B</span></a>) <a class="idref" href="interfaces.Category.html#3e379d1aac3668be9aafbc3d5ab8b888"><span class="id" title="notation">@</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.assoc"><span class="id" title="definition">assoc</span></a> <a class="idref" href="models.LinCCAL.html#A:583"><span class="id" title="variable">A</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.unit"><span class="id" title="definition">unit</span></a> <a class="idref" href="models.LinCCAL.html#B:584"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.fmap"><span class="id" title="definition">fmap</span></a> (<a class="idref" href="models.LinCCAL.html#B.id"><span class="id" title="definition">id</span></a> <a class="idref" href="models.LinCCAL.html#A:583"><span class="id" title="variable">A</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens.lunit"><span class="id" title="definition">lunit</span></a> <a class="idref" href="models.LinCCAL.html#B:584"><span class="id" title="variable">B</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <a class="idref" href="interfaces.Functor.html#BifunctorTheory"><span class="id" title="module">BifunctorTheory</span></a> <a class="idref" href="models.LinCCAL.html#B"><span class="id" title="module">B</span></a> <a class="idref" href="models.LinCCAL.html#B"><span class="id" title="module">B</span></a> <a class="idref" href="models.LinCCAL.html#B"><span class="id" title="module">B</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <a class="idref" href="interfaces.MonoidalCategory.html#MonoidalStructureTheory"><span class="id" title="module">MonoidalStructureTheory</span></a> <a class="idref" href="models.LinCCAL.html#B"><span class="id" title="module">B</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="models.LinCCAL.html#LinCCALTens.Tens"><span class="id" title="module">Tens</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <a class="idref" href="interfaces.MonoidalCategory.html#MonoidalTheory"><span class="id" title="module">MonoidalTheory</span></a> <a class="idref" href="models.LinCCAL.html#B"><span class="id" title="module">B</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="models.LinCCAL.html#LinCCALTens"><span class="id" title="module">LinCCALTens</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab284"></a><h2 class="section">Putting everything together</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="LinCCAL" class="idref" href="#LinCCAL"><span class="id" title="module">LinCCAL</span></a> &lt;: <a class="idref" href="interfaces.MonoidalCategory.html#MonoidalCategory"><span class="id" title="module">MonoidalCategory</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALBase"><span class="id" title="module">LinCCALBase</span></a> &lt;+<br/>
&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALTens"><span class="id" title="module">LinCCALTens</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab285"></a><h1 class="section">Example</h1>

<div class="paragraph"> </div>

 As an example we will show a concurrent counter can be implemented
  in terms of a lock and register. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="LinCCALExample" class="idref" href="#LinCCALExample"><span class="id" title="module">LinCCALExample</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> (<span class="id" title="var">coercions</span>, <span class="id" title="var">canonicals</span>, <span class="id" title="var">notations</span>) <a class="idref" href="models.EffectSignatures.html#Sig"><span class="id" title="module">Sig</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">term_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab286"></a><h2 class="section">Counter specification</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALExample.Ecounter_op" class="idref" href="#LinCCALExample.Ecounter_op"><span class="id" title="inductive">Ecounter_op</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai" class="idref" href="#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <a id="LinCCALExample.Ecounter" class="idref" href="#LinCCALExample.Ecounter"><span class="id" title="definition">Ecounter</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALExample.Ecounter_op"><span class="id" title="inductive">Ecounter_op</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <span class="id" title="var">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ff792ff4957e4897f535858a817c104a" class="idref" href="#ff792ff4957e4897f535858a817c104a"><span class="id" title="definition">Σcounter</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.lts"><span class="id" title="abbreviation">LinCCAL.Spec.lts</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.Ecounter"><span class="id" title="definition">Ecounter</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="c:587" class="idref" href="#c:587"><span class="id" title="binder">c</span></a> <a id="t:588" class="idref" href="#t:588"><span class="id" title="binder">t</span></a> '<a id="pat:589" class="idref" href="#pat:589"><span class="id" title="binder">fai</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.ret"><span class="id" title="constructor">LinCCAL.Spec.ret</span></a> (<span class="id" title="var">m</span>:=<a class="idref" href="models.LinCCAL.html#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a>) <a class="idref" href="models.LinCCAL.html#c:587"><span class="id" title="variable">c</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="models.LinCCAL.html#c:587"><span class="id" title="variable">c</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALExample.Lcounter" class="idref" href="#LinCCALExample.Lcounter"><span class="id" title="definition">Lcounter</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.t"><span class="id" title="definition">LinCCAL.t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCAL.li_spec"><span class="id" title="projection">LinCCAL.li_spec</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.gen"><span class="id" title="definition">LinCCAL.Spec.gen</span></a> <a class="idref" href="models.LinCCAL.html#ff792ff4957e4897f535858a817c104a"><span class="id" title="definition">Σcounter</span></a> 0%<span class="id" title="var">nat</span>; |}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab287"></a><h2 class="section">Lock specification</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALExample.Elock_op" class="idref" href="#LinCCALExample.Elock_op"><span class="id" title="inductive">Elock_op</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.acq" class="idref" href="#LinCCALExample.acq"><span class="id" title="constructor">acq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.rel" class="idref" href="#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <a id="LinCCALExample.Elock" class="idref" href="#LinCCALExample.Elock"><span class="id" title="definition">Elock</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALExample.Elock_op"><span class="id" title="inductive">Elock_op</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <span class="id" title="var">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="5c6770c8b9f8363729d3880867c7dfd7" class="idref" href="#5c6770c8b9f8363729d3880867c7dfd7"><span class="id" title="definition">Σlock</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.lts"><span class="id" title="abbreviation">LinCCAL.Spec.lts</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.Elock"><span class="id" title="definition">Elock</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.tid"><span class="id" title="abbreviation">LinCCAL.tid</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="s:592" class="idref" href="#s:592"><span class="id" title="binder">s</span></a> <a id="t:593" class="idref" href="#t:593"><span class="id" title="binder">t</span></a> <a id="m:594" class="idref" href="#m:594"><span class="id" title="binder">m</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#s:592"><span class="id" title="variable">s</span></a>, <a class="idref" href="models.LinCCAL.html#m:594"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCALExample.acq"><span class="id" title="constructor">acq</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.ret"><span class="id" title="constructor">LinCCAL.Spec.ret</span></a> (<span class="id" title="var">m</span>:=<a class="idref" href="models.LinCCAL.html#LinCCALExample.acq"><span class="id" title="constructor">acq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#t:593"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.bot"><span class="id" title="constructor">LinCCAL.Spec.bot</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">i</span>, <a class="idref" href="models.LinCCAL.html#LinCCALExample.acq"><span class="id" title="constructor">acq</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="models.LinCCAL.html#LinCCAL.TMap.E.eq_dec"><span class="id" title="lemma">LinCCAL.TMap.E.eq_dec</span></a> <span class="id" title="var">i</span> <a class="idref" href="models.LinCCAL.html#t:593"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.bot"><span class="id" title="constructor">LinCCAL.Spec.bot</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.top"><span class="id" title="constructor">LinCCAL.Spec.top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">i</span>, <a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="models.LinCCAL.html#LinCCAL.TMap.E.eq_dec"><span class="id" title="lemma">LinCCAL.TMap.E.eq_dec</span></a> <span class="id" title="var">i</span> <a class="idref" href="models.LinCCAL.html#t:593"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.ret"><span class="id" title="constructor">LinCCAL.Spec.ret</span></a> (<span class="id" title="var">m</span>:=<a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.bot"><span class="id" title="constructor">LinCCAL.Spec.bot</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALExample.Llock" class="idref" href="#LinCCALExample.Llock"><span class="id" title="definition">Llock</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.t"><span class="id" title="definition">LinCCAL.t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCAL.li_spec"><span class="id" title="projection">LinCCAL.li_spec</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.gen"><span class="id" title="definition">LinCCAL.Spec.gen</span></a> <a class="idref" href="models.LinCCAL.html#5c6770c8b9f8363729d3880867c7dfd7"><span class="id" title="definition">Σlock</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> |}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab288"></a><h2 class="section">Register specification</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALExample.Ereg_op" class="idref" href="#LinCCALExample.Ereg_op"><span class="id" title="inductive">Ereg_op</span></a> {<a id="S:597" class="idref" href="#S:597"><span class="id" title="binder">S</span></a>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.get" class="idref" href="#LinCCALExample.get"><span class="id" title="constructor">get</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.set" class="idref" href="#LinCCALExample.set"><span class="id" title="constructor">set</span></a> (<a id="s:600" class="idref" href="#s:600"><span class="id" title="binder">s</span></a> : <a class="idref" href="models.LinCCAL.html#S:597"><span class="id" title="variable">S</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCALExample.Ereg_op"><span class="id" title="inductive">Ereg_op</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALExample.Ereg_ar" class="idref" href="#LinCCALExample.Ereg_ar"><span class="id" title="definition">Ereg_ar</span></a> {<a id="S:601" class="idref" href="#S:601"><span class="id" title="binder">S</span></a>} (<a id="m:602" class="idref" href="#m:602"><span class="id" title="binder">m</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALExample.Ereg_op"><span class="id" title="inductive">Ereg_op</span></a> <a class="idref" href="models.LinCCAL.html#S:601"><span class="id" title="variable">S</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#m:602"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALExample.get"><span class="id" title="constructor">get</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#S:601"><span class="id" title="variable">S</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALExample.set"><span class="id" title="constructor">set</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <a id="LinCCALExample.Ereg" class="idref" href="#LinCCALExample.Ereg"><span class="id" title="definition">Ereg</span></a> <a id="S:604" class="idref" href="#S:604"><span class="id" title="binder">S</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALExample.Ereg_op"><span class="id" title="inductive">Ereg_op</span></a> <a class="idref" href="models.LinCCAL.html#S:604"><span class="id" title="variable">S</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALExample.Ereg_ar"><span class="id" title="definition">Ereg_ar</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="aeb20c8e2c916bfc1d4a7d24de6ac0ab" class="idref" href="#aeb20c8e2c916bfc1d4a7d24de6ac0ab"><span class="id" title="definition">Σreg</span></a> <a id="S:605" class="idref" href="#S:605"><span class="id" title="binder">S</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.lts"><span class="id" title="abbreviation">LinCCAL.Spec.lts</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALExample.Ereg"><span class="id" title="definition">Ereg</span></a> <a class="idref" href="models.LinCCAL.html#S:605"><span class="id" title="variable">S</span></a>) <a class="idref" href="models.LinCCAL.html#S:605"><span class="id" title="variable">S</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="s:606" class="idref" href="#s:606"><span class="id" title="binder">s</span></a> <a id="t:607" class="idref" href="#t:607"><span class="id" title="binder">t</span></a> <a id="m:608" class="idref" href="#m:608"><span class="id" title="binder">m</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#m:608"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALExample.get"><span class="id" title="constructor">get</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.ret"><span class="id" title="constructor">LinCCAL.Spec.ret</span></a> (<span class="id" title="var">m</span>:=<a class="idref" href="models.LinCCAL.html#LinCCALExample.get"><span class="id" title="constructor">get</span></a>) <a class="idref" href="models.LinCCAL.html#s:606"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#s:606"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALExample.set"><span class="id" title="constructor">set</span></a> <span class="id" title="var">s'</span> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.ret"><span class="id" title="constructor">LinCCAL.Spec.ret</span></a> (<span class="id" title="var">m</span>:=<a class="idref" href="models.LinCCAL.html#LinCCALExample.set"><span class="id" title="constructor">set</span></a> <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="var">s'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALExample.Lreg" class="idref" href="#LinCCALExample.Lreg"><span class="id" title="definition">Lreg</span></a> {<a id="S:610" class="idref" href="#S:610"><span class="id" title="binder">S</span></a>} (<a id="s0:611" class="idref" href="#s0:611"><span class="id" title="binder">s0</span></a> : <a class="idref" href="models.LinCCAL.html#S:610"><span class="id" title="variable">S</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCAL.li_spec"><span class="id" title="projection">LinCCAL.li_spec</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.gen"><span class="id" title="definition">LinCCAL.Spec.gen</span></a> (<a class="idref" href="models.LinCCAL.html#aeb20c8e2c916bfc1d4a7d24de6ac0ab"><span class="id" title="definition">Σreg</span></a> <a class="idref" href="models.LinCCAL.html#S:610"><span class="id" title="variable">S</span></a>) <a class="idref" href="models.LinCCAL.html#s0:611"><span class="id" title="variable">s0</span></a> |}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab289"></a><h2 class="section">Implementation</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> (<span class="id" title="var">notations</span>) <a class="idref" href="models.LinCCAL.html#LinCCAL"><span class="id" title="module">LinCCAL</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> (<span class="id" title="var">canonicals</span>) <a class="idref" href="models.EffectSignatures.html#Sig.Plus"><span class="id" title="module">Sig.Plus</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALExample.fai_impl" class="idref" href="#LinCCALExample.fai_impl"><span class="id" title="definition">fai_impl</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.li_sig"><span class="id" title="projection">LinCCAL.li_sig</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALExample.Llock"><span class="id" title="definition">Llock</span></a> <a class="idref" href="interfaces.MonoidalCategory.html#17fd9bf236c0d07d4608182a0593ed5a"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.Lreg"><span class="id" title="definition">Lreg</span></a> 0%<span class="id" title="var">nat</span>)%<span class="id" title="var">obj</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.acq"><span class="id" title="constructor">acq</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:612" class="idref" href="#pat:612"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.get"><span class="id" title="constructor">get</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="c:614" class="idref" href="#c:614"><span class="id" title="binder">c</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALExample.set"><span class="id" title="constructor">set</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="models.LinCCAL.html#c:613"><span class="id" title="variable">c</span></a>)) <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:615" class="idref" href="#pat:615"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:616" class="idref" href="#pat:616"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#c:613"><span class="id" title="variable">c</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALExample.fai_threadstate" class="idref" href="#LinCCALExample.fai_threadstate"><span class="id" title="inductive">fai_threadstate</span></a> (<a id="i:617" class="idref" href="#i:617"><span class="id" title="binder">i</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.tid"><span class="id" title="abbreviation">LinCCAL.tid</span></a>) <a id="h:618" class="idref" href="#h:618"><span class="id" title="binder">h</span></a> : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai_rdy" class="idref" href="#LinCCALExample.fai_rdy"><span class="id" title="constructor">fai_rdy</span></a> <a id="c:621" class="idref" href="#c:621"><span class="id" title="binder">c</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:618"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:617"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_threadstate:619"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:617"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:618"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c:621"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai_acq" class="idref" href="#LinCCALExample.fai_acq"><span class="id" title="constructor">fai_acq</span></a> <a id="c:622" class="idref" href="#c:622"><span class="id" title="binder">c</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:618"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:617"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_threadstate:619"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:617"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:618"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c:622"><span class="id" title="variable">c</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">LinCCAL.mkts</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai_impl"><span class="id" title="definition">fai_impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai_get" class="idref" href="#LinCCALExample.fai_get"><span class="id" title="constructor">fai_get</span></a> <a id="c:623" class="idref" href="#c:623"><span class="id" title="binder">c</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:618"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:617"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_threadstate:619"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:617"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:618"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c:623"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">LinCCAL.mkts</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.get"><span class="id" title="constructor">get</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="c:625" class="idref" href="#c:625"><span class="id" title="binder">c</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALExample.set"><span class="id" title="constructor">set</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="models.LinCCAL.html#c:624"><span class="id" title="variable">c</span></a>)) <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:626" class="idref" href="#pat:626"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:627" class="idref" href="#pat:627"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#c:624"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai_set" class="idref" href="#LinCCALExample.fai_set"><span class="id" title="constructor">fai_set</span></a> <a id="c:628" class="idref" href="#c:628"><span class="id" title="binder">c</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:618"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:617"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_threadstate:619"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:617"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:618"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c:628"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">LinCCAL.mkts</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALExample.set"><span class="id" title="constructor">set</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="models.LinCCAL.html#c:628"><span class="id" title="variable">c</span></a>)) <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:629" class="idref" href="#pat:629"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:630" class="idref" href="#pat:630"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#c:628"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai_rel" class="idref" href="#LinCCALExample.fai_rel"><span class="id" title="constructor">fai_rel</span></a> <a id="c:631" class="idref" href="#c:631"><span class="id" title="binder">c</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:618"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:617"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_threadstate:619"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:617"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:618"><span class="id" title="variable">h</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="models.LinCCAL.html#c:631"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">LinCCAL.mkts</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:632" class="idref" href="#pat:632"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#c:631"><span class="id" title="variable">c</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#c:631"><span class="id" title="variable">c</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai_ret" class="idref" href="#LinCCALExample.fai_ret"><span class="id" title="constructor">fai_ret</span></a> <a id="c:633" class="idref" href="#c:633"><span class="id" title="binder">c</span></a> <a id="c':634" class="idref" href="#c':634"><span class="id" title="binder">c'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:618"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:617"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_threadstate:619"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:617"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:618"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c':634"><span class="id" title="variable">c'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">LinCCAL.mkts</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#c:633"><span class="id" title="variable">c</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#c:633"><span class="id" title="variable">c</span></a>))).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALExample.fai_state" class="idref" href="#LinCCALExample.fai_state"><span class="id" title="inductive">fai_state</span></a> : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALExample.fai_state_intro" class="idref" href="#LinCCALExample.fai_state_intro"><span class="id" title="constructor">fai_state_intro</span></a> <a id="h:637" class="idref" href="#h:637"><span class="id" title="binder">h</span></a> <a id="c:638" class="idref" href="#c:638"><span class="id" title="binder">c</span></a> <a id="s:639" class="idref" href="#s:639"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="i:640" class="idref" href="#i:640"><span class="id" title="binder">i</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai_threadstate"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:640"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:637"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c:638"><span class="id" title="variable">c</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.TMap.find"><span class="id" title="definition">LinCCAL.TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:640"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s:639"><span class="id" title="variable">s</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_state:635"><span class="id" title="inductive">fai_state</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">LinCCAL.mkst</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.gen"><span class="id" title="definition">LinCCAL.Spec.gen</span></a> <a class="idref" href="models.LinCCAL.html#ff792ff4957e4897f535858a817c104a"><span class="id" title="definition">Σcounter</span></a> <a class="idref" href="models.LinCCAL.html#c:638"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#s:639"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.gen"><span class="id" title="definition">LinCCAL.Spec.gen</span></a> <a class="idref" href="models.LinCCAL.html#5c6770c8b9f8363729d3880867c7dfd7"><span class="id" title="definition">Σlock</span></a> <a class="idref" href="models.LinCCAL.html#h:637"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#bea741525cbf7258062ab0c0397d20ee"><span class="id" title="notation">×</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.Spec.gen"><span class="id" title="definition">LinCCAL.Spec.gen</span></a> (<a class="idref" href="models.LinCCAL.html#aeb20c8e2c916bfc1d4a7d24de6ac0ab"><span class="id" title="definition">Σreg</span></a> <span class="id" title="var">_</span>) <a class="idref" href="models.LinCCAL.html#c:638"><span class="id" title="variable">c</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALExample.fai_threadstate_convert" class="idref" href="#LinCCALExample.fai_threadstate_convert"><span class="id" title="lemma">fai_threadstate_convert</span></a> <a id="i:641" class="idref" href="#i:641"><span class="id" title="binder">i</span></a> <a id="h:642" class="idref" href="#h:642"><span class="id" title="binder">h</span></a> <a id="h':643" class="idref" href="#h':643"><span class="id" title="binder">h'</span></a> <a id="c:644" class="idref" href="#c:644"><span class="id" title="binder">c</span></a> <a id="c':645" class="idref" href="#c':645"><span class="id" title="binder">c'</span></a> <a id="s:646" class="idref" href="#s:646"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALExample.fai_threadstate"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:641"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:642"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c:644"><span class="id" title="variable">c</span></a> <a class="idref" href="models.LinCCAL.html#s:646"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:642"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:641"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h':643"><span class="id" title="variable">h'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:641"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALExample.fai_threadstate"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:641"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h':643"><span class="id" title="variable">h'</span></a> <a class="idref" href="models.LinCCAL.html#c':645"><span class="id" title="variable">c'</span></a> <a class="idref" href="models.LinCCAL.html#s:646"><span class="id" title="variable">s</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="LinCCALExample.Mcounter" class="idref" href="#LinCCALExample.Mcounter"><span class="id" title="definition">Mcounter</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.m"><span class="id" title="definition">LinCCAL.m</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALExample.Llock"><span class="id" title="definition">Llock</span></a> <a class="idref" href="interfaces.MonoidalCategory.html#17fd9bf236c0d07d4608182a0593ed5a"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.Lreg"><span class="id" title="definition">Lreg</span></a> 0%<span class="id" title="var">nat</span>) <a class="idref" href="models.LinCCAL.html#LinCCALExample.Lcounter"><span class="id" title="definition">Lcounter</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCAL.li_impl"><span class="id" title="projection">LinCCAL.li_impl</span></a> '<a id="pat:647" class="idref" href="#pat:647"><span class="id" title="binder">fai</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai_impl"><span class="id" title="definition">fai_impl</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="models.LinCCAL.html#LinCCALExample"><span class="id" title="module">LinCCALExample</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>