<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>models.LinCCAL</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library models.LinCCAL</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.FSets.FMapPositive.html#"><span class="id" title="library">FMapPositive</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Operators.html#"><span class="id" title="library">Relation_Operators</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Operators_Properties.html#"><span class="id" title="library">Operators_Properties</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Program.Program.html#"><span class="id" title="library">Program</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Logic.Classical.html#"><span class="id" title="library">Classical</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">coqrel.LogicalRelations</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="interfaces.Category.html#"><span class="id" title="library">interfaces.Category</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="models.EffectSignatures.html#"><span class="id" title="library">models.EffectSignatures</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab252"></a><h1 class="section">Linearization-based Concurrent Certified Abstraction Layers</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="LinCCAL" class="idref" href="#LinCCAL"><span class="id" title="module">LinCCAL</span></a> &lt;: <a class="idref" href="interfaces.Category.html#Category"><span class="id" title="module">Category</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a id="LinCCAL.TMap" class="idref" href="#LinCCAL.TMap"><span class="id" title="module">TMap</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.FSets.FMapPositive.html#PositiveMap"><span class="id" title="module">PositiveMap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="LinCCAL.tid" class="idref" href="#LinCCAL.tid"><span class="id" title="abbreviation">tid</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCAL.key"><span class="id" title="definition">TMap.key</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="LinCCAL.tmap" class="idref" href="#LinCCAL.tmap"><span class="id" title="abbreviation">tmap</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCAL.t"><span class="id" title="definition">TMap.t</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab253"></a><h2 class="section">Concurrent object specifications</h2>

<div class="paragraph"> </div>

 For simplicity, we use linearized atomic specifications and
    specify correctness directly in terms of that model. In their
    linearized form, the specifications are deterministic, however
    we allow both undefined and unimplementable behaviors.
    Undefined behaviors (<span class="inlinecode"><span class="id" title="var">spec_bot</span></span>) release the implementation of
    any obligation, and are usually a consequence of illegal actions
    by the client (for example, a thread acquiring a lock twice).
    Conversely, unimplementable behaviors (<span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCAL.spec_top"><span class="id" title="constructor">spec_top</span></a></span>) are simply
    impossible for an implementation to obey; this is usually meant
    to force a different linearization order. For example, in the
    atomic specification, acquiring a lock which is already held
    by a different thread will yield an unimplementable spec.
    However, a lock implementation can still obey the specification
    by delaying the linearization of <span class="inlinecode"><span class="id" title="var">acquire</span></span> until the lock is
    released by the thread currently holding it. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">CoInductive</span> <a id="LinCCAL.spec_after" class="idref" href="#LinCCAL.spec_after"><span class="id" title="inductive">spec_after</span></a> {<a id="E:1" class="idref" href="#E:1"><span class="id" title="binder">E</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.t"><span class="id" title="definition">Sig.t</span></a>} {<a id="m:2" class="idref" href="#m:2"><span class="id" title="binder">m</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#E:1"><span class="id" title="variable">E</span></a>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;spec_bot<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.spec_top" class="idref" href="#LinCCAL.spec_top"><span class="id" title="constructor">spec_top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.spec_cons" class="idref" href="#LinCCAL.spec_cons"><span class="id" title="constructor">spec_cons</span></a> (<a id="n:5" class="idref" href="#n:5"><span class="id" title="binder">n</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.LinCCAL.html#m:2"><span class="id" title="variable">m</span></a>) (<a id="k:7" class="idref" href="#k:7"><span class="id" title="binder">k</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.tid"><span class="id" title="abbreviation">tid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="m:6" class="idref" href="#m:6"><span class="id" title="binder">m</span></a>, @<a class="idref" href="models.LinCCAL.html#spec_after:3"><span class="id" title="inductive">spec_after</span></a> <a class="idref" href="models.LinCCAL.html#E:1"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#m:6"><span class="id" title="variable">m</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_after"><span class="id" title="inductive">spec_after</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="LinCCAL.spec" class="idref" href="#LinCCAL.spec"><span class="id" title="abbreviation">spec</span></a> <span class="id" title="var">E</span> := (<a class="idref" href="models.LinCCAL.html#LinCCAL.tid"><span class="id" title="abbreviation">tid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="m:8" class="idref" href="#m:8"><span class="id" title="binder">m</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_after"><span class="id" title="inductive">spec_after</span></a> <span class="id" title="var">E</span> <a class="idref" href="models.LinCCAL.html#m:8"><span class="id" title="variable">m</span></a>).<br/>

<br/>
</div>

<div class="doc">
To formalize this interpretation, we can describe the possible
    outcomes of performing the next invocation in a specification,
    namely the admissible return values and specification next states. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;Variant&nbsp;spec_query&nbsp;{E&nbsp;m}&nbsp;(n:&nbsp;Sig.ar&nbsp;m)&nbsp;(k:&nbsp;spec&nbsp;E)&nbsp;:&nbsp;spec_after&nbsp;E&nbsp;m&nbsp;-&gt;&nbsp;Prop&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;spec_query_bot&nbsp;:&nbsp;spec_query&nbsp;n&nbsp;k&nbsp;spec_bot<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;spec_query_cons&nbsp;:&nbsp;spec_query&nbsp;n&nbsp;k&nbsp;(spec_cons&nbsp;n&nbsp;k).<br/>
<br/>
&nbsp;&nbsp;Definition&nbsp;spec_next&nbsp;{E}&nbsp;(Σ&nbsp;:&nbsp;spec&nbsp;E)&nbsp;t&nbsp;m&nbsp;n&nbsp;k&nbsp;:&nbsp;Prop&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;spec_query&nbsp;n&nbsp;k&nbsp;(Σ&nbsp;t&nbsp;m).<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab254"></a><h2 class="section">Implementation states</h2>

<div class="paragraph"> </div>

 We use regular maps <span class="inlinecode"><span class="id" title="var">Reg.m</span></span> to model implementations of a given
    overlay specification in terms of a given underlay specification.
    A regular map associates with each overlay operation a term of the
    underlay signature, interpreted as a strategy tree or a computation
    in the free monad, in the style of algebraic effect frameworks.

<div class="paragraph"> </div>

    To express correctness, we use the following execution model.
    When a method <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCAL.ts_op"><span class="id" title="projection">ts_op</span></a></span> is invoked in a particular thread, we use
    the implementation to initialize a computation <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCAL.ts_prog"><span class="id" title="projection">ts_prog</span></a></span> for that
    thread.  Whenever the thread is scheduled, we use the (linearized,
    atomic) underlay specification to perform the next underlay call
    in the computation. Eventually, the computation will produce a
    result and return from the overlay call.

<div class="paragraph"> </div>

    It remains to compare this behavior to the one prescribed by the
    overlay specification. To prove that the implementation's behavior
    linearizes to the atomic overlay specification, we must show there
    is a way to pick a particular point in time, as a method is being
    executed, when its atomic call and return will be recoded as
    occuring from the point of view of the overlay client. We match
    the call against the overlay specification at that time and keep
    track of the result <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCAL.ts_res"><span class="id" title="projection">ts_res</span></a></span> that we have committed to. As the
    method's execution proceeds and eventually terminates, we will
    have to show that the actual outcome matches the recorded result.

<div class="paragraph"> </div>

    Concretely, our state will consist of a finite map which will
    associate to each running thread a linearization state of the
    following type. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="LinCCAL.threadstate" class="idref" href="#LinCCAL.threadstate"><span class="id" title="record">threadstate</span></a> {<a id="E:9" class="idref" href="#E:9"><span class="id" title="binder">E</span></a> <a id="F:10" class="idref" href="#F:10"><span class="id" title="binder">F</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.t"><span class="id" title="definition">Sig.t</span></a>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.mkts" class="idref" href="#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.ts_op" class="idref" href="#LinCCAL.ts_op"><span class="id" title="projection">ts_op</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#F:10"><span class="id" title="variable">F</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.ts_prog" class="idref" href="#LinCCAL.ts_prog"><span class="id" title="projection">ts_prog</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> <a class="idref" href="models.LinCCAL.html#E:9"><span class="id" title="variable">E</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.LinCCAL.html#ts_op:12"><span class="id" title="method">ts_op</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.ts_res" class="idref" href="#LinCCAL.ts_res"><span class="id" title="projection">ts_res</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.LinCCAL.html#ts_op:12"><span class="id" title="method">ts_op</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCAL.threadstate"><span class="id" title="record">threadstate</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">F</span>}.<br/>

<br/>
</div>

<div class="doc">
Then the global state consists of a thread state for every
    running thread, an overlay spec and an underlay spec. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="LinCCAL.state" class="idref" href="#LinCCAL.state"><span class="id" title="record">state</span></a> {<a id="E:15" class="idref" href="#E:15"><span class="id" title="binder">E</span></a> <a id="F:16" class="idref" href="#F:16"><span class="id" title="binder">F</span></a>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.mkst" class="idref" href="#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.st_spec" class="idref" href="#LinCCAL.st_spec"><span class="id" title="projection">st_spec</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.spec"><span class="id" title="abbreviation">spec</span></a> <a class="idref" href="models.LinCCAL.html#F:16"><span class="id" title="variable">F</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.st_impl" class="idref" href="#LinCCAL.st_impl"><span class="id" title="projection">st_impl</span></a> :&gt; <a class="idref" href="models.LinCCAL.html#LinCCAL.tmap"><span class="id" title="abbreviation">tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.threadstate"><span class="id" title="record">threadstate</span></a> <a class="idref" href="models.LinCCAL.html#E:15"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:16"><span class="id" title="variable">F</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.st_base" class="idref" href="#LinCCAL.st_base"><span class="id" title="projection">st_base</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.spec"><span class="id" title="abbreviation">spec</span></a> <a class="idref" href="models.LinCCAL.html#E:15"><span class="id" title="variable">E</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCAL.state"><span class="id" title="record">state</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">F</span>}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab255"></a><h3 class="section">Environment steps</h3>

<div class="paragraph"> </div>

 At any time, the environment may invoke a method on a ready thread,
    or schedule a running thread to execute. A linearization proof
    must be ready to deal with the corresponding effects on the state,
    enumerated below. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCAL.estep" class="idref" href="#LinCCAL.estep"><span class="id" title="inductive">estep</span></a> {<a id="E:21" class="idref" href="#E:21"><span class="id" title="binder">E</span></a> <a id="F:22" class="idref" href="#F:22"><span class="id" title="binder">F</span></a>} (<a id="M:23" class="idref" href="#M:23"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:21"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:22"><span class="id" title="variable">F</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.state"><span class="id" title="record">state</span></a> <span class="id" title="var">E</span> <span class="id" title="var">F</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.einvoke" class="idref" href="#LinCCAL.einvoke"><span class="id" title="constructor">einvoke</span></a> <a id="t:26" class="idref" href="#t:26"><span class="id" title="binder">t</span></a> <a id="q:27" class="idref" href="#q:27"><span class="id" title="binder">q</span></a> <a id="429bde08aec4510dd7c009bdb80fa47b" class="idref" href="#429bde08aec4510dd7c009bdb80fa47b"><span class="id" title="binder">Δ</span></a> <a id="s:29" class="idref" href="#s:29"><span class="id" title="binder">s</span></a> <a id="s':30" class="idref" href="#s':30"><span class="id" title="binder">s'</span></a> <a id="7374d4818eab9c7e7a123322e5aab0bf" class="idref" href="#7374d4818eab9c7e7a123322e5aab0bf"><span class="id" title="binder">Σ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:26"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:29"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:26"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:27"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#M:23"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#q:27"><span class="id" title="variable">q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="models.LinCCAL.html#s:29"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#s':30"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#estep:24"><span class="id" title="inductive">estep</span></a> <a class="idref" href="models.LinCCAL.html#M:23"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#429bde08aec4510dd7c009bdb80fa47b"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s:29"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#7374d4818eab9c7e7a123322e5aab0bf"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#429bde08aec4510dd7c009bdb80fa47b"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s':30"><span class="id" title="variable">s'</span></a> <a class="idref" href="models.LinCCAL.html#7374d4818eab9c7e7a123322e5aab0bf"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.eaction" class="idref" href="#LinCCAL.eaction"><span class="id" title="constructor">eaction</span></a> <a id="t:32" class="idref" href="#t:32"><span class="id" title="binder">t</span></a> <a id="q:33" class="idref" href="#q:33"><span class="id" title="binder">q</span></a> <a id="m:34" class="idref" href="#m:34"><span class="id" title="binder">m</span></a> <a id="n:35" class="idref" href="#n:35"><span class="id" title="binder">n</span></a> <a id="k:36" class="idref" href="#k:36"><span class="id" title="binder">k</span></a> <a id="R:37" class="idref" href="#R:37"><span class="id" title="binder">R</span></a> <a id="7d31cd8629b7f8d251b98b4f2ca5fee1" class="idref" href="#7d31cd8629b7f8d251b98b4f2ca5fee1"><span class="id" title="binder">Δ</span></a> <a id="s:39" class="idref" href="#s:39"><span class="id" title="binder">s</span></a> <a id="a5fa9249bdc19684169f7ebb302b006b" class="idref" href="#a5fa9249bdc19684169f7ebb302b006b"><span class="id" title="binder">Σ</span></a> <a id="s':41" class="idref" href="#s':41"><span class="id" title="binder">s'</span></a> <a id="3080d84d0b7c9d10e84818a4e558cd4f" class="idref" href="#3080d84d0b7c9d10e84818a4e558cd4f"><span class="id" title="binder">Σ'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:32"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:39"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:33"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:34"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#k:36"><span class="id" title="variable">k</span></a>) <a class="idref" href="models.LinCCAL.html#R:37"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#a5fa9249bdc19684169f7ebb302b006b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#t:32"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#m:34"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_cons"><span class="id" title="constructor">spec_cons</span></a> <a class="idref" href="models.LinCCAL.html#n:35"><span class="id" title="variable">n</span></a> <a class="idref" href="models.LinCCAL.html#3080d84d0b7c9d10e84818a4e558cd4f"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:32"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:33"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#k:36"><span class="id" title="variable">k</span></a> <a class="idref" href="models.LinCCAL.html#n:35"><span class="id" title="variable">n</span></a>) <a class="idref" href="models.LinCCAL.html#R:37"><span class="id" title="variable">R</span></a>) <a class="idref" href="models.LinCCAL.html#s:39"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#s':41"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#estep:24"><span class="id" title="inductive">estep</span></a> <a class="idref" href="models.LinCCAL.html#M:23"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#7d31cd8629b7f8d251b98b4f2ca5fee1"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s:39"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#a5fa9249bdc19684169f7ebb302b006b"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#7d31cd8629b7f8d251b98b4f2ca5fee1"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s':41"><span class="id" title="variable">s'</span></a> <a class="idref" href="models.LinCCAL.html#3080d84d0b7c9d10e84818a4e558cd4f"><span class="id" title="variable">Σ'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.ereturn" class="idref" href="#LinCCAL.ereturn"><span class="id" title="constructor">ereturn</span></a> <a id="t:43" class="idref" href="#t:43"><span class="id" title="binder">t</span></a> <a id="q:44" class="idref" href="#q:44"><span class="id" title="binder">q</span></a> <a id="r:45" class="idref" href="#r:45"><span class="id" title="binder">r</span></a> <a id="0e322e9f9fade6a92839f0f35e288c1a" class="idref" href="#0e322e9f9fade6a92839f0f35e288c1a"><span class="id" title="binder">Δ</span></a> <a id="s:47" class="idref" href="#s:47"><span class="id" title="binder">s</span></a> <a id="s':48" class="idref" href="#s':48"><span class="id" title="binder">s'</span></a> <a id="bee78f44e79dd1f39e7aa3afe03ef2db" class="idref" href="#bee78f44e79dd1f39e7aa3afe03ef2db"><span class="id" title="binder">Σ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:43"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:47"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:44"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#r:45"><span class="id" title="variable">r</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#r:45"><span class="id" title="variable">r</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.remove"><span class="id" title="definition">TMap.remove</span></a> <a class="idref" href="models.LinCCAL.html#t:43"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:47"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#s':48"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#estep:24"><span class="id" title="inductive">estep</span></a> <a class="idref" href="models.LinCCAL.html#M:23"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#0e322e9f9fade6a92839f0f35e288c1a"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s:47"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#bee78f44e79dd1f39e7aa3afe03ef2db"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#0e322e9f9fade6a92839f0f35e288c1a"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s':48"><span class="id" title="variable">s'</span></a> <a class="idref" href="models.LinCCAL.html#bee78f44e79dd1f39e7aa3afe03ef2db"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab256"></a><h3 class="section">Commit steps</h3>

<div class="paragraph"> </div>

 Our job is then to insert commit steps in such a way that by the
    time <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCAL.ereturn"><span class="id" title="constructor">ereturn</span></a></span> is in play, the invocation has been committed with
    the correct outcome. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCAL.lstep" class="idref" href="#LinCCAL.lstep"><span class="id" title="inductive">lstep</span></a> {<a id="E:50" class="idref" href="#E:50"><span class="id" title="binder">E</span></a> <a id="F:51" class="idref" href="#F:51"><span class="id" title="binder">F</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.state"><span class="id" title="record">state</span></a> <span class="id" title="var">E</span> <span class="id" title="var">F</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.lcommit" class="idref" href="#LinCCAL.lcommit"><span class="id" title="constructor">lcommit</span></a> <a id="t:54" class="idref" href="#t:54"><span class="id" title="binder">t</span></a> <a id="q:55" class="idref" href="#q:55"><span class="id" title="binder">q</span></a> <a id="r:56" class="idref" href="#r:56"><span class="id" title="binder">r</span></a> <a id="T:57" class="idref" href="#T:57"><span class="id" title="binder">T</span></a> <a id="5b5e1b088e4e01e3ccd4c298fc9c973b" class="idref" href="#5b5e1b088e4e01e3ccd4c298fc9c973b"><span class="id" title="binder">Δ</span></a> <a id="3d8131066c89ab2059835b442d2b114c" class="idref" href="#3d8131066c89ab2059835b442d2b114c"><span class="id" title="binder">Δ'</span></a> <a id="s:60" class="idref" href="#s:60"><span class="id" title="binder">s</span></a> <a id="s':61" class="idref" href="#s':61"><span class="id" title="binder">s'</span></a> <a id="e4cd9633ec2d0ee09ebe5d497f8dd196" class="idref" href="#e4cd9633ec2d0ee09ebe5d497f8dd196"><span class="id" title="binder">Σ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:54"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:60"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:55"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:57"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#5b5e1b088e4e01e3ccd4c298fc9c973b"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#t:54"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:55"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_cons"><span class="id" title="constructor">spec_cons</span></a> <a class="idref" href="models.LinCCAL.html#r:56"><span class="id" title="variable">r</span></a> <a class="idref" href="models.LinCCAL.html#3d8131066c89ab2059835b442d2b114c"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:54"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:55"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:57"><span class="id" title="variable">T</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#r:56"><span class="id" title="variable">r</span></a>)) <a class="idref" href="models.LinCCAL.html#s:60"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#s':61"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#lstep:52"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#5b5e1b088e4e01e3ccd4c298fc9c973b"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s:60"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#e4cd9633ec2d0ee09ebe5d497f8dd196"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#3d8131066c89ab2059835b442d2b114c"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="models.LinCCAL.html#s':61"><span class="id" title="variable">s'</span></a> <a class="idref" href="models.LinCCAL.html#e4cd9633ec2d0ee09ebe5d497f8dd196"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab257"></a><h2 class="section">Correctness</h2>

<div class="paragraph"> </div>

 Based on the constructions above, our ultimate goal is to show
    that no matter what methods are called and how the threads are
    scheduled, there is a way to perform commits such that the
    following invariant is always preserved. That is, every thread
    will eventually produce the result that was matched against the
    overlay specification. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCAL.threadstate_valid" class="idref" href="#LinCCAL.threadstate_valid"><span class="id" title="definition">threadstate_valid</span></a> {<a id="E:63" class="idref" href="#E:63"><span class="id" title="binder">E</span></a> <a id="F:64" class="idref" href="#F:64"><span class="id" title="binder">F</span></a>} (<a id="e:65" class="idref" href="#e:65"><span class="id" title="binder">e</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.threadstate"><span class="id" title="record">threadstate</span></a> <a class="idref" href="models.LinCCAL.html#E:63"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:64"><span class="id" title="variable">F</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="q:66" class="idref" href="#q:66"><span class="id" title="binder">q</span></a> <a id="r:67" class="idref" href="#r:67"><span class="id" title="binder">r</span></a> <a id="R:68" class="idref" href="#R:68"><span class="id" title="binder">R</span></a>, <a class="idref" href="models.LinCCAL.html#e:65"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:66"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#r:67"><span class="id" title="variable">r</span></a>) <a class="idref" href="models.LinCCAL.html#R:68"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#R:68"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#r:67"><span class="id" title="variable">r</span></a>.<br/>

<br/>
</div>

<div class="doc">
Note that if <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCAL.spec_top"><span class="id" title="constructor">spec_top</span></a></span> appears in the underlay specification <span class="inlinecode"><span class="id" title="var">Σ</span></span>,
    there will be no corresponding <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCAL.eaction"><span class="id" title="constructor">eaction</span></a></span> step to take. As a
    result the associated thread will not be scheduled and there are
    no correctness requirements against it at that time. Conversely,
    if <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCAL.spec_top"><span class="id" title="constructor">spec_top</span></a></span> appears in the overlay specification <span class="inlinecode"><span class="id" title="var">Δ</span></span>, there will
    be no way to commit a result at that point in time. 
<div class="paragraph"> </div>

<a id="lab258"></a><h3 class="section">Rechability predicate</h3>

<div class="paragraph"> </div>

 To formulate this criterion, we will use the following helpful
    definitions and properties. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="LinCCAL.star" class="idref" href="#LinCCAL.star"><span class="id" title="abbreviation">star</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Operators.html#clos_refl_trans"><span class="id" title="inductive">clos_refl_trans</span></a> <span class="id" title="var">_</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCAL.reachable" class="idref" href="#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> {<a id="A:69" class="idref" href="#A:69"><span class="id" title="binder">A</span></a>} (<a id="R:70" class="idref" href="#R:70"><span class="id" title="binder">R</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="models.LinCCAL.html#A:69"><span class="id" title="variable">A</span></a>) (<a id="P:71" class="idref" href="#P:71"><span class="id" title="binder">P</span></a> : <a class="idref" href="models.LinCCAL.html#A:69"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="x:72" class="idref" href="#x:72"><span class="id" title="binder">x</span></a> : <a class="idref" href="models.LinCCAL.html#A:69"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="y:73" class="idref" href="#y:73"><span class="id" title="binder">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.star"><span class="id" title="abbreviation">star</span></a> <a class="idref" href="models.LinCCAL.html#R:70"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#x:72"><span class="id" title="variable">x</span></a> <a class="idref" href="models.LinCCAL.html#y:73"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="models.LinCCAL.html#P:71"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#y:73"><span class="id" title="variable">y</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.reachable_base" class="idref" href="#LinCCAL.reachable_base"><span class="id" title="lemma">reachable_base</span></a> {<a id="A:74" class="idref" href="#A:74"><span class="id" title="binder">A</span></a>} (<a id="R:75" class="idref" href="#R:75"><span class="id" title="binder">R</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="models.LinCCAL.html#A:74"><span class="id" title="variable">A</span></a>) (<a id="P:76" class="idref" href="#P:76"><span class="id" title="binder">P</span></a> : <a class="idref" href="models.LinCCAL.html#A:74"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="x:77" class="idref" href="#x:77"><span class="id" title="binder">x</span></a> : <a class="idref" href="models.LinCCAL.html#A:74"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:76"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#x:77"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#R:75"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#P:76"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#x:77"><span class="id" title="variable">x</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.reachable_step" class="idref" href="#LinCCAL.reachable_step"><span class="id" title="lemma">reachable_step</span></a> {<a id="A:78" class="idref" href="#A:78"><span class="id" title="binder">A</span></a>} (<a id="R:79" class="idref" href="#R:79"><span class="id" title="binder">R</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="models.LinCCAL.html#A:78"><span class="id" title="variable">A</span></a>) <a id="P:80" class="idref" href="#P:80"><span class="id" title="binder">P</span></a> <a id="x:81" class="idref" href="#x:81"><span class="id" title="binder">x</span></a> <a id="y:82" class="idref" href="#y:82"><span class="id" title="binder">y</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#R:79"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#P:80"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#y:82"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#R:79"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#x:81"><span class="id" title="variable">x</span></a> <a class="idref" href="models.LinCCAL.html#y:82"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#R:79"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#P:80"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#x:81"><span class="id" title="variable">x</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.reachable_steps" class="idref" href="#LinCCAL.reachable_steps"><span class="id" title="lemma">reachable_steps</span></a> {<a id="A:83" class="idref" href="#A:83"><span class="id" title="binder">A</span></a>} (<a id="R:84" class="idref" href="#R:84"><span class="id" title="binder">R</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="models.LinCCAL.html#A:83"><span class="id" title="variable">A</span></a>) (<a id="P:85" class="idref" href="#P:85"><span class="id" title="binder">P</span></a> : <a class="idref" href="models.LinCCAL.html#A:83"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="x:86" class="idref" href="#x:86"><span class="id" title="binder">x</span></a> <a id="y:87" class="idref" href="#y:87"><span class="id" title="binder">y</span></a> : <a class="idref" href="models.LinCCAL.html#A:83"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#R:84"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#P:85"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#y:87"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.star"><span class="id" title="abbreviation">star</span></a> <a class="idref" href="models.LinCCAL.html#R:84"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#x:86"><span class="id" title="variable">x</span></a> <a class="idref" href="models.LinCCAL.html#y:87"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#R:84"><span class="id" title="variable">R</span></a> <a class="idref" href="models.LinCCAL.html#P:85"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#x:86"><span class="id" title="variable">x</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.lsteps_ind" class="idref" href="#LinCCAL.lsteps_ind"><span class="id" title="lemma">lsteps_ind</span></a> {<a id="E:88" class="idref" href="#E:88"><span class="id" title="binder">E</span></a> <a id="F:89" class="idref" href="#F:89"><span class="id" title="binder">F</span></a>} (<a id="P:90" class="idref" href="#P:90"><span class="id" title="binder">P</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.spec"><span class="id" title="abbreviation">spec</span></a> <a class="idref" href="models.LinCCAL.html#F:89"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.spec"><span class="id" title="abbreviation">spec</span></a> <a class="idref" href="models.LinCCAL.html#E:88"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="Q:91" class="idref" href="#Q:91"><span class="id" title="binder">Q</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.state"><span class="id" title="record">state</span></a> <a class="idref" href="models.LinCCAL.html#E:88"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:89"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="dc64b742468d4b39731028717d2c63a1" class="idref" href="#dc64b742468d4b39731028717d2c63a1"><span class="id" title="binder">Δ</span></a> <a id="v:93" class="idref" href="#v:93"><span class="id" title="binder">v</span></a> <a id="3d39e769ea146080edb14d639bf416a9" class="idref" href="#3d39e769ea146080edb14d639bf416a9"><span class="id" title="binder">Σ</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#Q:91"><span class="id" title="variable">Q</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#dc64b742468d4b39731028717d2c63a1"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#v:93"><span class="id" title="variable">v</span></a> <a class="idref" href="models.LinCCAL.html#3d39e769ea146080edb14d639bf416a9"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:90"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#dc64b742468d4b39731028717d2c63a1"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#v:93"><span class="id" title="variable">v</span></a> <a class="idref" href="models.LinCCAL.html#3d39e769ea146080edb14d639bf416a9"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="t:95" class="idref" href="#t:95"><span class="id" title="binder">t</span></a> <a id="q:96" class="idref" href="#q:96"><span class="id" title="binder">q</span></a> <a id="r:97" class="idref" href="#r:97"><span class="id" title="binder">r</span></a> <a id="T:98" class="idref" href="#T:98"><span class="id" title="binder">T</span></a> <a id="5138f3c5e74ea583232f519c6a2f41c8" class="idref" href="#5138f3c5e74ea583232f519c6a2f41c8"><span class="id" title="binder">Δ</span></a> <a id="6a7dfad966cd1880488be7c08a8fac88" class="idref" href="#6a7dfad966cd1880488be7c08a8fac88"><span class="id" title="binder">Δ'</span></a> <a id="s:101" class="idref" href="#s:101"><span class="id" title="binder">s</span></a> <a id="ab1e0b0f726a60ee3c2011f894309cd3" class="idref" href="#ab1e0b0f726a60ee3c2011f894309cd3"><span class="id" title="binder">Σ</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:95"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s:101"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:96"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:98"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#5138f3c5e74ea583232f519c6a2f41c8"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#t:95"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:96"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_cons"><span class="id" title="constructor">spec_cons</span></a> <a class="idref" href="models.LinCCAL.html#r:97"><span class="id" title="variable">r</span></a> <a class="idref" href="models.LinCCAL.html#6a7dfad966cd1880488be7c08a8fac88"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:90"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#6a7dfad966cd1880488be7c08a8fac88"><span class="id" title="variable">Δ'</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:95"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:96"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:98"><span class="id" title="variable">T</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#r:97"><span class="id" title="variable">r</span></a>)) <a class="idref" href="models.LinCCAL.html#s:101"><span class="id" title="variable">s</span></a>) <a class="idref" href="models.LinCCAL.html#ab1e0b0f726a60ee3c2011f894309cd3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:90"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#5138f3c5e74ea583232f519c6a2f41c8"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s:101"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#ab1e0b0f726a60ee3c2011f894309cd3"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="2b083f1a6a9f60e8d936e8bcb713bef2" class="idref" href="#2b083f1a6a9f60e8d936e8bcb713bef2"><span class="id" title="binder">Δ</span></a> <a id="v:104" class="idref" href="#v:104"><span class="id" title="binder">v</span></a> <a id="1ff6ac9c7b5724ab259a0ddfc84e9a1e" class="idref" href="#1ff6ac9c7b5724ab259a0ddfc84e9a1e"><span class="id" title="binder">Σ</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.lstep"><span class="id" title="inductive">lstep</span></a> <a class="idref" href="models.LinCCAL.html#Q:91"><span class="id" title="variable">Q</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#2b083f1a6a9f60e8d936e8bcb713bef2"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#v:104"><span class="id" title="variable">v</span></a> <a class="idref" href="models.LinCCAL.html#1ff6ac9c7b5724ab259a0ddfc84e9a1e"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:90"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#2b083f1a6a9f60e8d936e8bcb713bef2"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#v:104"><span class="id" title="variable">v</span></a> <a class="idref" href="models.LinCCAL.html#1ff6ac9c7b5724ab259a0ddfc84e9a1e"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab259"></a><h3 class="section">Coinductive property</h3>

<div class="paragraph"> </div>

 The overall correctness property can be given as follows. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">CoInductive</span> <a id="LinCCAL.correct" class="idref" href="#LinCCAL.correct"><span class="id" title="record">correct</span></a> {<a id="E:108" class="idref" href="#E:108"><span class="id" title="binder">E</span></a> <a id="F:109" class="idref" href="#F:109"><span class="id" title="binder">F</span></a>} (<a id="M:110" class="idref" href="#M:110"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:108"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:109"><span class="id" title="variable">F</span></a>) (<a id="s:111" class="idref" href="#s:111"><span class="id" title="binder">s</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.state"><span class="id" title="record">state</span></a> <a class="idref" href="models.LinCCAL.html#E:108"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:109"><span class="id" title="variable">F</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.correct_valid" class="idref" href="#LinCCAL.correct_valid"><span class="id" title="projection">correct_valid</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="i:113" class="idref" href="#i:113"><span class="id" title="binder">i</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCAL.threadstate_valid"><span class="id" title="definition">threadstate_valid</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:113"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s:111"><span class="id" title="variable">s</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.correct_next" class="idref" href="#LinCCAL.correct_next"><span class="id" title="projection">correct_next</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="s':115" class="idref" href="#s':115"><span class="id" title="binder">s'</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCAL.estep"><span class="id" title="inductive">estep</span></a> <a class="idref" href="models.LinCCAL.html#M:110"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#s:111"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#s':115"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#correct:112"><span class="id" title="inductive">correct</span></a> <a class="idref" href="models.LinCCAL.html#M:110"><span class="id" title="variable">M</span></a>) <a class="idref" href="models.LinCCAL.html#s':115"><span class="id" title="variable">s'</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCAL.cal" class="idref" href="#LinCCAL.cal"><span class="id" title="definition">cal</span></a> {<a id="E:117" class="idref" href="#E:117"><span class="id" title="binder">E</span></a> <a id="F:118" class="idref" href="#F:118"><span class="id" title="binder">F</span></a>} <a id="a24658b2adcc01e6c41a8c2c40c17df4" class="idref" href="#a24658b2adcc01e6c41a8c2c40c17df4"><span class="id" title="binder">Σ</span></a> (<a id="M:120" class="idref" href="#M:120"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:117"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:118"><span class="id" title="variable">F</span></a>) <a id="e50a66ed72ab25cb744b64f121d7df7f" class="idref" href="#e50a66ed72ab25cb744b64f121d7df7f"><span class="id" title="binder">Δ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#M:120"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#e50a66ed72ab25cb744b64f121d7df7f"><span class="id" title="variable">Δ</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.empty"><span class="id" title="definition">TMap.empty</span></a> <span class="id" title="var">_</span>) <a class="idref" href="models.LinCCAL.html#a24658b2adcc01e6c41a8c2c40c17df4"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab260"></a><h3 class="section">Proof method</h3>

<div class="paragraph"> </div>

 To establish correctness, it suffices to show that there is
    a correctness invariant with the following properties. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="LinCCAL.correctness_invariant" class="idref" href="#LinCCAL.correctness_invariant"><span class="id" title="record">correctness_invariant</span></a> {<a id="E:122" class="idref" href="#E:122"><span class="id" title="binder">E</span></a> <a id="F:123" class="idref" href="#F:123"><span class="id" title="binder">F</span></a>} (<a id="M:124" class="idref" href="#M:124"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:122"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:123"><span class="id" title="variable">F</span></a>) (<a id="P:125" class="idref" href="#P:125"><span class="id" title="binder">P</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.state"><span class="id" title="record">state</span></a> <a class="idref" href="models.LinCCAL.html#E:122"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:123"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.ci_valid" class="idref" href="#LinCCAL.ci_valid"><span class="id" title="projection">ci_valid</span></a> <a id="s:127" class="idref" href="#s:127"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:125"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#s:127"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="i:128" class="idref" href="#i:128"><span class="id" title="binder">i</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCAL.threadstate_valid"><span class="id" title="definition">threadstate_valid</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:128"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s:127"><span class="id" title="variable">s</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.ci_next" class="idref" href="#LinCCAL.ci_next"><span class="id" title="projection">ci_next</span></a> <a id="s:130" class="idref" href="#s:130"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#P:125"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#s:130"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="s':131" class="idref" href="#s':131"><span class="id" title="binder">s'</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCAL.estep"><span class="id" title="inductive">estep</span></a> <a class="idref" href="models.LinCCAL.html#M:124"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#s:130"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#s':131"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.lstep"><span class="id" title="inductive">lstep</span></a> <a class="idref" href="models.LinCCAL.html#P:125"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#s':131"><span class="id" title="variable">s'</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.correct_ci" class="idref" href="#LinCCAL.correct_ci"><span class="id" title="lemma">correct_ci</span></a> {<a id="E:133" class="idref" href="#E:133"><span class="id" title="binder">E</span></a> <a id="F:134" class="idref" href="#F:134"><span class="id" title="binder">F</span></a>} (<a id="M:135" class="idref" href="#M:135"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:133"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:134"><span class="id" title="variable">F</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.correctness_invariant"><span class="id" title="record">correctness_invariant</span></a> <a class="idref" href="models.LinCCAL.html#M:135"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#M:135"><span class="id" title="variable">M</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.correctness_invariant_sound" class="idref" href="#LinCCAL.correctness_invariant_sound"><span class="id" title="lemma">correctness_invariant_sound</span></a> {<a id="E:136" class="idref" href="#E:136"><span class="id" title="binder">E</span></a> <a id="F:137" class="idref" href="#F:137"><span class="id" title="binder">F</span></a>} (<a id="M:138" class="idref" href="#M:138"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:136"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:137"><span class="id" title="variable">F</span></a>) <a id="P:139" class="idref" href="#P:139"><span class="id" title="binder">P</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.correctness_invariant"><span class="id" title="record">correctness_invariant</span></a> <a class="idref" href="models.LinCCAL.html#M:138"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#P:139"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="s:140" class="idref" href="#s:140"><span class="id" title="binder">s</span></a>, <a class="idref" href="models.LinCCAL.html#P:139"><span class="id" title="variable">P</span></a> <a class="idref" href="models.LinCCAL.html#s:140"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#M:138"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#s:140"><span class="id" title="variable">s</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab261"></a><h2 class="section">Identity</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCAL.id_linstate" class="idref" href="#LinCCAL.id_linstate"><span class="id" title="inductive">id_linstate</span></a> {<a id="E:141" class="idref" href="#E:141"><span class="id" title="binder">E</span></a>} : <a class="idref" href="models.LinCCAL.html#LinCCAL.threadstate"><span class="id" title="record">threadstate</span></a> <span class="id" title="var">E</span> <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.id_invoked" class="idref" href="#LinCCAL.id_invoked"><span class="id" title="constructor">id_invoked</span></a> <a id="q:144" class="idref" href="#q:144"><span class="id" title="binder">q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#id_linstate:142"><span class="id" title="inductive">id_linstate</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:144"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#q:144"><span class="id" title="variable">q</span></a> <a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.id_returned" class="idref" href="#LinCCAL.id_returned"><span class="id" title="constructor">id_returned</span></a> <a id="q:145" class="idref" href="#q:145"><span class="id" title="binder">q</span></a> <a id="r:146" class="idref" href="#r:146"><span class="id" title="binder">r</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#id_linstate:142"><span class="id" title="inductive">id_linstate</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:145"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#r:146"><span class="id" title="variable">r</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#r:146"><span class="id" title="variable">r</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCAL.id_state" class="idref" href="#LinCCAL.id_state"><span class="id" title="inductive">id_state</span></a> {<a id="E:147" class="idref" href="#E:147"><span class="id" title="binder">E</span></a>} : <a class="idref" href="models.LinCCAL.html#LinCCAL.state"><span class="id" title="record">state</span></a> <span class="id" title="var">E</span> <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.id_state_intro" class="idref" href="#LinCCAL.id_state_intro"><span class="id" title="constructor">id_state_intro</span></a> <a id="16420a3591c144f5a991e7835e9f838c" class="idref" href="#16420a3591c144f5a991e7835e9f838c"><span class="id" title="binder">Σ</span></a> (<a id="u:151" class="idref" href="#u:151"><span class="id" title="binder">u</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.tmap"><span class="id" title="abbreviation">tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.threadstate"><span class="id" title="record">threadstate</span></a> <a class="idref" href="models.LinCCAL.html#E:147"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#E:147"><span class="id" title="variable">E</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="t:152" class="idref" href="#t:152"><span class="id" title="binder">t</span></a> <a id="s:153" class="idref" href="#s:153"><span class="id" title="binder">s</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:152"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#u:151"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#s:153"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.id_linstate"><span class="id" title="inductive">id_linstate</span></a> <a class="idref" href="models.LinCCAL.html#s:153"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#id_state:148"><span class="id" title="inductive">id_state</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#16420a3591c144f5a991e7835e9f838c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#u:151"><span class="id" title="variable">u</span></a> <a class="idref" href="models.LinCCAL.html#16420a3591c144f5a991e7835e9f838c"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.id_state_ci" class="idref" href="#LinCCAL.id_state_ci"><span class="id" title="lemma">id_state_ci</span></a> <a id="E:154" class="idref" href="#E:154"><span class="id" title="binder">E</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.correctness_invariant"><span class="id" title="record">correctness_invariant</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.id"><span class="id" title="definition">Reg.id</span></a> <a class="idref" href="models.LinCCAL.html#E:154"><span class="id" title="variable">E</span></a>) <a class="idref" href="models.LinCCAL.html#LinCCAL.id_state"><span class="id" title="inductive">id_state</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="LinCCAL.id_cal" class="idref" href="#LinCCAL.id_cal"><span class="id" title="lemma">id_cal</span></a> {<a id="E:155" class="idref" href="#E:155"><span class="id" title="binder">E</span></a>} (<a id="4d868aba64cc2c334790fc00a245c2a9" class="idref" href="#4d868aba64cc2c334790fc00a245c2a9"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.spec"><span class="id" title="abbreviation">spec</span></a> <a class="idref" href="models.LinCCAL.html#E:155"><span class="id" title="variable">E</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.cal"><span class="id" title="definition">cal</span></a> <a class="idref" href="models.LinCCAL.html#4d868aba64cc2c334790fc00a245c2a9"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.id"><span class="id" title="definition">Reg.id</span></a> <a class="idref" href="models.LinCCAL.html#E:155"><span class="id" title="variable">E</span></a>) <a class="idref" href="models.LinCCAL.html#4d868aba64cc2c334790fc00a245c2a9"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab262"></a><h2 class="section">Composition</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="53826942f14f09d9f9c5e2b1b56ba6bc" class="idref" href="#53826942f14f09d9f9c5e2b1b56ba6bc"><span class="id" title="notation">&quot;</span></a>t &gt;&gt;= f" := (<a class="idref" href="models.EffectSignatures.html#Sig.subst"><span class="id" title="definition">Sig.subst</span></a> <span class="id" title="var">f</span> <span class="id" title="var">t</span>) (<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="f54691b93c886cac08382070817792ff" class="idref" href="#f54691b93c886cac08382070817792ff"><span class="id" title="notation">&quot;</span></a>x &lt;- t ; f" := (<span class="id" title="var">t</span> <a class="idref" href="models.LinCCAL.html#53826942f14f09d9f9c5e2b1b56ba6bc"><span class="id" title="notation">&gt;&gt;=</span></a> <span class="id" title="keyword">fun</span> <a id="x:157" class="idref" href="#x:157"><span class="id" title="binder">x</span></a> ⇒ <span class="id" title="var">f</span>) (<span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 60).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="LinCCAL.COMPOSE" class="idref" href="#LinCCAL.COMPOSE"><span class="id" title="section">COMPOSE</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="E:158" class="idref" href="#E:158"><span class="id" title="binder">E</span></a> <a id="F:159" class="idref" href="#F:159"><span class="id" title="binder">F</span></a> <a id="G:160" class="idref" href="#G:160"><span class="id" title="binder">G</span></a>} (<a id="M:161" class="idref" href="#M:161"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#F:159"><span class="id" title="variable">F</span></a> <a class="idref" href="models.LinCCAL.html#G:160"><span class="id" title="variable">G</span></a>) (<a id="N:162" class="idref" href="#N:162"><span class="id" title="binder">N</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> <a class="idref" href="models.LinCCAL.html#E:158"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#F:159"><span class="id" title="variable">F</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab263"></a><h3 class="section">Per-thread invariant</h3>

<div class="paragraph"> </div>

 When <span class="inlinecode"><span class="id" title="var">M</span></span> invokes a method <span class="inlinecode"><a class="idref" href="interfaces.Limits.html#D2.m"><span class="id" title="definition">m</span></a></span> of <span class="inlinecode"><a class="idref" href="examples.CAL.html#N"><span class="id" title="axiom">N</span></a></span> with continuation <span class="inlinecode"><span class="id" title="var">k</span></span>,
      we distinguish between two phases:
<ul class="doclist">
<li> before <span class="inlinecode"><a class="idref" href="examples.CAL.html#N"><span class="id" title="axiom">N</span></a></span> commits a result, the action is still pending in <span class="inlinecode"><span class="id" title="var">M</span></span>

</li>
<li> afterwards, <span class="inlinecode"><span class="id" title="var">M</span></span> progresses and is now waiting on the next action
           (or return), which will be carried out after <span class="inlinecode"><a class="idref" href="examples.CAL.html#N"><span class="id" title="axiom">N</span></a></span> actually returns.

</li>
</ul>
      In order to express this, we introduce the following auxiliary
      computation, which computes the current program of <span class="inlinecode"><span class="id" title="var">M</span></span> based on
      the commit state <span class="inlinecode"><a class="idref" href="models.IntStrat.html#VCOMP_NOT_ASSOC.S"><span class="id" title="definition">S</span></a></span> of the <span class="inlinecode"><a class="idref" href="examples.CAL.html#N"><span class="id" title="axiom">N</span></a></span> component. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCAL.pending_program" class="idref" href="#LinCCAL.pending_program"><span class="id" title="definition">pending_program</span></a> (<a id="q:163" class="idref" href="#q:163"><span class="id" title="binder">q</span></a>: <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.G"><span class="id" title="variable">G</span></a>) <a id="m:164" class="idref" href="#m:164"><span class="id" title="binder">m</span></a> <a id="k:165" class="idref" href="#k:165"><span class="id" title="binder">k</span></a> <a id="S:166" class="idref" href="#S:166"><span class="id" title="binder">S</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.F"><span class="id" title="variable">F</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.LinCCAL.html#q:163"><span class="id" title="variable">q</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#S:166"><span class="id" title="variable">S</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:164"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#k:165"><span class="id" title="variable">k</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">n</span> ⇒ <a class="idref" href="models.LinCCAL.html#k:165"><span class="id" title="variable">k</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The predicate we use to formulate the composition invariant
      will also cover intermediate states where internal execution
      is ongoing. This is the case when a thread has a <span class="inlinecode"><span class="id" title="var">Sig.cons</span></span>
      program in <span class="inlinecode"><span class="id" title="var">M</span></span> while <span class="inlinecode"><a class="idref" href="examples.CAL.html#N"><span class="id" title="axiom">N</span></a></span> is waiting for the next query,
      or when <span class="inlinecode"><a class="idref" href="examples.CAL.html#N"><span class="id" title="axiom">N</span></a></span> has a <span class="inlinecode"><span class="id" title="var">Sig.var</span></span> program. We will use the following
      constructions to manage this. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCAL.comp_phase" class="idref" href="#LinCCAL.comp_phase"><span class="id" title="inductive">comp_phase</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.comp_ready" class="idref" href="#LinCCAL.comp_ready"><span class="id" title="constructor">comp_ready</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.comp_running" class="idref" href="#LinCCAL.comp_running"><span class="id" title="constructor">comp_running</span></a> (<a id="i:170" class="idref" href="#i:170"><span class="id" title="binder">i</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.tid"><span class="id" title="abbreviation">tid</span></a>) (<a id="q:171" class="idref" href="#q:171"><span class="id" title="binder">q</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.G"><span class="id" title="variable">G</span></a>) (<a id="T:172" class="idref" href="#T:172"><span class="id" title="binder">T</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.F"><span class="id" title="variable">F</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.LinCCAL.html#q:171"><span class="id" title="variable">q</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCAL.run_check_l" class="idref" href="#LinCCAL.run_check_l"><span class="id" title="inductive">run_check_l</span></a> <a id="i:173" class="idref" href="#i:173"><span class="id" title="binder">i</span></a> <a id="q:174" class="idref" href="#q:174"><span class="id" title="binder">q</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.F"><span class="id" title="variable">F</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <span class="id" title="var">q</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.comp_phase"><span class="id" title="inductive">comp_phase</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.run_check_l_cons" class="idref" href="#LinCCAL.run_check_l_cons"><span class="id" title="constructor">run_check_l_cons</span></a> <a id="m:177" class="idref" href="#m:177"><span class="id" title="binder">m</span></a> <a id="mk:178" class="idref" href="#mk:178"><span class="id" title="binder">mk</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#run_check_l:175"><span class="id" title="inductive">run_check_l</span></a> <a class="idref" href="models.LinCCAL.html#i:173"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:174"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:177"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:178"><span class="id" title="variable">mk</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#i:173"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:174"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:177"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:178"><span class="id" title="variable">mk</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.run_check_l_var" class="idref" href="#LinCCAL.run_check_l_var"><span class="id" title="constructor">run_check_l_var</span></a> <a id="w:179" class="idref" href="#w:179"><span class="id" title="binder">w</span></a> <a id="r:180" class="idref" href="#r:180"><span class="id" title="binder">r</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#run_check_l:175"><span class="id" title="inductive">run_check_l</span></a> <a class="idref" href="models.LinCCAL.html#i:173"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:174"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#r:180"><span class="id" title="variable">r</span></a>) <a class="idref" href="models.LinCCAL.html#w:179"><span class="id" title="variable">w</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCAL.run_check_r" class="idref" href="#LinCCAL.run_check_r"><span class="id" title="inductive">run_check_r</span></a> <a id="i:181" class="idref" href="#i:181"><span class="id" title="binder">i</span></a> <a id="q:182" class="idref" href="#q:182"><span class="id" title="binder">q</span></a> <a id="m:183" class="idref" href="#m:183"><span class="id" title="binder">m</span></a> <a id="mk:184" class="idref" href="#mk:184"><span class="id" title="binder">mk</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.E"><span class="id" title="variable">E</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <span class="id" title="var">m</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.run_check_r_cons" class="idref" href="#LinCCAL.run_check_r_cons"><span class="id" title="constructor">run_check_r_cons</span></a> <a id="u:187" class="idref" href="#u:187"><span class="id" title="binder">u</span></a> <a id="uk:188" class="idref" href="#uk:188"><span class="id" title="binder">uk</span></a> <a id="w:189" class="idref" href="#w:189"><span class="id" title="binder">w</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#run_check_r:185"><span class="id" title="inductive">run_check_r</span></a> <a class="idref" href="models.LinCCAL.html#i:181"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:182"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#m:183"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:184"><span class="id" title="variable">mk</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#u:187"><span class="id" title="variable">u</span></a> <a class="idref" href="models.LinCCAL.html#uk:188"><span class="id" title="variable">uk</span></a>) <a class="idref" href="models.LinCCAL.html#w:189"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.run_check_r_var" class="idref" href="#LinCCAL.run_check_r_var"><span class="id" title="constructor">run_check_r_var</span></a> <a id="n:190" class="idref" href="#n:190"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#run_check_r:185"><span class="id" title="inductive">run_check_r</span></a> <a class="idref" href="models.LinCCAL.html#i:181"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:182"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#m:183"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:184"><span class="id" title="variable">mk</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#n:190"><span class="id" title="variable">n</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#i:181"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:182"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:183"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:184"><span class="id" title="variable">mk</span></a>)).<br/>

<br/>
</div>

<div class="doc">
The predicate <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCAL.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a></span> <span class="inlinecode"><span class="id" title="var">i</span></span> <span class="inlinecode"><span class="id" title="var">w</span></span> <span class="inlinecode"><span class="id" title="var">s12</span></span> <span class="inlinecode"><span class="id" title="var">s1</span></span> <span class="inlinecode"><span class="id" title="var">s2</span></span> relates
      the composite state <span class="inlinecode"><span class="id" title="var">s12</span></span> for thread <span class="inlinecode"><span class="id" title="var">i</span></span> with the component
      states <span class="inlinecode"><span class="id" title="var">s1</span></span> and <span class="inlinecode"><span class="id" title="var">s2</span></span>. The parameter <span class="inlinecode"><span class="id" title="var">w</span></span> optionally allows
      a thread to be running, so that unprocessed internal
      interactions could still be present if that thread matches <span class="inlinecode"><span class="id" title="var">i</span></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCAL.comp_threadstate" class="idref" href="#LinCCAL.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a> <a id="i:191" class="idref" href="#i:191"><span class="id" title="binder">i</span></a> (<a id="w:192" class="idref" href="#w:192"><span class="id" title="binder">w</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.comp_phase"><span class="id" title="inductive">comp_phase</span></a>) : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;thread&nbsp;is&nbsp;currently&nbsp;waiting&nbsp;for&nbsp;the&nbsp;next&nbsp;query.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.cts_ready" class="idref" href="#LinCCAL.cts_ready"><span class="id" title="constructor">cts_ready</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#comp_threadstate:193"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:191"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#w:192"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Query&nbsp;<span class="inlinecode"><span class="id" title="var">q</span></span>&nbsp;is&nbsp;being&nbsp;executed&nbsp;by&nbsp;<span class="inlinecode"><span class="id" title="var">M</span></span>&nbsp;with&nbsp;the&nbsp;remaning&nbsp;program&nbsp;<span class="inlinecode"><span class="id" title="var">T</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">N</span></span>&nbsp;is&nbsp;not&nbsp;running.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.cts_left" class="idref" href="#LinCCAL.cts_left"><span class="id" title="constructor">cts_left</span></a> <a id="q:195" class="idref" href="#q:195"><span class="id" title="binder">q</span></a> <a id="T:196" class="idref" href="#T:196"><span class="id" title="binder">T</span></a> <a id="R:197" class="idref" href="#R:197"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.run_check_l"><span class="id" title="inductive">run_check_l</span></a> <a class="idref" href="models.LinCCAL.html#i:191"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:195"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:196"><span class="id" title="variable">T</span></a> <a class="idref" href="models.LinCCAL.html#w:192"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#comp_threadstate:193"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:191"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#w:192"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:195"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.transform"><span class="id" title="definition">Reg.transform</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.N"><span class="id" title="variable">N</span></a> <a class="idref" href="models.LinCCAL.html#T:196"><span class="id" title="variable">T</span></a>) <a class="idref" href="models.LinCCAL.html#R:197"><span class="id" title="variable">R</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:195"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:196"><span class="id" title="variable">T</span></a> <a class="idref" href="models.LinCCAL.html#R:197"><span class="id" title="variable">R</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Query&nbsp;<span class="inlinecode"><span class="id" title="var">q</span></span>&nbsp;is&nbsp;begin&nbsp;executed&nbsp;by&nbsp;<span class="inlinecode"><span class="id" title="var">M</span></span>,&nbsp;which&nbsp;has&nbsp;invoked&nbsp;<span class="inlinecode"><span class="id" title="var">N</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;query&nbsp;<span class="inlinecode"><span class="id" title="var">m</span></span>.&nbsp;Once&nbsp;the&nbsp;remaining&nbsp;program&nbsp;<span class="inlinecode"><span class="id" title="var">U</span></span>&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">N</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;a&nbsp;result&nbsp;<span class="inlinecode"><span class="id" title="var">n</span></span>,&nbsp;the&nbsp;execution&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">M</span></span>&nbsp;is&nbsp;resumed<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;according&nbsp;to&nbsp;<span class="inlinecode"><span class="id" title="var">mk</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCAL.cts_right" class="idref" href="#LinCCAL.cts_right"><span class="id" title="constructor">cts_right</span></a> <a id="q:198" class="idref" href="#q:198"><span class="id" title="binder">q</span></a> <a id="m:199" class="idref" href="#m:199"><span class="id" title="binder">m</span></a> <a id="U:200" class="idref" href="#U:200"><span class="id" title="binder">U</span></a> <a id="Q:201" class="idref" href="#Q:201"><span class="id" title="binder">Q</span></a> <a id="mk:202" class="idref" href="#mk:202"><span class="id" title="binder">mk</span></a> <a id="R:203" class="idref" href="#R:203"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.run_check_r"><span class="id" title="inductive">run_check_r</span></a> <a class="idref" href="models.LinCCAL.html#i:191"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#q:198"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#m:199"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:202"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#U:200"><span class="id" title="variable">U</span></a> <a class="idref" href="models.LinCCAL.html#w:192"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#comp_threadstate:193"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:191"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#w:192"><span class="id" title="variable">w</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:198"><span class="id" title="variable">q</span></a> (<a id="n:204" class="idref" href="#n:204"><span class="id" title="binder">n</span></a> <a class="idref" href="models.LinCCAL.html#f54691b93c886cac08382070817792ff"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="models.LinCCAL.html#U:200"><span class="id" title="variable">U</span></a><a class="idref" href="models.LinCCAL.html#f54691b93c886cac08382070817792ff"><span class="id" title="notation">;</span></a> <a class="idref" href="models.EffectSignatures.html#Reg.transform"><span class="id" title="definition">Reg.transform</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.N"><span class="id" title="variable">N</span></a> (<a class="idref" href="models.LinCCAL.html#mk:202"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#n:204"><span class="id" title="variable">n</span></a>)) <a class="idref" href="models.LinCCAL.html#R:203"><span class="id" title="variable">R</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:198"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.pending_program"><span class="id" title="definition">pending_program</span></a> <a class="idref" href="models.LinCCAL.html#q:198"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#m:199"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:202"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#Q:201"><span class="id" title="variable">Q</span></a>) <a class="idref" href="models.LinCCAL.html#R:203"><span class="id" title="variable">R</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:199"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#U:200"><span class="id" title="variable">U</span></a> <a class="idref" href="models.LinCCAL.html#Q:201"><span class="id" title="variable">Q</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_threadstate_valid" class="idref" href="#LinCCAL.comp_threadstate_valid"><span class="id" title="lemma">comp_threadstate_valid</span></a> <a id="i:205" class="idref" href="#i:205"><span class="id" title="binder">i</span></a> <a id="e12:206" class="idref" href="#e12:206"><span class="id" title="binder">e12</span></a> <a id="e1:207" class="idref" href="#e1:207"><span class="id" title="binder">e1</span></a> <a id="e2:208" class="idref" href="#e2:208"><span class="id" title="binder">e2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:205"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.comp_ready"><span class="id" title="constructor">comp_ready</span></a> <a class="idref" href="models.LinCCAL.html#e12:206"><span class="id" title="variable">e12</span></a> <a class="idref" href="models.LinCCAL.html#e1:207"><span class="id" title="variable">e1</span></a> <a class="idref" href="models.LinCCAL.html#e2:208"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.threadstate_valid"><span class="id" title="definition">threadstate_valid</span></a> <a class="idref" href="models.LinCCAL.html#e1:207"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.threadstate_valid"><span class="id" title="definition">threadstate_valid</span></a> <a class="idref" href="models.LinCCAL.html#e2:208"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.threadstate_valid"><span class="id" title="definition">threadstate_valid</span></a> <a class="idref" href="models.LinCCAL.html#e12:206"><span class="id" title="variable">e12</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_threadstate_o" class="idref" href="#LinCCAL.comp_threadstate_o"><span class="id" title="lemma">comp_threadstate_o</span></a> <a id="i:209" class="idref" href="#i:209"><span class="id" title="binder">i</span></a> <a id="j:210" class="idref" href="#j:210"><span class="id" title="binder">j</span></a> <a id="q:211" class="idref" href="#q:211"><span class="id" title="binder">q</span></a> <a id="T:212" class="idref" href="#T:212"><span class="id" title="binder">T</span></a> <a id="w:213" class="idref" href="#w:213"><span class="id" title="binder">w</span></a> <a id="s12:214" class="idref" href="#s12:214"><span class="id" title="binder">s12</span></a> <a id="s1:215" class="idref" href="#s1:215"><span class="id" title="binder">s1</span></a> <a id="s2:216" class="idref" href="#s2:216"><span class="id" title="binder">s2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:209"><span class="id" title="variable">i</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#j:210"><span class="id" title="variable">j</span></a> <a class="idref" href="models.LinCCAL.html#q:211"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:212"><span class="id" title="variable">T</span></a>) <a class="idref" href="models.LinCCAL.html#s12:214"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:215"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:216"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#i:209"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="models.LinCCAL.html#j:210"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:209"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#w:213"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:214"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:215"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:216"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab264"></a><h3 class="section">Global state invariant</h3>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCAL.comp_tmap" class="idref" href="#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a id="w:217" class="idref" href="#w:217"><span class="id" title="binder">w</span></a> (<a id="s12:218" class="idref" href="#s12:218"><span class="id" title="binder">s12</span></a> <a id="s1:219" class="idref" href="#s1:219"><span class="id" title="binder">s1</span></a> <a id="s2:220" class="idref" href="#s2:220"><span class="id" title="binder">s2</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.tmap"><span class="id" title="abbreviation">tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.threadstate"><span class="id" title="record">threadstate</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="i:221" class="idref" href="#i:221"><span class="id" title="binder">i</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:221"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#w:217"><span class="id" title="variable">w</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:221"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s12:218"><span class="id" title="variable">s12</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:221"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s1:219"><span class="id" title="variable">s1</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:221"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s2:220"><span class="id" title="variable">s2</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_tmap_convert" class="idref" href="#LinCCAL.comp_tmap_convert"><span class="id" title="lemma">comp_tmap_convert</span></a> <a id="t:222" class="idref" href="#t:222"><span class="id" title="binder">t</span></a> <a id="q:223" class="idref" href="#q:223"><span class="id" title="binder">q</span></a> <a id="T:224" class="idref" href="#T:224"><span class="id" title="binder">T</span></a> <a id="w:225" class="idref" href="#w:225"><span class="id" title="binder">w</span></a> <a id="s12:226" class="idref" href="#s12:226"><span class="id" title="binder">s12</span></a> <a id="s1:227" class="idref" href="#s1:227"><span class="id" title="binder">s1</span></a> <a id="s2:228" class="idref" href="#s2:228"><span class="id" title="binder">s2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:222"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:223"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:224"><span class="id" title="variable">T</span></a>) <a class="idref" href="models.LinCCAL.html#s12:226"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:227"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:228"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#t:222"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#w:225"><span class="id" title="variable">w</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:222"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s12:226"><span class="id" title="variable">s12</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:222"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:227"><span class="id" title="variable">s1</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:222"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:228"><span class="id" title="variable">s2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:225"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:226"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:227"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:228"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
</div>

<div class="doc">
The invariant is preserved by environment steps. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_tmap_invoke_l" class="idref" href="#LinCCAL.comp_tmap_invoke_l"><span class="id" title="lemma">comp_tmap_invoke_l</span></a> <a id="s12:229" class="idref" href="#s12:229"><span class="id" title="binder">s12</span></a> <a id="s1:230" class="idref" href="#s1:230"><span class="id" title="binder">s1</span></a> <a id="s2:231" class="idref" href="#s2:231"><span class="id" title="binder">s2</span></a> <a id="t:232" class="idref" href="#t:232"><span class="id" title="binder">t</span></a> <a id="q:233" class="idref" href="#q:233"><span class="id" title="binder">q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:232"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:230"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.comp_ready"><span class="id" title="constructor">comp_ready</span></a> <a class="idref" href="models.LinCCAL.html#s12:229"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:230"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:231"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:232"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:233"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.M"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#q:233"><span class="id" title="variable">q</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="models.LinCCAL.html#LinCCAL.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:232"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:233"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.Op.compose"><span class="id" title="definition">Reg.Op.compose</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.M"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.N"><span class="id" title="variable">N</span></a> <a class="idref" href="models.LinCCAL.html#q:233"><span class="id" title="variable">q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="models.LinCCAL.html#s12:229"><span class="id" title="variable">s12</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="models.LinCCAL.html#LinCCAL.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:232"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:233"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.M"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#q:233"><span class="id" title="variable">q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="models.LinCCAL.html#s1:230"><span class="id" title="variable">s1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#s2:231"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_tmap_action_l" class="idref" href="#LinCCAL.comp_tmap_action_l"><span class="id" title="lemma">comp_tmap_action_l</span></a> <a id="w:234" class="idref" href="#w:234"><span class="id" title="binder">w</span></a> <a id="t:235" class="idref" href="#t:235"><span class="id" title="binder">t</span></a> <a id="q:236" class="idref" href="#q:236"><span class="id" title="binder">q</span></a> <a id="m:237" class="idref" href="#m:237"><span class="id" title="binder">m</span></a> <a id="n:238" class="idref" href="#n:238"><span class="id" title="binder">n</span></a> <a id="mk:239" class="idref" href="#mk:239"><span class="id" title="binder">mk</span></a> <a id="U:240" class="idref" href="#U:240"><span class="id" title="binder">U</span></a> <a id="R:241" class="idref" href="#R:241"><span class="id" title="binder">R</span></a> <a id="s12:242" class="idref" href="#s12:242"><span class="id" title="binder">s12</span></a> <a id="s1:243" class="idref" href="#s1:243"><span class="id" title="binder">s1</span></a> <a id="s2:244" class="idref" href="#s2:244"><span class="id" title="binder">s2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:235"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:243"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:236"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:237"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:239"><span class="id" title="variable">mk</span></a>) <a class="idref" href="models.LinCCAL.html#R:241"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:235"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:244"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:237"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#U:240"><span class="id" title="variable">U</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:234"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:242"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:243"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:244"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:234"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:242"><span class="id" title="variable">s12</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:235"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:236"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#mk:239"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#n:238"><span class="id" title="variable">n</span></a>) <a class="idref" href="models.LinCCAL.html#R:241"><span class="id" title="variable">R</span></a>) <a class="idref" href="models.LinCCAL.html#s1:243"><span class="id" title="variable">s1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="models.LinCCAL.html#LinCCAL.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:235"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:237"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#U:240"><span class="id" title="variable">U</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#n:238"><span class="id" title="variable">n</span></a>)) <a class="idref" href="models.LinCCAL.html#s2:244"><span class="id" title="variable">s2</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_tmap_return_l" class="idref" href="#LinCCAL.comp_tmap_return_l"><span class="id" title="lemma">comp_tmap_return_l</span></a> <a id="w:245" class="idref" href="#w:245"><span class="id" title="binder">w</span></a> <a id="t:246" class="idref" href="#t:246"><span class="id" title="binder">t</span></a> <a id="q:247" class="idref" href="#q:247"><span class="id" title="binder">q</span></a> <a id="r:248" class="idref" href="#r:248"><span class="id" title="binder">r</span></a> <a id="s12:249" class="idref" href="#s12:249"><span class="id" title="binder">s12</span></a> <a id="s1:250" class="idref" href="#s1:250"><span class="id" title="binder">s1</span></a> <a id="s2:251" class="idref" href="#s2:251"><span class="id" title="binder">s2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:246"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:250"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:247"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#r:248"><span class="id" title="variable">r</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#r:248"><span class="id" title="variable">r</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:246"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:251"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:245"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:249"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:250"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:251"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:245"><span class="id" title="variable">w</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.remove"><span class="id" title="definition">TMap.remove</span></a> <a class="idref" href="models.LinCCAL.html#t:246"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s12:249"><span class="id" title="variable">s12</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.remove"><span class="id" title="definition">TMap.remove</span></a> <a class="idref" href="models.LinCCAL.html#t:246"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:250"><span class="id" title="variable">s1</span></a>) <a class="idref" href="models.LinCCAL.html#s2:251"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_tmap_invoke_r" class="idref" href="#LinCCAL.comp_tmap_invoke_r"><span class="id" title="lemma">comp_tmap_invoke_r</span></a> <a id="s12:252" class="idref" href="#s12:252"><span class="id" title="binder">s12</span></a> <a id="s1:253" class="idref" href="#s1:253"><span class="id" title="binder">s1</span></a> <a id="s2:254" class="idref" href="#s2:254"><span class="id" title="binder">s2</span></a> <a id="t:255" class="idref" href="#t:255"><span class="id" title="binder">t</span></a> <a id="q:256" class="idref" href="#q:256"><span class="id" title="binder">q</span></a> <a id="m:257" class="idref" href="#m:257"><span class="id" title="binder">m</span></a> <a id="mk:258" class="idref" href="#mk:258"><span class="id" title="binder">mk</span></a> <a id="R:259" class="idref" href="#R:259"><span class="id" title="binder">R</span></a> <a id="w:260" class="idref" href="#w:260"><span class="id" title="binder">w</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:255"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:253"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:256"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:257"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:258"><span class="id" title="variable">mk</span></a>) <a class="idref" href="models.LinCCAL.html#R:259"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:255"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:254"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:260"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:252"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:253"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:254"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:260"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:252"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:253"><span class="id" title="variable">s1</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:255"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:257"><span class="id" title="variable">m</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.N"><span class="id" title="variable">N</span></a> <a class="idref" href="models.LinCCAL.html#m:257"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="models.LinCCAL.html#s2:254"><span class="id" title="variable">s2</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_tmap_action_r" class="idref" href="#LinCCAL.comp_tmap_action_r"><span class="id" title="lemma">comp_tmap_action_r</span></a> <a id="s12:261" class="idref" href="#s12:261"><span class="id" title="binder">s12</span></a> <a id="s1:262" class="idref" href="#s1:262"><span class="id" title="binder">s1</span></a> <a id="s2:263" class="idref" href="#s2:263"><span class="id" title="binder">s2</span></a> <a id="t:264" class="idref" href="#t:264"><span class="id" title="binder">t</span></a> <a id="q:265" class="idref" href="#q:265"><span class="id" title="binder">q</span></a> <a id="m:266" class="idref" href="#m:266"><span class="id" title="binder">m</span></a> <a id="mk:267" class="idref" href="#mk:267"><span class="id" title="binder">mk</span></a> <a id="u:268" class="idref" href="#u:268"><span class="id" title="binder">u</span></a> <a id="uk:269" class="idref" href="#uk:269"><span class="id" title="binder">uk</span></a> <a id="v:270" class="idref" href="#v:270"><span class="id" title="binder">v</span></a> <a id="R:271" class="idref" href="#R:271"><span class="id" title="binder">R</span></a> <a id="S:272" class="idref" href="#S:272"><span class="id" title="binder">S</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:264"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s1:262"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:265"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.pending_program"><span class="id" title="definition">pending_program</span></a> <a class="idref" href="models.LinCCAL.html#q:265"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#m:266"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:267"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#S:272"><span class="id" title="variable">S</span></a>) <a class="idref" href="models.LinCCAL.html#R:271"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:264"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:263"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:266"><span class="id" title="variable">m</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#u:268"><span class="id" title="variable">u</span></a> <a class="idref" href="models.LinCCAL.html#uk:269"><span class="id" title="variable">uk</span></a>) <a class="idref" href="models.LinCCAL.html#S:272"><span class="id" title="variable">S</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.comp_ready"><span class="id" title="constructor">comp_ready</span></a> <a class="idref" href="models.LinCCAL.html#s12:261"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:262"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:263"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:264"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:265"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:266"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:267"><span class="id" title="variable">mk</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="models.LinCCAL.html#LinCCAL.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:264"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#q:265"><span class="id" title="variable">q</span></a> (<a id="n:273" class="idref" href="#n:273"><span class="id" title="binder">n</span></a> <a class="idref" href="models.LinCCAL.html#f54691b93c886cac08382070817792ff"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="models.LinCCAL.html#uk:269"><span class="id" title="variable">uk</span></a> <a class="idref" href="models.LinCCAL.html#v:270"><span class="id" title="variable">v</span></a><a class="idref" href="models.LinCCAL.html#f54691b93c886cac08382070817792ff"><span class="id" title="notation">;</span></a> <a class="idref" href="models.EffectSignatures.html#Reg.transform"><span class="id" title="definition">Reg.transform</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.N"><span class="id" title="variable">N</span></a> (<a class="idref" href="models.LinCCAL.html#mk:267"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#n:273"><span class="id" title="variable">n</span></a>)) <a class="idref" href="models.LinCCAL.html#R:271"><span class="id" title="variable">R</span></a>) <a class="idref" href="models.LinCCAL.html#s12:261"><span class="id" title="variable">s12</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#s1:262"><span class="id" title="variable">s1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="models.LinCCAL.html#LinCCAL.add"><span class="id" title="definition">TMap.add</span></a> <a class="idref" href="models.LinCCAL.html#t:264"><span class="id" title="variable">t</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:266"><span class="id" title="variable">m</span></a> (<a class="idref" href="models.LinCCAL.html#uk:269"><span class="id" title="variable">uk</span></a> <a class="idref" href="models.LinCCAL.html#v:270"><span class="id" title="variable">v</span></a>) <a class="idref" href="models.LinCCAL.html#S:272"><span class="id" title="variable">S</span></a>) <a class="idref" href="models.LinCCAL.html#s2:263"><span class="id" title="variable">s2</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_tmap_return_r" class="idref" href="#LinCCAL.comp_tmap_return_r"><span class="id" title="lemma">comp_tmap_return_r</span></a> <a id="s12:274" class="idref" href="#s12:274"><span class="id" title="binder">s12</span></a> <a id="s1:275" class="idref" href="#s1:275"><span class="id" title="binder">s1</span></a> <a id="s2:276" class="idref" href="#s2:276"><span class="id" title="binder">s2</span></a> <a id="t:277" class="idref" href="#t:277"><span class="id" title="binder">t</span></a> <a id="q:278" class="idref" href="#q:278"><span class="id" title="binder">q</span></a> <a id="m:279" class="idref" href="#m:279"><span class="id" title="binder">m</span></a> <a id="mk:280" class="idref" href="#mk:280"><span class="id" title="binder">mk</span></a> <a id="n:281" class="idref" href="#n:281"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:277"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:276"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">mkts</span></a> <a class="idref" href="models.LinCCAL.html#m:279"><span class="id" title="variable">m</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#n:281"><span class="id" title="variable">n</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#n:281"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:277"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:278"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:279"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:280"><span class="id" title="variable">mk</span></a>)) <a class="idref" href="models.LinCCAL.html#s12:274"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:275"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:276"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:277"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:278"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#mk:280"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#n:281"><span class="id" title="variable">n</span></a>)) <a class="idref" href="models.LinCCAL.html#s12:274"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:275"><span class="id" title="variable">s1</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.remove"><span class="id" title="definition">TMap.remove</span></a> <a class="idref" href="models.LinCCAL.html#t:277"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:276"><span class="id" title="variable">s2</span></a>).<br/>

<br/>
</div>

<div class="doc">
The commit steps triggered by the components likewise
      perserve the invariant, once equivalent commit steps have been
      applied to the composite layer as needed. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_tmap_commit_l" class="idref" href="#LinCCAL.comp_tmap_commit_l"><span class="id" title="lemma">comp_tmap_commit_l</span></a> <a id="b53f89e76fae74ad2d96ba5ee38761e3" class="idref" href="#b53f89e76fae74ad2d96ba5ee38761e3"><span class="id" title="binder">Δ</span></a> <a id="s1:283" class="idref" href="#s1:283"><span class="id" title="binder">s1</span></a> <a id="90ec968ecc7a2beab0aced42ad31d74e" class="idref" href="#90ec968ecc7a2beab0aced42ad31d74e"><span class="id" title="binder">Γ</span></a> <a id="s2:285" class="idref" href="#s2:285"><span class="id" title="binder">s2</span></a> <a id="1dce777013ec692701cf4bc9d4aa1e7f" class="idref" href="#1dce777013ec692701cf4bc9d4aa1e7f"><span class="id" title="binder">Σ</span></a> <a id="s12:287" class="idref" href="#s12:287"><span class="id" title="binder">s12</span></a> <a id="p:288" class="idref" href="#p:288"><span class="id" title="binder">p</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.M"><span class="id" title="variable">M</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#b53f89e76fae74ad2d96ba5ee38761e3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s1:283"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#90ec968ecc7a2beab0aced42ad31d74e"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#p:288"><span class="id" title="variable">p</span></a> <a class="idref" href="models.LinCCAL.html#s12:287"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:283"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:285"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="f841147349fafa67fda8146cfde29878" class="idref" href="#f841147349fafa67fda8146cfde29878"><span class="id" title="binder">Δ'</span></a> <a id="s12':290" class="idref" href="#s12':290"><span class="id" title="binder">s12'</span></a> <a id="s1':291" class="idref" href="#s1':291"><span class="id" title="binder">s1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.star"><span class="id" title="abbreviation">star</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#b53f89e76fae74ad2d96ba5ee38761e3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s12:287"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#1dce777013ec692701cf4bc9d4aa1e7f"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#f841147349fafa67fda8146cfde29878"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="models.LinCCAL.html#s12':290"><span class="id" title="variable">s12'</span></a> <a class="idref" href="models.LinCCAL.html#1dce777013ec692701cf4bc9d4aa1e7f"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.M"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#f841147349fafa67fda8146cfde29878"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="models.LinCCAL.html#s1':291"><span class="id" title="variable">s1'</span></a> <a class="idref" href="models.LinCCAL.html#90ec968ecc7a2beab0aced42ad31d74e"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#p:288"><span class="id" title="variable">p</span></a> <a class="idref" href="models.LinCCAL.html#s12':290"><span class="id" title="variable">s12'</span></a> <a class="idref" href="models.LinCCAL.html#s1':291"><span class="id" title="variable">s1'</span></a> <a class="idref" href="models.LinCCAL.html#s2:285"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_tmap_commit_r" class="idref" href="#LinCCAL.comp_tmap_commit_r"><span class="id" title="lemma">comp_tmap_commit_r</span></a> <a id="w:294" class="idref" href="#w:294"><span class="id" title="binder">w</span></a> <a id="4bc9e0fe7d9623cc43a10551067c8d22" class="idref" href="#4bc9e0fe7d9623cc43a10551067c8d22"><span class="id" title="binder">Δ</span></a> <a id="s1:296" class="idref" href="#s1:296"><span class="id" title="binder">s1</span></a> <a id="34867abd7a4a93abc69c8a731ea43aeb" class="idref" href="#34867abd7a4a93abc69c8a731ea43aeb"><span class="id" title="binder">Γ</span></a> <a id="s2:298" class="idref" href="#s2:298"><span class="id" title="binder">s2</span></a> <a id="1cefb00bb9cae8ba045c1ffabab038ab" class="idref" href="#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="binder">Σ</span></a> <a id="s12:300" class="idref" href="#s12:300"><span class="id" title="binder">s12</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.N"><span class="id" title="variable">N</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#34867abd7a4a93abc69c8a731ea43aeb"><span class="id" title="variable">Γ</span></a> <a class="idref" href="models.LinCCAL.html#s2:298"><span class="id" title="variable">s2</span></a> <a class="idref" href="models.LinCCAL.html#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.M"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#4bc9e0fe7d9623cc43a10551067c8d22"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s1:296"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#34867abd7a4a93abc69c8a731ea43aeb"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:294"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:300"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:296"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:298"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="b7aae4d0c638701e693190207ef47f20" class="idref" href="#b7aae4d0c638701e693190207ef47f20"><span class="id" title="binder">Δ'</span></a> <a id="fcfef145d1bec66f6883b661e09e138f" class="idref" href="#fcfef145d1bec66f6883b661e09e138f"><span class="id" title="binder">Γ'</span></a> <a id="s12':303" class="idref" href="#s12':303"><span class="id" title="binder">s12'</span></a> <a id="s1':304" class="idref" href="#s1':304"><span class="id" title="binder">s1'</span></a> <a id="s2':305" class="idref" href="#s2':305"><span class="id" title="binder">s2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.star"><span class="id" title="abbreviation">star</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#4bc9e0fe7d9623cc43a10551067c8d22"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s12:300"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#b7aae4d0c638701e693190207ef47f20"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="models.LinCCAL.html#s12':303"><span class="id" title="variable">s12'</span></a> <a class="idref" href="models.LinCCAL.html#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.M"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#b7aae4d0c638701e693190207ef47f20"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="models.LinCCAL.html#s1':304"><span class="id" title="variable">s1'</span></a> <a class="idref" href="models.LinCCAL.html#fcfef145d1bec66f6883b661e09e138f"><span class="id" title="variable">Γ'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.N"><span class="id" title="variable">N</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#fcfef145d1bec66f6883b661e09e138f"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="models.LinCCAL.html#s2':305"><span class="id" title="variable">s2'</span></a> <a class="idref" href="models.LinCCAL.html#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:294"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12':303"><span class="id" title="variable">s12'</span></a> <a class="idref" href="models.LinCCAL.html#s1':304"><span class="id" title="variable">s1'</span></a> <a class="idref" href="models.LinCCAL.html#s2':305"><span class="id" title="variable">s2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="i:306" class="idref" href="#i:306"><span class="id" title="binder">i</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:306"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s2:298"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:306"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s2':305"><span class="id" title="variable">s2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab265"></a><h3 class="section">Overall invariant</h3>

<div class="paragraph"> </div>

 The overall composition invariant is as follows.
      Essentially, there should be an intemediate specification
      and component states such that each thread satisfies
      <span class="inlinecode"><a class="idref" href="models.LinCCAL.html#LinCCAL.comp_threadstate"><span class="id" title="inductive">comp_threadstate</span></a></span>, and such that the component are correct with
      respect to the relevant specifications. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCAL.comp_state" class="idref" href="#LinCCAL.comp_state"><span class="id" title="inductive">comp_state</span></a> <a id="w:309" class="idref" href="#w:309"><span class="id" title="binder">w</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.state"><span class="id" title="record">state</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.E"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.G"><span class="id" title="variable">G</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.comp_state_intro" class="idref" href="#LinCCAL.comp_state_intro"><span class="id" title="constructor">comp_state_intro</span></a> <a id="2400c02506ae4d15486eb9a9e093aa98" class="idref" href="#2400c02506ae4d15486eb9a9e093aa98"><span class="id" title="binder">Σ</span></a> <a id="11e6a295c43e8a15eb3f4bcbe2d3f13d" class="idref" href="#11e6a295c43e8a15eb3f4bcbe2d3f13d"><span class="id" title="binder">Γ</span></a> <a id="2588e4dbe8572b30f23e07433fc92891" class="idref" href="#2588e4dbe8572b30f23e07433fc92891"><span class="id" title="binder">Δ</span></a> <a id="s12:315" class="idref" href="#s12:315"><span class="id" title="binder">s12</span></a> <a id="s1:316" class="idref" href="#s1:316"><span class="id" title="binder">s1</span></a> <a id="s2:317" class="idref" href="#s2:317"><span class="id" title="binder">s2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> <a class="idref" href="models.LinCCAL.html#w:309"><span class="id" title="variable">w</span></a> <a class="idref" href="models.LinCCAL.html#s12:315"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:316"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:317"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.M"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#2588e4dbe8572b30f23e07433fc92891"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s1:316"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#11e6a295c43e8a15eb3f4bcbe2d3f13d"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.N"><span class="id" title="variable">N</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#11e6a295c43e8a15eb3f4bcbe2d3f13d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="models.LinCCAL.html#s2:317"><span class="id" title="variable">s2</span></a> <a class="idref" href="models.LinCCAL.html#2400c02506ae4d15486eb9a9e093aa98"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#comp_state:310"><span class="id" title="inductive">comp_state</span></a> <a class="idref" href="models.LinCCAL.html#w:309"><span class="id" title="variable">w</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#2588e4dbe8572b30f23e07433fc92891"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s12:315"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#2400c02506ae4d15486eb9a9e093aa98"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_run_r" class="idref" href="#LinCCAL.comp_run_r"><span class="id" title="lemma">comp_run_r</span></a> <a id="t:318" class="idref" href="#t:318"><span class="id" title="binder">t</span></a> <a id="q:319" class="idref" href="#q:319"><span class="id" title="binder">q</span></a> <a id="m:320" class="idref" href="#m:320"><span class="id" title="binder">m</span></a> <a id="mk:321" class="idref" href="#mk:321"><span class="id" title="binder">mk</span></a> <a id="s12:322" class="idref" href="#s12:322"><span class="id" title="binder">s12</span></a> <a id="18db5b8eddccc09af75251369b5319c3" class="idref" href="#18db5b8eddccc09af75251369b5319c3"><span class="id" title="binder">Δ</span></a> <a id="s1:324" class="idref" href="#s1:324"><span class="id" title="binder">s1</span></a> <a id="0f70a48d463e6ff14ddc032e51ed9df0" class="idref" href="#0f70a48d463e6ff14ddc032e51ed9df0"><span class="id" title="binder">Γ</span></a> <a id="s2:326" class="idref" href="#s2:326"><span class="id" title="binder">s2</span></a> <a id="a35140fe46603c62b4904083141d2964" class="idref" href="#a35140fe46603c62b4904083141d2964"><span class="id" title="binder">Σ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_tmap"><span class="id" title="definition">comp_tmap</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:318"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:319"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.cons"><span class="id" title="constructor">Sig.cons</span></a> <a class="idref" href="models.LinCCAL.html#m:320"><span class="id" title="variable">m</span></a> <a class="idref" href="models.LinCCAL.html#mk:321"><span class="id" title="variable">mk</span></a>)) <a class="idref" href="models.LinCCAL.html#s12:322"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#s1:324"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#s2:326"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.M"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#18db5b8eddccc09af75251369b5319c3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s1:324"><span class="id" title="variable">s1</span></a> <a class="idref" href="models.LinCCAL.html#0f70a48d463e6ff14ddc032e51ed9df0"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.correct"><span class="id" title="record">correct</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.N"><span class="id" title="variable">N</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#0f70a48d463e6ff14ddc032e51ed9df0"><span class="id" title="variable">Γ</span></a> <a class="idref" href="models.LinCCAL.html#s2:326"><span class="id" title="variable">s2</span></a> <a class="idref" href="models.LinCCAL.html#a35140fe46603c62b4904083141d2964"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.find"><span class="id" title="definition">TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#t:318"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#s2:326"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="n:328" class="idref" href="#n:328"><span class="id" title="binder">n</span></a> <a id="s:329" class="idref" href="#s:329"><span class="id" title="binder">s</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_state"><span class="id" title="inductive">comp_state</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:318"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:319"><span class="id" title="variable">q</span></a> (<a class="idref" href="models.LinCCAL.html#mk:321"><span class="id" title="variable">mk</span></a> <a class="idref" href="models.LinCCAL.html#n:328"><span class="id" title="variable">n</span></a>)) <a class="idref" href="models.LinCCAL.html#s:329"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_state"><span class="id" title="inductive">comp_state</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.comp_ready"><span class="id" title="constructor">comp_ready</span></a>) <a class="idref" href="models.LinCCAL.html#s:329"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_state"><span class="id" title="inductive">comp_state</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.comp_ready"><span class="id" title="constructor">comp_ready</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">mkst</span></a> <a class="idref" href="models.LinCCAL.html#18db5b8eddccc09af75251369b5319c3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="models.LinCCAL.html#s12:322"><span class="id" title="variable">s12</span></a> <a class="idref" href="models.LinCCAL.html#a35140fe46603c62b4904083141d2964"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_run" class="idref" href="#LinCCAL.comp_run"><span class="id" title="lemma">comp_run</span></a> <a id="t:330" class="idref" href="#t:330"><span class="id" title="binder">t</span></a> <a id="q:331" class="idref" href="#q:331"><span class="id" title="binder">q</span></a> <a id="T:332" class="idref" href="#T:332"><span class="id" title="binder">T</span></a> <a id="s:333" class="idref" href="#s:333"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_state"><span class="id" title="inductive">comp_state</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_running"><span class="id" title="constructor">comp_running</span></a> <a class="idref" href="models.LinCCAL.html#t:330"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#q:331"><span class="id" title="variable">q</span></a> <a class="idref" href="models.LinCCAL.html#T:332"><span class="id" title="variable">T</span></a>) <a class="idref" href="models.LinCCAL.html#s:333"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.lstep"><span class="id" title="inductive">lstep</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_state"><span class="id" title="inductive">comp_state</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.comp_ready"><span class="id" title="constructor">comp_ready</span></a>) <a class="idref" href="models.LinCCAL.html#s:333"><span class="id" title="variable">s</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.comp_ci" class="idref" href="#LinCCAL.comp_ci"><span class="id" title="lemma">comp_ci</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.correctness_invariant"><span class="id" title="record">correctness_invariant</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.Op.compose"><span class="id" title="definition">Reg.Op.compose</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.M"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.N"><span class="id" title="variable">N</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.comp_state"><span class="id" title="inductive">comp_state</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.comp_ready"><span class="id" title="constructor">comp_ready</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="LinCCAL.comp_cal" class="idref" href="#LinCCAL.comp_cal"><span class="id" title="lemma">comp_cal</span></a> <a id="e4e396109864c24ba7afd74253c39310" class="idref" href="#e4e396109864c24ba7afd74253c39310"><span class="id" title="binder">Σ</span></a> <a id="78688b73ade9f8b063bf0ca3b46d644c" class="idref" href="#78688b73ade9f8b063bf0ca3b46d644c"><span class="id" title="binder">Γ</span></a> <a id="b662171991636daa2c2395eb5402b2b1" class="idref" href="#b662171991636daa2c2395eb5402b2b1"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.cal"><span class="id" title="definition">cal</span></a> <a class="idref" href="models.LinCCAL.html#78688b73ade9f8b063bf0ca3b46d644c"><span class="id" title="variable">Γ</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.M"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#b662171991636daa2c2395eb5402b2b1"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.cal"><span class="id" title="definition">cal</span></a> <a class="idref" href="models.LinCCAL.html#e4e396109864c24ba7afd74253c39310"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.N"><span class="id" title="variable">N</span></a> <a class="idref" href="models.LinCCAL.html#78688b73ade9f8b063bf0ca3b46d644c"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.cal"><span class="id" title="definition">cal</span></a> <a class="idref" href="models.LinCCAL.html#e4e396109864c24ba7afd74253c39310"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="models.EffectSignatures.html#Reg.Op.compose"><span class="id" title="definition">Reg.Op.compose</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.M"><span class="id" title="variable">M</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE.N"><span class="id" title="variable">N</span></a>) <a class="idref" href="models.LinCCAL.html#b662171991636daa2c2395eb5402b2b1"><span class="id" title="variable">Δ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="models.LinCCAL.html#LinCCAL.COMPOSE"><span class="id" title="section">COMPOSE</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab266"></a><h2 class="section">Certified abstraction layers form a category</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="LinCCAL.layer_interface" class="idref" href="#LinCCAL.layer_interface"><span class="id" title="record">layer_interface</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.li_sig" class="idref" href="#LinCCAL.li_sig"><span class="id" title="projection">li_sig</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.t"><span class="id" title="definition">Sig.t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.li_spec" class="idref" href="#LinCCAL.li_spec"><span class="id" title="projection">li_spec</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.spec"><span class="id" title="abbreviation">spec</span></a> <a class="idref" href="models.LinCCAL.html#li_sig:338"><span class="id" title="method">li_sig</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="LinCCAL.layer_implementation" class="idref" href="#LinCCAL.layer_implementation"><span class="id" title="record">layer_implementation</span></a> {<a id="L:340" class="idref" href="#L:340"><span class="id" title="binder">L</span></a> <a id="L':341" class="idref" href="#L':341"><span class="id" title="binder">L'</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.layer_interface"><span class="id" title="record">layer_interface</span></a>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.li_impl" class="idref" href="#LinCCAL.li_impl"><span class="id" title="projection">li_impl</span></a> : <a class="idref" href="models.EffectSignatures.html#Reg.Op.m"><span class="id" title="definition">Reg.Op.m</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.li_sig"><span class="id" title="projection">li_sig</span></a> <a class="idref" href="models.LinCCAL.html#L:340"><span class="id" title="variable">L</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.li_sig"><span class="id" title="projection">li_sig</span></a> <a class="idref" href="models.LinCCAL.html#L':341"><span class="id" title="variable">L'</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCAL.li_correct" class="idref" href="#LinCCAL.li_correct"><span class="id" title="projection">li_correct</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.cal"><span class="id" title="definition">cal</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.li_spec"><span class="id" title="projection">li_spec</span></a> <a class="idref" href="models.LinCCAL.html#L:340"><span class="id" title="variable">L</span></a>) <a class="idref" href="models.LinCCAL.html#li_impl:343"><span class="id" title="method">li_impl</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.li_spec"><span class="id" title="projection">li_spec</span></a> <a class="idref" href="models.LinCCAL.html#L':341"><span class="id" title="variable">L'</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCAL.layer_implementation"><span class="id" title="record">layer_implementation</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCAL.t" class="idref" href="#LinCCAL.t"><span class="id" title="definition">t</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="models.LinCCAL.html#LinCCAL.layer_interface"><span class="id" title="record">layer_interface</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCAL.m" class="idref" href="#LinCCAL.m"><span class="id" title="definition">m</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.t"><span class="id" title="definition">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.t"><span class="id" title="definition">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> := <a class="idref" href="models.LinCCAL.html#LinCCAL.layer_implementation"><span class="id" title="record">layer_implementation</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="LinCCAL.id" class="idref" href="#LinCCAL.id"><span class="id" title="definition">id</span></a> <a id="L:345" class="idref" href="#L:345"><span class="id" title="binder">L</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L:345"><span class="id" title="variable">L</span></a> <a class="idref" href="models.LinCCAL.html#L:345"><span class="id" title="variable">L</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCAL.li_impl"><span class="id" title="projection">li_impl</span></a> := <a class="idref" href="models.EffectSignatures.html#Reg.id"><span class="id" title="definition">Reg.id</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.li_sig"><span class="id" title="projection">li_sig</span></a> <a class="idref" href="models.LinCCAL.html#L:345"><span class="id" title="variable">L</span></a>) |}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="LinCCAL.compose" class="idref" href="#LinCCAL.compose"><span class="id" title="definition">compose</span></a> {<a id="L1:346" class="idref" href="#L1:346"><span class="id" title="binder">L1</span></a> <a id="L2:347" class="idref" href="#L2:347"><span class="id" title="binder">L2</span></a> <a id="L3:348" class="idref" href="#L3:348"><span class="id" title="binder">L3</span></a>} (<a id="M:349" class="idref" href="#M:349"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L2:347"><span class="id" title="variable">L2</span></a> <a class="idref" href="models.LinCCAL.html#L3:348"><span class="id" title="variable">L3</span></a>) (<a id="N:350" class="idref" href="#N:350"><span class="id" title="binder">N</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L1:346"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#L2:347"><span class="id" title="variable">L2</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCAL.li_impl"><span class="id" title="projection">li_impl</span></a> := <a class="idref" href="models.EffectSignatures.html#Reg.Op.compose"><span class="id" title="definition">Reg.Op.compose</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.li_impl"><span class="id" title="projection">li_impl</span></a> <a class="idref" href="models.LinCCAL.html#M:349"><span class="id" title="variable">M</span></a>) (<a class="idref" href="models.LinCCAL.html#LinCCAL.li_impl"><span class="id" title="projection">li_impl</span></a> <a class="idref" href="models.LinCCAL.html#N:350"><span class="id" title="variable">N</span></a>) |}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.meq" class="idref" href="#LinCCAL.meq"><span class="id" title="lemma">meq</span></a> {<a id="L1:351" class="idref" href="#L1:351"><span class="id" title="binder">L1</span></a> <a id="L2:352" class="idref" href="#L2:352"><span class="id" title="binder">L2</span></a>} (<a id="M:353" class="idref" href="#M:353"><span class="id" title="binder">M</span></a> <a id="N:354" class="idref" href="#N:354"><span class="id" title="binder">N</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L1:351"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#L2:352"><span class="id" title="variable">L2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.li_impl"><span class="id" title="projection">li_impl</span></a> <a class="idref" href="models.LinCCAL.html#M:353"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.li_impl"><span class="id" title="projection">li_impl</span></a> <a class="idref" href="models.LinCCAL.html#N:354"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#M:353"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#N:354"><span class="id" title="variable">N</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.compose_id_left" class="idref" href="#LinCCAL.compose_id_left"><span class="id" title="lemma">compose_id_left</span></a> {<a id="L1:355" class="idref" href="#L1:355"><span class="id" title="binder">L1</span></a> <a id="L2:356" class="idref" href="#L2:356"><span class="id" title="binder">L2</span></a>} (<a id="M:357" class="idref" href="#M:357"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L1:355"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#L2:356"><span class="id" title="variable">L2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.compose"><span class="id" title="definition">compose</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.id"><span class="id" title="definition">id</span></a> <a class="idref" href="models.LinCCAL.html#L2:356"><span class="id" title="variable">L2</span></a>) <a class="idref" href="models.LinCCAL.html#M:357"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#M:357"><span class="id" title="variable">M</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.compose_id_right" class="idref" href="#LinCCAL.compose_id_right"><span class="id" title="lemma">compose_id_right</span></a> {<a id="L1:358" class="idref" href="#L1:358"><span class="id" title="binder">L1</span></a> <a id="L2:359" class="idref" href="#L2:359"><span class="id" title="binder">L2</span></a>} (<a id="M:360" class="idref" href="#M:360"><span class="id" title="binder">M</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L1:358"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#L2:359"><span class="id" title="variable">L2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="models.LinCCAL.html#M:360"><span class="id" title="variable">M</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.id"><span class="id" title="definition">id</span></a> <a class="idref" href="models.LinCCAL.html#L1:358"><span class="id" title="variable">L1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#M:360"><span class="id" title="variable">M</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCAL.compose_assoc" class="idref" href="#LinCCAL.compose_assoc"><span class="id" title="lemma">compose_assoc</span></a> {<a id="L1:361" class="idref" href="#L1:361"><span class="id" title="binder">L1</span></a> <a id="L2:362" class="idref" href="#L2:362"><span class="id" title="binder">L2</span></a> <a id="L3:363" class="idref" href="#L3:363"><span class="id" title="binder">L3</span></a> <a id="L4:364" class="idref" href="#L4:364"><span class="id" title="binder">L4</span></a>} (<a id="M12:365" class="idref" href="#M12:365"><span class="id" title="binder">M12</span></a>: <a class="idref" href="models.LinCCAL.html#LinCCAL.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L1:361"><span class="id" title="variable">L1</span></a> <a class="idref" href="models.LinCCAL.html#L2:362"><span class="id" title="variable">L2</span></a>) (<a id="M23:366" class="idref" href="#M23:366"><span class="id" title="binder">M23</span></a>: <a class="idref" href="models.LinCCAL.html#LinCCAL.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L2:362"><span class="id" title="variable">L2</span></a> <a class="idref" href="models.LinCCAL.html#L3:363"><span class="id" title="variable">L3</span></a>) (<a id="M34:367" class="idref" href="#M34:367"><span class="id" title="binder">M34</span></a>: <a class="idref" href="models.LinCCAL.html#LinCCAL.m"><span class="id" title="definition">m</span></a> <a class="idref" href="models.LinCCAL.html#L3:363"><span class="id" title="variable">L3</span></a> <a class="idref" href="models.LinCCAL.html#L4:364"><span class="id" title="variable">L4</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCAL.compose"><span class="id" title="definition">compose</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="models.LinCCAL.html#M34:367"><span class="id" title="variable">M34</span></a> <a class="idref" href="models.LinCCAL.html#M23:366"><span class="id" title="variable">M23</span></a>) <a class="idref" href="models.LinCCAL.html#M12:365"><span class="id" title="variable">M12</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="models.LinCCAL.html#M34:367"><span class="id" title="variable">M34</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="models.LinCCAL.html#M23:366"><span class="id" title="variable">M23</span></a> <a class="idref" href="models.LinCCAL.html#M12:365"><span class="id" title="variable">M12</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <a class="idref" href="interfaces.Category.html#CategoryTheory"><span class="id" title="module">CategoryTheory</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="models.LinCCAL.html#LinCCAL"><span class="id" title="module">LinCCAL</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab267"></a><h1 class="section">Example</h1>

<div class="paragraph"> </div>

 As an example we will show a concurrent counter can be implemented
  in terms of a lock and register. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="LinCCALExample" class="idref" href="#LinCCALExample"><span class="id" title="module">LinCCALExample</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> (<span class="id" title="var">coercions</span>, <span class="id" title="var">canonicals</span>) <a class="idref" href="models.EffectSignatures.html#Sig"><span class="id" title="module">Sig</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALExample.spec_action" class="idref" href="#LinCCALExample.spec_action"><span class="id" title="inductive">spec_action</span></a> {<a id="E:368" class="idref" href="#E:368"><span class="id" title="binder">E</span></a> <a id="X:369" class="idref" href="#X:369"><span class="id" title="binder">X</span></a>} {<a id="m:370" class="idref" href="#m:370"><span class="id" title="binder">m</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#E:368"><span class="id" title="variable">E</span></a>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.stop" class="idref" href="#LinCCALExample.stop"><span class="id" title="constructor">stop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.scont" class="idref" href="#LinCCALExample.scont"><span class="id" title="constructor">scont</span></a> (<a id="n:373" class="idref" href="#n:373"><span class="id" title="binder">n</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.LinCCAL.html#m:370"><span class="id" title="variable">m</span></a>) (<a id="x:374" class="idref" href="#x:374"><span class="id" title="binder">x</span></a> : <a class="idref" href="models.LinCCAL.html#X:369"><span class="id" title="variable">X</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCALExample.spec_action"><span class="id" title="inductive">spec_action</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">CoFixpoint</span> <a id="LinCCALExample.unfold" class="idref" href="#LinCCALExample.unfold"><span class="id" title="definition">unfold</span></a> {<a id="E:375" class="idref" href="#E:375"><span class="id" title="binder">E</span></a> <a id="A:376" class="idref" href="#A:376"><span class="id" title="binder">A</span></a>} (<a id="089af77f586df8ee001bdf0f64b07e5e" class="idref" href="#089af77f586df8ee001bdf0f64b07e5e"><span class="id" title="binder">α</span></a> : <a class="idref" href="models.LinCCAL.html#A:376"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.tid"><span class="id" title="abbreviation">LinCCAL.tid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="m:377" class="idref" href="#m:377"><span class="id" title="binder">m</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCALExample.spec_action"><span class="id" title="inductive">spec_action</span></a> <a class="idref" href="models.LinCCAL.html#E:375"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#A:376"><span class="id" title="variable">A</span></a> <a class="idref" href="models.LinCCAL.html#m:377"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="x:379" class="idref" href="#x:379"><span class="id" title="binder">x</span></a> : <a class="idref" href="models.LinCCAL.html#A:376"><span class="id" title="variable">A</span></a>) (<a id="t:380" class="idref" href="#t:380"><span class="id" title="binder">t</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.TMap.key"><span class="id" title="definition">LinCCAL.TMap.key</span></a>) (<a id="m:381" class="idref" href="#m:381"><span class="id" title="binder">m</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#E:375"><span class="id" title="variable">E</span></a>) : <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_after"><span class="id" title="inductive">LinCCAL.spec_after</span></a> <a class="idref" href="models.LinCCAL.html#E:375"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#m:381"><span class="id" title="variable">m</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#089af77f586df8ee001bdf0f64b07e5e"><span class="id" title="variable">α</span></a> <a class="idref" href="models.LinCCAL.html#x:379"><span class="id" title="variable">x</span></a> <a class="idref" href="models.LinCCAL.html#t:380"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#m:381"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALExample.stop"><span class="id" title="constructor">stop</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_top"><span class="id" title="constructor">LinCCAL.spec_top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALExample.scont"><span class="id" title="constructor">scont</span></a> <span class="id" title="var">n</span> <span class="id" title="var">y</span> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_cons"><span class="id" title="constructor">LinCCAL.spec_cons</span></a> <span class="id" title="var">n</span> (<a class="idref" href="models.LinCCAL.html#unfold:382"><span class="id" title="definition">unfold</span></a> <a class="idref" href="models.LinCCAL.html#089af77f586df8ee001bdf0f64b07e5e"><span class="id" title="variable">α</span></a> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALExample.spec_unfold" class="idref" href="#LinCCALExample.spec_unfold"><span class="id" title="lemma">spec_unfold</span></a> {<a id="E:383" class="idref" href="#E:383"><span class="id" title="binder">E</span></a> <a id="q:384" class="idref" href="#q:384"><span class="id" title="binder">q</span></a>} (<a id="d15e7ec724dd39d104fe48ee02cfe0db" class="idref" href="#d15e7ec724dd39d104fe48ee02cfe0db"><span class="id" title="binder">σ</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_after"><span class="id" title="inductive">LinCCAL.spec_after</span></a> <a class="idref" href="models.LinCCAL.html#E:383"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#q:384"><span class="id" title="variable">q</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#d15e7ec724dd39d104fe48ee02cfe0db"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#d15e7ec724dd39d104fe48ee02cfe0db"><span class="id" title="variable">σ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_top"><span class="id" title="constructor">LinCCAL.spec_top</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_top"><span class="id" title="constructor">LinCCAL.spec_top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_cons"><span class="id" title="constructor">LinCCAL.spec_cons</span></a> <span class="id" title="var">n</span> σ' ⇒ <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_cons"><span class="id" title="constructor">LinCCAL.spec_cons</span></a> <span class="id" title="var">n</span> σ'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALExample.unfold_unfold" class="idref" href="#LinCCALExample.unfold_unfold"><span class="id" title="lemma">unfold_unfold</span></a> {<a id="E:387" class="idref" href="#E:387"><span class="id" title="binder">E</span></a> <a id="A:388" class="idref" href="#A:388"><span class="id" title="binder">A</span></a>} <a id="5cbd7d5d19a265435c02410574afe3e7" class="idref" href="#5cbd7d5d19a265435c02410574afe3e7"><span class="id" title="binder">α</span></a> <a id="x:390" class="idref" href="#x:390"><span class="id" title="binder">x</span></a> <a id="t:391" class="idref" href="#t:391"><span class="id" title="binder">t</span></a> <a id="m:392" class="idref" href="#m:392"><span class="id" title="binder">m</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="models.LinCCAL.html#LinCCALExample.unfold"><span class="id" title="definition">unfold</span></a> <a class="idref" href="models.LinCCAL.html#E:387"><span class="id" title="variable">E</span></a> <a class="idref" href="models.LinCCAL.html#A:388"><span class="id" title="variable">A</span></a> <a class="idref" href="models.LinCCAL.html#5cbd7d5d19a265435c02410574afe3e7"><span class="id" title="variable">α</span></a> <a class="idref" href="models.LinCCAL.html#x:390"><span class="id" title="variable">x</span></a> <a class="idref" href="models.LinCCAL.html#t:391"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#m:392"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#5cbd7d5d19a265435c02410574afe3e7"><span class="id" title="variable">α</span></a> <a class="idref" href="models.LinCCAL.html#x:390"><span class="id" title="variable">x</span></a> <a class="idref" href="models.LinCCAL.html#t:391"><span class="id" title="variable">t</span></a> <a class="idref" href="models.LinCCAL.html#m:392"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALExample.stop"><span class="id" title="constructor">stop</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_top"><span class="id" title="constructor">LinCCAL.spec_top</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALExample.scont"><span class="id" title="constructor">scont</span></a> <span class="id" title="var">n</span> <span class="id" title="var">y</span> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_cons"><span class="id" title="constructor">LinCCAL.spec_cons</span></a> <span class="id" title="var">n</span> (<a class="idref" href="models.LinCCAL.html#LinCCALExample.unfold"><span class="id" title="definition">unfold</span></a> <a class="idref" href="models.LinCCAL.html#5cbd7d5d19a265435c02410574afe3e7"><span class="id" title="variable">α</span></a> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="53531764dad3fcca3a1bb535d71bfa3f" class="idref" href="#53531764dad3fcca3a1bb535d71bfa3f"><span class="id" title="notation">&quot;</span></a>% e" := (<a class="idref" href="models.EffectSignatures.html#Sig.mkop"><span class="id" title="constructor">Sig.mkop</span></a> <span class="id" title="var">e</span>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab268"></a><h2 class="section">Counter specification</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALExample.Ecounter_op" class="idref" href="#LinCCALExample.Ecounter_op"><span class="id" title="inductive">Ecounter_op</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai" class="idref" href="#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <a id="LinCCALExample.Ecounter" class="idref" href="#LinCCALExample.Ecounter"><span class="id" title="definition">Ecounter</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALExample.Ecounter_op"><span class="id" title="inductive">Ecounter_op</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <span class="id" title="var">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ff792ff4957e4897f535858a817c104a" class="idref" href="#ff792ff4957e4897f535858a817c104a"><span class="id" title="definition">Σcounter</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.spec"><span class="id" title="abbreviation">LinCCAL.spec</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.Ecounter"><span class="id" title="definition">Ecounter</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALExample.unfold"><span class="id" title="definition">unfold</span></a> (<span class="id" title="keyword">fun</span> <a id="c:395" class="idref" href="#c:395"><span class="id" title="binder">c</span></a> <a id="t:396" class="idref" href="#t:396"><span class="id" title="binder">t</span></a> '<a id="pat:397" class="idref" href="#pat:397"><span class="id" title="binder">fai</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALExample.scont"><span class="id" title="constructor">scont</span></a> (<span class="id" title="var">m</span>:=<a class="idref" href="models.LinCCAL.html#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a>) <a class="idref" href="models.LinCCAL.html#c:395"><span class="id" title="variable">c</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="models.LinCCAL.html#c:395"><span class="id" title="variable">c</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALExample.Lcounter" class="idref" href="#LinCCALExample.Lcounter"><span class="id" title="definition">Lcounter</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.t"><span class="id" title="definition">LinCCAL.t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCAL.li_spec"><span class="id" title="projection">LinCCAL.li_spec</span></a> := <a class="idref" href="models.LinCCAL.html#ff792ff4957e4897f535858a817c104a"><span class="id" title="definition">Σcounter</span></a> 0; |}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab269"></a><h2 class="section">Lock specification</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALExample.Elock_op" class="idref" href="#LinCCALExample.Elock_op"><span class="id" title="inductive">Elock_op</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.acq" class="idref" href="#LinCCALExample.acq"><span class="id" title="constructor">acq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.rel" class="idref" href="#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <a id="LinCCALExample.Elock" class="idref" href="#LinCCALExample.Elock"><span class="id" title="definition">Elock</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALExample.Elock_op"><span class="id" title="inductive">Elock_op</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <span class="id" title="var">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="5c6770c8b9f8363729d3880867c7dfd7" class="idref" href="#5c6770c8b9f8363729d3880867c7dfd7"><span class="id" title="definition">Σlock</span></a> (<a id="s:400" class="idref" href="#s:400"><span class="id" title="binder">s</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.tid"><span class="id" title="abbreviation">LinCCAL.tid</span></a>) <a id="t:401" class="idref" href="#t:401"><span class="id" title="binder">t</span></a> <a id="m:402" class="idref" href="#m:402"><span class="id" title="binder">m</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALExample.spec_action"><span class="id" title="inductive">spec_action</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.tid"><span class="id" title="abbreviation">LinCCAL.tid</span></a>) <a class="idref" href="models.LinCCAL.html#m:402"><span class="id" title="variable">m</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;XXX&nbsp;need&nbsp;to&nbsp;compare&nbsp;thread&nbsp;id's&nbsp;and&nbsp;use&nbsp;⊥&nbsp;where&nbsp;appropriate&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#s:400"><span class="id" title="variable">s</span></a>, <a class="idref" href="models.LinCCAL.html#m:402"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>,   <a class="idref" href="models.LinCCAL.html#LinCCALExample.acq"><span class="id" title="constructor">acq</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALExample.scont"><span class="id" title="constructor">scont</span></a> (<span class="id" title="var">m</span>:=<a class="idref" href="models.LinCCAL.html#LinCCALExample.acq"><span class="id" title="constructor">acq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#t:401"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>,   <a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALExample.scont"><span class="id" title="constructor">scont</span></a> (<span class="id" title="var">m</span>:=<a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">i</span>, <a class="idref" href="models.LinCCAL.html#LinCCALExample.acq"><span class="id" title="constructor">acq</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALExample.stop"><span class="id" title="constructor">stop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">i</span>, <a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALExample.scont"><span class="id" title="constructor">scont</span></a> (<span class="id" title="var">m</span>:=<a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALExample.Llock" class="idref" href="#LinCCALExample.Llock"><span class="id" title="definition">Llock</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.t"><span class="id" title="definition">LinCCAL.t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCAL.li_spec"><span class="id" title="projection">LinCCAL.li_spec</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALExample.unfold"><span class="id" title="definition">unfold</span></a> <a class="idref" href="models.LinCCAL.html#5c6770c8b9f8363729d3880867c7dfd7"><span class="id" title="definition">Σlock</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> |}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab270"></a><h2 class="section">Register specification</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALExample.Ereg_op" class="idref" href="#LinCCALExample.Ereg_op"><span class="id" title="inductive">Ereg_op</span></a> {<a id="S:405" class="idref" href="#S:405"><span class="id" title="binder">S</span></a>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.get" class="idref" href="#LinCCALExample.get"><span class="id" title="constructor">get</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.set" class="idref" href="#LinCCALExample.set"><span class="id" title="constructor">set</span></a> (<a id="s:408" class="idref" href="#s:408"><span class="id" title="binder">s</span></a> : <a class="idref" href="models.LinCCAL.html#S:405"><span class="id" title="variable">S</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="models.LinCCAL.html#LinCCALExample.Ereg_op"><span class="id" title="inductive">Ereg_op</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <a id="LinCCALExample.Ereg" class="idref" href="#LinCCALExample.Ereg"><span class="id" title="definition">Ereg</span></a> <a id="S:409" class="idref" href="#S:409"><span class="id" title="binder">S</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALExample.Ereg_op"><span class="id" title="inductive">Ereg_op</span></a> <a class="idref" href="models.LinCCAL.html#S:409"><span class="id" title="variable">S</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a id="m:410" class="idref" href="#m:410"><span class="id" title="binder">m</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#m:410"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALExample.get"><span class="id" title="constructor">get</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#S:409"><span class="id" title="variable">S</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALExample.set"><span class="id" title="constructor">set</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="aeb20c8e2c916bfc1d4a7d24de6ac0ab" class="idref" href="#aeb20c8e2c916bfc1d4a7d24de6ac0ab"><span class="id" title="definition">Σreg</span></a> <a id="S:412" class="idref" href="#S:412"><span class="id" title="binder">S</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALExample.unfold"><span class="id" title="definition">unfold</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="models.LinCCAL.html#S:412"><span class="id" title="variable">S</span></a>) (<span class="id" title="keyword">fun</span> <a id="s:413" class="idref" href="#s:413"><span class="id" title="binder">s</span></a> <a id="t:414" class="idref" href="#t:414"><span class="id" title="binder">t</span></a> <a id="m:415" class="idref" href="#m:415"><span class="id" title="binder">m</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#m:415"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALExample.get"><span class="id" title="constructor">get</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALExample.scont"><span class="id" title="constructor">scont</span></a> (<span class="id" title="var">m</span>:=<a class="idref" href="models.LinCCAL.html#LinCCALExample.get"><span class="id" title="constructor">get</span></a>) <a class="idref" href="models.LinCCAL.html#s:413"><span class="id" title="variable">s</span></a> <a class="idref" href="models.LinCCAL.html#s:413"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCALExample.set"><span class="id" title="constructor">set</span></a> <span class="id" title="var">s'</span> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALExample.scont"><span class="id" title="constructor">scont</span></a> (<span class="id" title="var">m</span>:=<a class="idref" href="models.LinCCAL.html#LinCCALExample.set"><span class="id" title="constructor">set</span></a> <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="var">s'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALExample.Lreg" class="idref" href="#LinCCALExample.Lreg"><span class="id" title="definition">Lreg</span></a> {<a id="S:417" class="idref" href="#S:417"><span class="id" title="binder">S</span></a>} (<a id="s0:418" class="idref" href="#s0:418"><span class="id" title="binder">s0</span></a> : <a class="idref" href="models.LinCCAL.html#S:417"><span class="id" title="variable">S</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCAL.li_spec"><span class="id" title="projection">LinCCAL.li_spec</span></a> := <a class="idref" href="models.LinCCAL.html#aeb20c8e2c916bfc1d4a7d24de6ac0ab"><span class="id" title="definition">Σreg</span></a> <a class="idref" href="models.LinCCAL.html#S:417"><span class="id" title="variable">S</span></a> <a class="idref" href="models.LinCCAL.html#s0:418"><span class="id" title="variable">s0</span></a> |}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab271"></a><h2 class="section">Horizontal composition (TODO: generalize)</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <a id="LinCCALExample.Sig_plus" class="idref" href="#LinCCALExample.Sig_plus"><span class="id" title="definition">Sig_plus</span></a> (<a id="E:419" class="idref" href="#E:419"><span class="id" title="binder">E</span></a> <a id="F:420" class="idref" href="#F:420"><span class="id" title="binder">F</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.t"><span class="id" title="definition">Sig.t</span></a>) : <a class="idref" href="models.EffectSignatures.html#Sig.t"><span class="id" title="definition">Sig.t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> := <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#E:419"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="models.EffectSignatures.html#Sig.op"><span class="id" title="projection">Sig.op</span></a> <a class="idref" href="models.LinCCAL.html#F:420"><span class="id" title="variable">F</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#sum_rect"><span class="id" title="definition">sum_rect</span></a> <span class="id" title="var">_</span> <a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a> <a class="idref" href="models.EffectSignatures.html#Sig.ar"><span class="id" title="projection">Sig.ar</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Infix</span> <a id="ad332c542f1f5097aeb6d125fb6634fd" class="idref" href="#ad332c542f1f5097aeb6d125fb6634fd"><span class="id" title="notation">&quot;</span></a>+" := <a class="idref" href="models.LinCCAL.html#LinCCALExample.Sig_plus"><span class="id" title="definition">Sig_plus</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALExample.spec_mix" class="idref" href="#LinCCALExample.spec_mix"><span class="id" title="definition">spec_mix</span></a> {<a id="E1:421" class="idref" href="#E1:421"><span class="id" title="binder">E1</span></a> <a id="E2:422" class="idref" href="#E2:422"><span class="id" title="binder">E2</span></a>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALExample.unfold"><span class="id" title="definition">unfold</span></a> (<span class="id" title="var">E</span> := <a class="idref" href="models.LinCCAL.html#E1:421"><span class="id" title="variable">E1</span></a> <a class="idref" href="models.LinCCAL.html#ad332c542f1f5097aeb6d125fb6634fd"><span class="id" title="notation">+</span></a> <a class="idref" href="models.LinCCAL.html#E2:422"><span class="id" title="variable">E2</span></a>) (<span class="id" title="var">A</span> := <a class="idref" href="models.LinCCAL.html#LinCCAL.spec"><span class="id" title="abbreviation">LinCCAL.spec</span></a> <a class="idref" href="models.LinCCAL.html#E1:421"><span class="id" title="variable">E1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.spec"><span class="id" title="abbreviation">LinCCAL.spec</span></a> <a class="idref" href="models.LinCCAL.html#E2:422"><span class="id" title="variable">E2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e64bdda949bc316ba60a2488b35d8f6f" class="idref" href="#e64bdda949bc316ba60a2488b35d8f6f"><span class="id" title="binder">Σ</span></a> <a id="t:424" class="idref" href="#t:424"><span class="id" title="binder">t</span></a> <a id="m:425" class="idref" href="#m:425"><span class="id" title="binder">m</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="models.LinCCAL.html#m:425"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">m1</span> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="models.LinCCAL.html#e64bdda949bc316ba60a2488b35d8f6f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#t:424"><span class="id" title="variable">t</span></a> <span class="id" title="var">m1</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_top"><span class="id" title="constructor">LinCCAL.spec_top</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALExample.stop"><span class="id" title="constructor">stop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_cons"><span class="id" title="constructor">LinCCAL.spec_cons</span></a> <span class="id" title="var">n</span> <span class="id" title="var">Σ1</span> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALExample.scont"><span class="id" title="constructor">scont</span></a> (<span class="id" title="var">m</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">m1</span>) <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="models.LinCCAL.html#e64bdda949bc316ba60a2488b35d8f6f"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">m2</span> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="models.LinCCAL.html#e64bdda949bc316ba60a2488b35d8f6f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="models.LinCCAL.html#t:424"><span class="id" title="variable">t</span></a> <span class="id" title="var">m2</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_top"><span class="id" title="constructor">LinCCAL.spec_top</span></a> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALExample.stop"><span class="id" title="constructor">stop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="models.LinCCAL.html#LinCCAL.spec_cons"><span class="id" title="constructor">LinCCAL.spec_cons</span></a> <span class="id" title="var">n</span> <span class="id" title="var">Σ2</span> ⇒ <a class="idref" href="models.LinCCAL.html#LinCCALExample.scont"><span class="id" title="constructor">scont</span></a> (<span class="id" title="var">m</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">m2</span>) <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="models.LinCCAL.html#e64bdda949bc316ba60a2488b35d8f6f"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">Σ2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALExample.tens" class="idref" href="#LinCCALExample.tens"><span class="id" title="definition">tens</span></a> (<a id="L1:427" class="idref" href="#L1:427"><span class="id" title="binder">L1</span></a> <a id="L2:428" class="idref" href="#L2:428"><span class="id" title="binder">L2</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.t"><span class="id" title="definition">LinCCAL.t</span></a>) : <a class="idref" href="models.LinCCAL.html#LinCCAL.t"><span class="id" title="definition">LinCCAL.t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCAL.li_spec"><span class="id" title="projection">LinCCAL.li_spec</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALExample.spec_mix"><span class="id" title="definition">spec_mix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="models.LinCCAL.html#LinCCAL.li_spec"><span class="id" title="projection">LinCCAL.li_spec</span></a> <a class="idref" href="models.LinCCAL.html#L1:427"><span class="id" title="variable">L1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="models.LinCCAL.html#LinCCAL.li_spec"><span class="id" title="projection">LinCCAL.li_spec</span></a> <a class="idref" href="models.LinCCAL.html#L2:428"><span class="id" title="variable">L2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> |}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Infix</span> <a id="6ab3279d7e28b808d1005681a84d2df2" class="idref" href="#6ab3279d7e28b808d1005681a84d2df2"><span class="id" title="notation">&quot;</span></a>×" := <a class="idref" href="models.LinCCAL.html#LinCCALExample.tens"><span class="id" title="definition">tens</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab272"></a><h2 class="section">Implementation</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> (<span class="id" title="var">notations</span>) <a class="idref" href="models.EffectSignatures.html#Sig"><span class="id" title="module">Sig</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> (<span class="id" title="var">notations</span>) <a class="idref" href="models.LinCCAL.html#LinCCAL"><span class="id" title="module">LinCCAL</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">term_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="LinCCALExample.fai_impl" class="idref" href="#LinCCALExample.fai_impl"><span class="id" title="definition">fai_impl</span></a> : <a class="idref" href="models.EffectSignatures.html#Sig.term"><span class="id" title="inductive">Sig.term</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.li_sig"><span class="id" title="projection">LinCCAL.li_sig</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALExample.Llock"><span class="id" title="definition">Llock</span></a> <a class="idref" href="models.LinCCAL.html#6ab3279d7e28b808d1005681a84d2df2"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.Lreg"><span class="id" title="definition">Lreg</span></a> 0)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.acq"><span class="id" title="constructor">acq</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:429" class="idref" href="#pat:429"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.get"><span class="id" title="constructor">get</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="c:431" class="idref" href="#c:431"><span class="id" title="binder">c</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALExample.set"><span class="id" title="constructor">set</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="models.LinCCAL.html#c:430"><span class="id" title="variable">c</span></a>)) <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:432" class="idref" href="#pat:432"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:433" class="idref" href="#pat:433"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#c:430"><span class="id" title="variable">c</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALExample.fai_threadstate" class="idref" href="#LinCCALExample.fai_threadstate"><span class="id" title="inductive">fai_threadstate</span></a> (<a id="i:434" class="idref" href="#i:434"><span class="id" title="binder">i</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCAL.tid"><span class="id" title="abbreviation">LinCCAL.tid</span></a>) <a id="h:435" class="idref" href="#h:435"><span class="id" title="binder">h</span></a> : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai_rdy" class="idref" href="#LinCCALExample.fai_rdy"><span class="id" title="constructor">fai_rdy</span></a> <a id="c:438" class="idref" href="#c:438"><span class="id" title="binder">c</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:435"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:434"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_threadstate:436"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:434"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:435"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c:438"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai_acq" class="idref" href="#LinCCALExample.fai_acq"><span class="id" title="constructor">fai_acq</span></a> <a id="c:439" class="idref" href="#c:439"><span class="id" title="binder">c</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:435"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:434"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_threadstate:436"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:434"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:435"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c:439"><span class="id" title="variable">c</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">LinCCAL.mkts</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai_impl"><span class="id" title="definition">fai_impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai_get" class="idref" href="#LinCCALExample.fai_get"><span class="id" title="constructor">fai_get</span></a> <a id="c:440" class="idref" href="#c:440"><span class="id" title="binder">c</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:435"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:434"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_threadstate:436"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:434"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:435"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c:440"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">LinCCAL.mkts</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.get"><span class="id" title="constructor">get</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="c:442" class="idref" href="#c:442"><span class="id" title="binder">c</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALExample.set"><span class="id" title="constructor">set</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="models.LinCCAL.html#c:441"><span class="id" title="variable">c</span></a>)) <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:443" class="idref" href="#pat:443"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:444" class="idref" href="#pat:444"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#c:441"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai_set" class="idref" href="#LinCCALExample.fai_set"><span class="id" title="constructor">fai_set</span></a> <a id="c:445" class="idref" href="#c:445"><span class="id" title="binder">c</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:435"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:434"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_threadstate:436"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:434"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:435"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c:445"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">LinCCAL.mkts</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALExample.set"><span class="id" title="constructor">set</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="models.LinCCAL.html#c:445"><span class="id" title="variable">c</span></a>)) <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:446" class="idref" href="#pat:446"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:447" class="idref" href="#pat:447"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#c:445"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai_rel" class="idref" href="#LinCCALExample.fai_rel"><span class="id" title="constructor">fai_rel</span></a> <a id="c:448" class="idref" href="#c:448"><span class="id" title="binder">c</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:435"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:434"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_threadstate:436"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:434"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:435"><span class="id" title="variable">h</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="models.LinCCAL.html#c:448"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">LinCCAL.mkts</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.rel"><span class="id" title="constructor">rel</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">≥</span></a> <a id="pat:449" class="idref" href="#pat:449"><span class="id" title="binder">_</span></a> <a class="idref" href="models.EffectSignatures.html#2d5fa728bcd4a8c1c6bd6c4918328b56"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#c:448"><span class="id" title="variable">c</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#c:448"><span class="id" title="variable">c</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="LinCCALExample.fai_ret" class="idref" href="#LinCCALExample.fai_ret"><span class="id" title="constructor">fai_ret</span></a> <a id="c:450" class="idref" href="#c:450"><span class="id" title="binder">c</span></a> <a id="c':451" class="idref" href="#c':451"><span class="id" title="binder">c'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:435"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:434"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_threadstate:436"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:434"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:435"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c':451"><span class="id" title="variable">c'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkts"><span class="id" title="constructor">LinCCAL.mkts</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai"><span class="id" title="constructor">fai</span></a> (<a class="idref" href="models.EffectSignatures.html#Sig.var"><span class="id" title="constructor">Sig.var</span></a> <a class="idref" href="models.LinCCAL.html#c:450"><span class="id" title="variable">c</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#c:450"><span class="id" title="variable">c</span></a>))).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="LinCCALExample.fai_state" class="idref" href="#LinCCALExample.fai_state"><span class="id" title="inductive">fai_state</span></a> : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="LinCCALExample.fai_state_intro" class="idref" href="#LinCCALExample.fai_state_intro"><span class="id" title="constructor">fai_state_intro</span></a> <a id="h:454" class="idref" href="#h:454"><span class="id" title="binder">h</span></a> <a id="c:455" class="idref" href="#c:455"><span class="id" title="binder">c</span></a> <a id="s:456" class="idref" href="#s:456"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="i:457" class="idref" href="#i:457"><span class="id" title="binder">i</span></a>, <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai_threadstate"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:457"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:454"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c:455"><span class="id" title="variable">c</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.TMap.find"><span class="id" title="definition">LinCCAL.TMap.find</span></a> <a class="idref" href="models.LinCCAL.html#i:457"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#s:456"><span class="id" title="variable">s</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#fai_state:452"><span class="id" title="inductive">fai_state</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCAL.mkst"><span class="id" title="constructor">LinCCAL.mkst</span></a> (<a class="idref" href="models.LinCCAL.html#ff792ff4957e4897f535858a817c104a"><span class="id" title="definition">Σcounter</span></a> <a class="idref" href="models.LinCCAL.html#c:455"><span class="id" title="variable">c</span></a>) <a class="idref" href="models.LinCCAL.html#s:456"><span class="id" title="variable">s</span></a> (<a class="idref" href="models.LinCCAL.html#LinCCALExample.spec_mix"><span class="id" title="definition">spec_mix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="models.LinCCAL.html#LinCCALExample.unfold"><span class="id" title="definition">unfold</span></a> <a class="idref" href="models.LinCCAL.html#5c6770c8b9f8363729d3880867c7dfd7"><span class="id" title="definition">Σlock</span></a> <a class="idref" href="models.LinCCAL.html#h:454"><span class="id" title="variable">h</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="models.LinCCAL.html#aeb20c8e2c916bfc1d4a7d24de6ac0ab"><span class="id" title="definition">Σreg</span></a> <span class="id" title="var">_</span> <a class="idref" href="models.LinCCAL.html#c:455"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="LinCCALExample.fai_threadstate_convert" class="idref" href="#LinCCALExample.fai_threadstate_convert"><span class="id" title="lemma">fai_threadstate_convert</span></a> <a id="i:458" class="idref" href="#i:458"><span class="id" title="binder">i</span></a> <a id="h:459" class="idref" href="#h:459"><span class="id" title="binder">h</span></a> <a id="h':460" class="idref" href="#h':460"><span class="id" title="binder">h'</span></a> <a id="c:461" class="idref" href="#c:461"><span class="id" title="binder">c</span></a> <a id="c':462" class="idref" href="#c':462"><span class="id" title="binder">c'</span></a> <a id="s:463" class="idref" href="#s:463"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALExample.fai_threadstate"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:458"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h:459"><span class="id" title="variable">h</span></a> <a class="idref" href="models.LinCCAL.html#c:461"><span class="id" title="variable">c</span></a> <a class="idref" href="models.LinCCAL.html#s:463"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h:459"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:458"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#h':460"><span class="id" title="variable">h'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="models.LinCCAL.html#i:458"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="models.LinCCAL.html#LinCCALExample.fai_threadstate"><span class="id" title="inductive">fai_threadstate</span></a> <a class="idref" href="models.LinCCAL.html#i:458"><span class="id" title="variable">i</span></a> <a class="idref" href="models.LinCCAL.html#h':460"><span class="id" title="variable">h'</span></a> <a class="idref" href="models.LinCCAL.html#c':462"><span class="id" title="variable">c'</span></a> <a class="idref" href="models.LinCCAL.html#s:463"><span class="id" title="variable">s</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="LinCCALExample.Mcounter" class="idref" href="#LinCCALExample.Mcounter"><span class="id" title="definition">Mcounter</span></a> : <a class="idref" href="models.LinCCAL.html#LinCCALExample.Llock"><span class="id" title="definition">Llock</span></a> <a class="idref" href="models.LinCCAL.html#6ab3279d7e28b808d1005681a84d2df2"><span class="id" title="notation">×</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.Lreg"><span class="id" title="definition">Lreg</span></a> 0 <a class="idref" href="interfaces.Category.html#7b8dcc69ad76cb5f4b018ef2f5d2eebb"><span class="id" title="notation">~~&gt;</span></a> <a class="idref" href="models.LinCCAL.html#LinCCALExample.Lcounter"><span class="id" title="definition">Lcounter</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="models.LinCCAL.html#LinCCAL.li_impl"><span class="id" title="projection">LinCCAL.li_impl</span></a> '<a id="pat:464" class="idref" href="#pat:464"><span class="id" title="binder">fai</span></a> := <a class="idref" href="models.LinCCAL.html#LinCCALExample.fai_impl"><span class="id" title="definition">fai_impl</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="models.LinCCAL.html#LinCCALExample"><span class="id" title="module">LinCCALExample</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>